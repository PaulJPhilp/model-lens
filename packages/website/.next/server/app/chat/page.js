(()=>{var a={};a.id=457,a.ids=[457],a.modules={261:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/app-paths")},441:(a,b,c)=>{"use strict";let d;c.r(b),c.d(b,{default:()=>iF});var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z={};c.r(z),c.d(z,{base64:()=>bb,base64url:()=>bc,bigint:()=>bm,boolean:()=>bp,browserEmail:()=>a5,cidrv4:()=>a9,cidrv6:()=>ba,cuid:()=>aP,cuid2:()=>aQ,date:()=>bh,datetime:()=>bk,domain:()=>be,duration:()=>aV,e164:()=>bf,email:()=>a0,emoji:()=>a6,extendedDuration:()=>aW,guid:()=>aX,hex:()=>bu,hostname:()=>bd,html5Email:()=>a1,idnEmail:()=>a4,integer:()=>bn,ipv4:()=>a7,ipv6:()=>a8,ksuid:()=>aT,lowercase:()=>bs,md5_base64:()=>by,md5_base64url:()=>bz,md5_hex:()=>bx,nanoid:()=>aU,null:()=>bq,number:()=>bo,rfc5322Email:()=>a2,sha1_base64:()=>bB,sha1_base64url:()=>bC,sha1_hex:()=>bA,sha256_base64:()=>bE,sha256_base64url:()=>bF,sha256_hex:()=>bD,sha384_base64:()=>bH,sha384_base64url:()=>bI,sha384_hex:()=>bG,sha512_base64:()=>bK,sha512_base64url:()=>bL,sha512_hex:()=>bJ,string:()=>bl,time:()=>bj,ulid:()=>aR,undefined:()=>br,unicodeEmail:()=>a3,uppercase:()=>bt,uuid:()=>aY,uuid4:()=>aZ,uuid6:()=>a$,uuid7:()=>a_,xid:()=>aS});var A=c(79528),B=c(63966),C="vercel.ai.error",D=Symbol.for(C),E=class a extends Error{constructor({name:a,message:b,cause:c}){super(b),this[e]=!0,this.name=a,this.cause=c}static isInstance(b){return a.hasMarker(b,C)}static hasMarker(a,b){let c=Symbol.for(b);return null!=a&&"object"==typeof a&&c in a&&"boolean"==typeof a[c]&&!0===a[c]}};e=D;var F=E;function G(a){return null==a?"unknown error":"string"==typeof a?a:a instanceof Error?a.message:JSON.stringify(a)}Symbol.for("vercel.ai.error.AI_APICallError"),Symbol.for("vercel.ai.error.AI_EmptyResponseBodyError");var H="AI_InvalidArgumentError",I=`vercel.ai.error.${H}`,J=Symbol.for(I),K=class extends F{constructor({message:a,cause:b,argument:c}){super({name:H,message:a,cause:b}),this[f]=!0,this.argument=c}static isInstance(a){return F.hasMarker(a,I)}};f=J,Symbol.for("vercel.ai.error.AI_InvalidPromptError"),Symbol.for("vercel.ai.error.AI_InvalidResponseDataError");var L="AI_JSONParseError",M=`vercel.ai.error.${L}`,N=Symbol.for(M),O=class extends F{constructor({text:a,cause:b}){super({name:L,message:`JSON parsing failed: Text: ${a}.
Error message: ${G(b)}`,cause:b}),this[g]=!0,this.text=a}static isInstance(a){return F.hasMarker(a,M)}};g=N,Symbol.for("vercel.ai.error.AI_LoadAPIKeyError"),Symbol.for("vercel.ai.error.AI_LoadSettingError"),Symbol.for("vercel.ai.error.AI_NoContentGeneratedError"),Symbol.for("vercel.ai.error.AI_NoSuchModelError"),Symbol.for("vercel.ai.error.AI_TooManyEmbeddingValuesForCallError");var P="AI_TypeValidationError",Q=`vercel.ai.error.${P}`,R=Symbol.for(Q),S=class a extends F{constructor({value:a,cause:b}){super({name:P,message:`Type validation failed: Value: ${JSON.stringify(a)}.
Error message: ${G(b)}`,cause:b}),this[h]=!0,this.value=a}static isInstance(a){return F.hasMarker(a,Q)}static wrap({value:b,cause:c}){return a.isInstance(c)&&c.value===b?c:new a({value:b,cause:c})}};h=R;Symbol.for("vercel.ai.error.AI_UnsupportedFunctionalityError");class T extends Error{constructor(a,b){super(a),this.name="ParseError",this.type=b.type,this.field=b.field,this.value=b.value,this.line=b.line}}function U(a){}class V extends TransformStream{constructor({onError:a,onRetry:b,onComment:c}={}){let d;super({start(e){d=function(a){if("function"==typeof a)throw TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");let{onEvent:b=U,onError:c=U,onRetry:d=U,onComment:e}=a,f="",g=!0,h,i="",j="";function k(a){if(""===a)return void(i.length>0&&b({id:h,event:j||void 0,data:i.endsWith(`
`)?i.slice(0,-1):i}),h=void 0,i="",j="");if(a.startsWith(":")){e&&e(a.slice(a.startsWith(": ")?2:1));return}let c=a.indexOf(":");if(-1!==c){let b=a.slice(0,c),d=" "===a[c+1]?2:1;l(b,a.slice(c+d),a);return}l(a,"",a)}function l(a,b,e){switch(a){case"event":j=b;break;case"data":i=`${i}${b}
`;break;case"id":h=b.includes("\0")?void 0:b;break;case"retry":/^\d+$/.test(b)?d(parseInt(b,10)):c(new T(`Invalid \`retry\` value: "${b}"`,{type:"invalid-retry",value:b,line:e}));break;default:c(new T(`Unknown field "${a.length>20?`${a.slice(0,20)}\u2026`:a}"`,{type:"unknown-field",field:a,value:b,line:e}))}}return{feed:function(a){let b=g?a.replace(/^\xEF\xBB\xBF/,""):a,[c,d]=function(a){let b=[],c="",d=0;for(;d<a.length;){let e=a.indexOf("\r",d),f=a.indexOf(`
`,d),g=-1;if(-1!==e&&-1!==f?g=Math.min(e,f):-1!==e?g=e===a.length-1?-1:e:-1!==f&&(g=f),-1===g){c=a.slice(d);break}{let c=a.slice(d,g);b.push(c),"\r"===a[(d=g+1)-1]&&a[d]===`
`&&d++}}return[b,c]}(`${f}${b}`);for(let a of c)k(a);f=d,g=!1},reset:function(a={}){f&&a.consume&&k(f),g=!0,h=void 0,i="",j="",f=""}}}({onEvent:a=>{e.enqueue(a)},onError(b){"terminate"===a?e.error(b):"function"==typeof a&&a(b)},onRetry:b,onComment:c})},transform(a){d.feed(a)}})}}function W(a,b,c){function d(c,d){var e;for(let f in Object.defineProperty(c,"_zod",{value:c._zod??{},enumerable:!1}),(e=c._zod).traits??(e.traits=new Set),c._zod.traits.add(a),b(c,d),g.prototype)f in c||Object.defineProperty(c,f,{value:g.prototype[f].bind(c)});c._zod.constr=g,c._zod.def=d}let e=c?.Parent??Object;class f extends e{}function g(a){var b;let e=c?.Parent?new f:this;for(let c of(d(e,a),(b=e._zod).deferred??(b.deferred=[]),e._zod.deferred))c();return e}return Object.defineProperty(f,"name",{value:a}),Object.defineProperty(g,"init",{value:d}),Object.defineProperty(g,Symbol.hasInstance,{value:b=>!!c?.Parent&&b instanceof c.Parent||b?._zod?.traits?.has(a)}),Object.defineProperty(g,"name",{value:a}),g}Object.freeze({status:"aborted"}),Symbol("zod_brand");class X extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class Y extends Error{constructor(a){super(`Encountered unidirectional transform during encode: ${a}`),this.name="ZodEncodeError"}}let Z={};function $(a){return a&&Object.assign(Z,a),Z}function _(a){let b=Object.values(a).filter(a=>"number"==typeof a);return Object.entries(a).filter(([a,c])=>-1===b.indexOf(+a)).map(([a,b])=>b)}function aa(a,b="|"){return a.map(a=>au(a)).join(b)}function ab(a,b){return"bigint"==typeof b?b.toString():b}function ac(a){return{get value(){{let b=a();return Object.defineProperty(this,"value",{value:b}),b}}}}function ad(a){return null==a}function ae(a){let b=+!!a.startsWith("^"),c=a.endsWith("$")?a.length-1:a.length;return a.slice(b,c)}let af=Symbol("evaluating");function ag(a,b,c){let d;Object.defineProperty(a,b,{get(){if(d!==af)return void 0===d&&(d=af,d=c()),d},set(c){Object.defineProperty(a,b,{value:c})},configurable:!0})}function ah(a,b,c){Object.defineProperty(a,b,{value:c,writable:!0,enumerable:!0,configurable:!0})}function ai(...a){let b={};for(let c of a)Object.assign(b,Object.getOwnPropertyDescriptors(c));return Object.defineProperties({},b)}function aj(a){return JSON.stringify(a)}let ak="captureStackTrace"in Error?Error.captureStackTrace:(...a)=>{};function al(a){return"object"==typeof a&&null!==a&&!Array.isArray(a)}let am=ac(()=>{if("undefined"!=typeof navigator&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return Function(""),!0}catch(a){return!1}});function an(a){if(!1===al(a))return!1;let b=a.constructor;if(void 0===b)return!0;let c=b.prototype;return!1!==al(c)&&!1!==Object.prototype.hasOwnProperty.call(c,"isPrototypeOf")}function ao(a){return an(a)?{...a}:Array.isArray(a)?[...a]:a}let ap=new Set(["string","number","symbol"]),aq=new Set(["string","number","bigint","boolean","symbol","undefined"]);function ar(a){return a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function as(a,b,c){let d=new a._zod.constr(b??a._zod.def);return(!b||c?.parent)&&(d._zod.parent=a),d}function at(a){if(!a)return{};if("string"==typeof a)return{error:()=>a};if(a?.message!==void 0){if(a?.error!==void 0)throw Error("Cannot specify both `message` and `error` params");a.error=a.message}return(delete a.message,"string"==typeof a.error)?{...a,error:()=>a.error}:a}function au(a){return"bigint"==typeof a?a.toString()+"n":"string"==typeof a?`"${a}"`:`${a}`}let av={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-0x80000000,0x7fffffff],uint32:[0,0xffffffff],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},aw={int64:[BigInt("-9223372036854775808"),BigInt("9223372036854775807")],uint64:[BigInt(0),BigInt("18446744073709551615")]};function ax(a,b=0){if(!0===a.aborted)return!0;for(let c=b;c<a.issues.length;c++)if(a.issues[c]?.continue!==!0)return!0;return!1}function ay(a,b){return b.map(b=>(b.path??(b.path=[]),b.path.unshift(a),b))}function az(a){return"string"==typeof a?a:a?.message}function aA(a,b,c){let d={...a,path:a.path??[]};return a.message||(d.message=az(a.inst?._zod.def?.error?.(a))??az(b?.error?.(a))??az(c.customError?.(a))??az(c.localeError?.(a))??"Invalid input"),delete d.inst,delete d.continue,b?.reportInput||delete d.input,d}function aB(a){return a instanceof Set?"set":a instanceof Map?"map":a instanceof File?"file":"unknown"}function aC(a){return Array.isArray(a)?"array":"string"==typeof a?"string":"unknown"}function aD(...a){let[b,c,d]=a;return"string"==typeof b?{message:b,code:"custom",input:c,inst:d}:{...b}}let aE=(a,b)=>{a.name="$ZodError",Object.defineProperty(a,"_zod",{value:a._zod,enumerable:!1}),Object.defineProperty(a,"issues",{value:b,enumerable:!1}),a.message=JSON.stringify(b,ab,2),Object.defineProperty(a,"toString",{value:()=>a.message,enumerable:!1})},aF=W("$ZodError",aE),aG=W("$ZodError",aE,{Parent:Error}),aH=a=>(b,c,d,e)=>{let f=d?Object.assign(d,{async:!1}):{async:!1},g=b._zod.run({value:c,issues:[]},f);if(g instanceof Promise)throw new X;if(g.issues.length){let b=new(e?.Err??a)(g.issues.map(a=>aA(a,f,$())));throw ak(b,e?.callee),b}return g.value},aI=aH(aG),aJ=a=>async(b,c,d,e)=>{let f=d?Object.assign(d,{async:!0}):{async:!0},g=b._zod.run({value:c,issues:[]},f);if(g instanceof Promise&&(g=await g),g.issues.length){let b=new(e?.Err??a)(g.issues.map(a=>aA(a,f,$())));throw ak(b,e?.callee),b}return g.value},aK=aJ(aG),aL=a=>(b,c,d)=>{let e=d?{...d,async:!1}:{async:!1},f=b._zod.run({value:c,issues:[]},e);if(f instanceof Promise)throw new X;return f.issues.length?{success:!1,error:new(a??aF)(f.issues.map(a=>aA(a,e,$())))}:{success:!0,data:f.value}},aM=aL(aG),aN=a=>async(b,c,d)=>{let e=d?Object.assign(d,{async:!0}):{async:!0},f=b._zod.run({value:c,issues:[]},e);return f instanceof Promise&&(f=await f),f.issues.length?{success:!1,error:new a(f.issues.map(a=>aA(a,e,$())))}:{success:!0,data:f.value}},aO=aN(aG),aP=/^[cC][^\s-]{8,}$/,aQ=/^[0-9a-z]+$/,aR=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,aS=/^[0-9a-vA-V]{20}$/,aT=/^[A-Za-z0-9]{27}$/,aU=/^[a-zA-Z0-9_-]{21}$/,aV=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,aW=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,aX=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,aY=a=>a?RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${a}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,aZ=aY(4),a$=aY(6),a_=aY(7),a0=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,a1=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,a2=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,a3=/^[^\s@"]{1,64}@[^\s@]{1,255}$/u,a4=a3,a5=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function a6(){return RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")}let a7=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,a8=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,a9=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,ba=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,bb=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,bc=/^[A-Za-z0-9_-]*$/,bd=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,be=/^([a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}$/,bf=/^\+(?:[0-9]){6,14}[0-9]$/,bg="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",bh=RegExp(`^${bg}$`);function bi(a){let b="(?:[01]\\d|2[0-3]):[0-5]\\d";return"number"==typeof a.precision?-1===a.precision?`${b}`:0===a.precision?`${b}:[0-5]\\d`:`${b}:[0-5]\\d\\.\\d{${a.precision}}`:`${b}(?::[0-5]\\d(?:\\.\\d+)?)?`}function bj(a){return RegExp(`^${bi(a)}$`)}function bk(a){let b=bi({precision:a.precision}),c=["Z"];a.local&&c.push(""),a.offset&&c.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");let d=`${b}(?:${c.join("|")})`;return RegExp(`^${bg}T(?:${d})$`)}let bl=a=>{let b=a?`[\\s\\S]{${a?.minimum??0},${a?.maximum??""}}`:"[\\s\\S]*";return RegExp(`^${b}$`)},bm=/^-?\d+n?$/,bn=/^-?\d+$/,bo=/^-?\d+(?:\.\d+)?/,bp=/^(?:true|false)$/i,bq=/^null$/i,br=/^undefined$/i,bs=/^[^A-Z]*$/,bt=/^[^a-z]*$/,bu=/^[0-9a-fA-F]*$/;function bv(a,b){return RegExp(`^[A-Za-z0-9+/]{${a}}${b}$`)}function bw(a){return RegExp(`^[A-Za-z0-9_-]{${a}}$`)}let bx=/^[0-9a-fA-F]{32}$/,by=bv(22,"=="),bz=bw(22),bA=/^[0-9a-fA-F]{40}$/,bB=bv(27,"="),bC=bw(27),bD=/^[0-9a-fA-F]{64}$/,bE=bv(43,"="),bF=bw(43),bG=/^[0-9a-fA-F]{96}$/,bH=bv(64,""),bI=bw(64),bJ=/^[0-9a-fA-F]{128}$/,bK=bv(86,"=="),bL=bw(86),bM=W("$ZodCheck",(a,b)=>{var c;a._zod??(a._zod={}),a._zod.def=b,(c=a._zod).onattach??(c.onattach=[])}),bN={number:"number",bigint:"bigint",object:"date"},bO=W("$ZodCheckLessThan",(a,b)=>{bM.init(a,b);let c=bN[typeof b.value];a._zod.onattach.push(a=>{let c=a._zod.bag,d=(b.inclusive?c.maximum:c.exclusiveMaximum)??1/0;b.value<d&&(b.inclusive?c.maximum=b.value:c.exclusiveMaximum=b.value)}),a._zod.check=d=>{(b.inclusive?d.value<=b.value:d.value<b.value)||d.issues.push({origin:c,code:"too_big",maximum:b.value,input:d.value,inclusive:b.inclusive,inst:a,continue:!b.abort})}}),bP=W("$ZodCheckGreaterThan",(a,b)=>{bM.init(a,b);let c=bN[typeof b.value];a._zod.onattach.push(a=>{let c=a._zod.bag,d=(b.inclusive?c.minimum:c.exclusiveMinimum)??-1/0;b.value>d&&(b.inclusive?c.minimum=b.value:c.exclusiveMinimum=b.value)}),a._zod.check=d=>{(b.inclusive?d.value>=b.value:d.value>b.value)||d.issues.push({origin:c,code:"too_small",minimum:b.value,input:d.value,inclusive:b.inclusive,inst:a,continue:!b.abort})}}),bQ=W("$ZodCheckMultipleOf",(a,b)=>{bM.init(a,b),a._zod.onattach.push(a=>{var c;(c=a._zod.bag).multipleOf??(c.multipleOf=b.value)}),a._zod.check=c=>{if(typeof c.value!=typeof b.value)throw Error("Cannot mix number and bigint in multiple_of check.");("bigint"==typeof c.value?c.value%b.value===BigInt(0):0===function(a,b){let c=(a.toString().split(".")[1]||"").length,d=b.toString(),e=(d.split(".")[1]||"").length;if(0===e&&/\d?e-\d?/.test(d)){let a=d.match(/\d?e-(\d?)/);a?.[1]&&(e=Number.parseInt(a[1]))}let f=c>e?c:e;return Number.parseInt(a.toFixed(f).replace(".",""))%Number.parseInt(b.toFixed(f).replace(".",""))/10**f}(c.value,b.value))||c.issues.push({origin:typeof c.value,code:"not_multiple_of",divisor:b.value,input:c.value,inst:a,continue:!b.abort})}}),bR=W("$ZodCheckNumberFormat",(a,b)=>{bM.init(a,b),b.format=b.format||"float64";let c=b.format?.includes("int"),d=c?"int":"number",[e,f]=av[b.format];a._zod.onattach.push(a=>{let d=a._zod.bag;d.format=b.format,d.minimum=e,d.maximum=f,c&&(d.pattern=bn)}),a._zod.check=g=>{let h=g.value;if(c){if(!Number.isInteger(h))return void g.issues.push({expected:d,format:b.format,code:"invalid_type",continue:!1,input:h,inst:a});if(!Number.isSafeInteger(h))return void(h>0?g.issues.push({input:h,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:a,origin:d,continue:!b.abort}):g.issues.push({input:h,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:a,origin:d,continue:!b.abort}))}h<e&&g.issues.push({origin:"number",input:h,code:"too_small",minimum:e,inclusive:!0,inst:a,continue:!b.abort}),h>f&&g.issues.push({origin:"number",input:h,code:"too_big",maximum:f,inst:a})}}),bS=W("$ZodCheckBigIntFormat",(a,b)=>{bM.init(a,b);let[c,d]=aw[b.format];a._zod.onattach.push(a=>{let e=a._zod.bag;e.format=b.format,e.minimum=c,e.maximum=d}),a._zod.check=e=>{let f=e.value;f<c&&e.issues.push({origin:"bigint",input:f,code:"too_small",minimum:c,inclusive:!0,inst:a,continue:!b.abort}),f>d&&e.issues.push({origin:"bigint",input:f,code:"too_big",maximum:d,inst:a})}}),bT=W("$ZodCheckMaxSize",(a,b)=>{var c;bM.init(a,b),(c=a._zod.def).when??(c.when=a=>{let b=a.value;return!ad(b)&&void 0!==b.size}),a._zod.onattach.push(a=>{let c=a._zod.bag.maximum??1/0;b.maximum<c&&(a._zod.bag.maximum=b.maximum)}),a._zod.check=c=>{let d=c.value;d.size<=b.maximum||c.issues.push({origin:aB(d),code:"too_big",maximum:b.maximum,inclusive:!0,input:d,inst:a,continue:!b.abort})}}),bU=W("$ZodCheckMinSize",(a,b)=>{var c;bM.init(a,b),(c=a._zod.def).when??(c.when=a=>{let b=a.value;return!ad(b)&&void 0!==b.size}),a._zod.onattach.push(a=>{let c=a._zod.bag.minimum??-1/0;b.minimum>c&&(a._zod.bag.minimum=b.minimum)}),a._zod.check=c=>{let d=c.value;d.size>=b.minimum||c.issues.push({origin:aB(d),code:"too_small",minimum:b.minimum,inclusive:!0,input:d,inst:a,continue:!b.abort})}}),bV=((a,b)=>{var c;bM.init(a,b),(c=a._zod.def).when??(c.when=a=>{let b=a.value;return!ad(b)&&void 0!==b.size}),a._zod.onattach.push(a=>{let c=a._zod.bag;c.minimum=b.size,c.maximum=b.size,c.size=b.size}),a._zod.check=c=>{let d=c.value,e=d.size;if(e===b.size)return;let f=e>b.size;c.issues.push({origin:aB(d),...f?{code:"too_big",maximum:b.size}:{code:"too_small",minimum:b.size},inclusive:!0,exact:!0,input:c.value,inst:a,continue:!b.abort})}},W("$ZodCheckMaxLength",(a,b)=>{var c;bM.init(a,b),(c=a._zod.def).when??(c.when=a=>{let b=a.value;return!ad(b)&&void 0!==b.length}),a._zod.onattach.push(a=>{let c=a._zod.bag.maximum??1/0;b.maximum<c&&(a._zod.bag.maximum=b.maximum)}),a._zod.check=c=>{let d=c.value;if(d.length<=b.maximum)return;let e=aC(d);c.issues.push({origin:e,code:"too_big",maximum:b.maximum,inclusive:!0,input:d,inst:a,continue:!b.abort})}})),bW=W("$ZodCheckMinLength",(a,b)=>{var c;bM.init(a,b),(c=a._zod.def).when??(c.when=a=>{let b=a.value;return!ad(b)&&void 0!==b.length}),a._zod.onattach.push(a=>{let c=a._zod.bag.minimum??-1/0;b.minimum>c&&(a._zod.bag.minimum=b.minimum)}),a._zod.check=c=>{let d=c.value;if(d.length>=b.minimum)return;let e=aC(d);c.issues.push({origin:e,code:"too_small",minimum:b.minimum,inclusive:!0,input:d,inst:a,continue:!b.abort})}}),bX=W("$ZodCheckLengthEquals",(a,b)=>{var c;bM.init(a,b),(c=a._zod.def).when??(c.when=a=>{let b=a.value;return!ad(b)&&void 0!==b.length}),a._zod.onattach.push(a=>{let c=a._zod.bag;c.minimum=b.length,c.maximum=b.length,c.length=b.length}),a._zod.check=c=>{let d=c.value,e=d.length;if(e===b.length)return;let f=aC(d),g=e>b.length;c.issues.push({origin:f,...g?{code:"too_big",maximum:b.length}:{code:"too_small",minimum:b.length},inclusive:!0,exact:!0,input:c.value,inst:a,continue:!b.abort})}}),bY=W("$ZodCheckStringFormat",(a,b)=>{var c,d;bM.init(a,b),a._zod.onattach.push(a=>{let c=a._zod.bag;c.format=b.format,b.pattern&&(c.patterns??(c.patterns=new Set),c.patterns.add(b.pattern))}),b.pattern?(c=a._zod).check??(c.check=c=>{b.pattern.lastIndex=0,b.pattern.test(c.value)||c.issues.push({origin:"string",code:"invalid_format",format:b.format,input:c.value,...b.pattern?{pattern:b.pattern.toString()}:{},inst:a,continue:!b.abort})}):(d=a._zod).check??(d.check=()=>{})}),bZ=W("$ZodCheckRegex",(a,b)=>{bY.init(a,b),a._zod.check=c=>{b.pattern.lastIndex=0,b.pattern.test(c.value)||c.issues.push({origin:"string",code:"invalid_format",format:"regex",input:c.value,pattern:b.pattern.toString(),inst:a,continue:!b.abort})}}),b$=W("$ZodCheckLowerCase",(a,b)=>{b.pattern??(b.pattern=bs),bY.init(a,b)}),b_=W("$ZodCheckUpperCase",(a,b)=>{b.pattern??(b.pattern=bt),bY.init(a,b)}),b0=W("$ZodCheckIncludes",(a,b)=>{bM.init(a,b);let c=ar(b.includes),d=new RegExp("number"==typeof b.position?`^.{${b.position}}${c}`:c);b.pattern=d,a._zod.onattach.push(a=>{let b=a._zod.bag;b.patterns??(b.patterns=new Set),b.patterns.add(d)}),a._zod.check=c=>{c.value.includes(b.includes,b.position)||c.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:b.includes,input:c.value,inst:a,continue:!b.abort})}}),b1=W("$ZodCheckStartsWith",(a,b)=>{bM.init(a,b);let c=RegExp(`^${ar(b.prefix)}.*`);b.pattern??(b.pattern=c),a._zod.onattach.push(a=>{let b=a._zod.bag;b.patterns??(b.patterns=new Set),b.patterns.add(c)}),a._zod.check=c=>{c.value.startsWith(b.prefix)||c.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:b.prefix,input:c.value,inst:a,continue:!b.abort})}}),b2=W("$ZodCheckEndsWith",(a,b)=>{bM.init(a,b);let c=RegExp(`.*${ar(b.suffix)}$`);b.pattern??(b.pattern=c),a._zod.onattach.push(a=>{let b=a._zod.bag;b.patterns??(b.patterns=new Set),b.patterns.add(c)}),a._zod.check=c=>{c.value.endsWith(b.suffix)||c.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:b.suffix,input:c.value,inst:a,continue:!b.abort})}});(a,b)=>{bM.init(a,b);let c=new Set(b.mime);a._zod.onattach.push(a=>{a._zod.bag.mime=b.mime}),a._zod.check=d=>{c.has(d.value.type)||d.issues.push({code:"invalid_value",values:b.mime,input:d.value.type,inst:a,continue:!b.abort})}};let b3=W("$ZodCheckOverwrite",(a,b)=>{bM.init(a,b),a._zod.check=a=>{a.value=b.tx(a.value)}});class b4{constructor(a=[]){this.content=[],this.indent=0,this&&(this.args=a)}indented(a){this.indent+=1,a(this),this.indent-=1}write(a){if("function"==typeof a){a(this,{execution:"sync"}),a(this,{execution:"async"});return}let b=a.split("\n").filter(a=>a),c=Math.min(...b.map(a=>a.length-a.trimStart().length));for(let a of b.map(a=>a.slice(c)).map(a=>" ".repeat(2*this.indent)+a))this.content.push(a)}compile(){return Function(...this?.args,[...(this?.content??[""]).map(a=>`  ${a}`)].join("\n"))}}let b5={major:4,minor:1,patch:12},b6=W("$ZodType",(a,b)=>{var c;a??(a={}),a._zod.def=b,a._zod.bag=a._zod.bag||{},a._zod.version=b5;let d=[...a._zod.def.checks??[]];for(let b of(a._zod.traits.has("$ZodCheck")&&d.unshift(a),d))for(let c of b._zod.onattach)c(a);if(0===d.length)(c=a._zod).deferred??(c.deferred=[]),a._zod.deferred?.push(()=>{a._zod.run=a._zod.parse});else{let b=(a,b,c)=>{let d,e=ax(a);for(let f of b){if(f._zod.def.when){if(!f._zod.def.when(a))continue}else if(e)continue;let b=a.issues.length,g=f._zod.check(a);if(g instanceof Promise&&c?.async===!1)throw new X;if(d||g instanceof Promise)d=(d??Promise.resolve()).then(async()=>{await g,a.issues.length!==b&&(e||(e=ax(a,b)))});else{if(a.issues.length===b)continue;e||(e=ax(a,b))}}return d?d.then(()=>a):a},c=(c,e,f)=>{if(ax(c))return c.aborted=!0,c;let g=b(e,d,f);if(g instanceof Promise){if(!1===f.async)throw new X;return g.then(b=>a._zod.parse(b,f))}return a._zod.parse(g,f)};a._zod.run=(e,f)=>{if(f.skipChecks)return a._zod.parse(e,f);if("backward"===f.direction){let b=a._zod.parse({value:e.value,issues:[]},{...f,skipChecks:!0});return b instanceof Promise?b.then(a=>c(a,e,f)):c(b,e,f)}let g=a._zod.parse(e,f);if(g instanceof Promise){if(!1===f.async)throw new X;return g.then(a=>b(a,d,f))}return b(g,d,f)}}a["~standard"]={validate:b=>{try{let c=aM(a,b);return c.success?{value:c.data}:{issues:c.error?.issues}}catch(c){return aO(a,b).then(a=>a.success?{value:a.data}:{issues:a.error?.issues})}},vendor:"zod",version:1}}),b7=W("$ZodString",(a,b)=>{b6.init(a,b),a._zod.pattern=[...a?._zod.bag?.patterns??[]].pop()??bl(a._zod.bag),a._zod.parse=(c,d)=>{if(b.coerce)try{c.value=String(c.value)}catch(a){}return"string"==typeof c.value||c.issues.push({expected:"string",code:"invalid_type",input:c.value,inst:a}),c}}),b8=W("$ZodStringFormat",(a,b)=>{bY.init(a,b),b7.init(a,b)}),b9=W("$ZodGUID",(a,b)=>{b.pattern??(b.pattern=aX),b8.init(a,b)}),ca=W("$ZodUUID",(a,b)=>{if(b.version){let a={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[b.version];if(void 0===a)throw Error(`Invalid UUID version: "${b.version}"`);b.pattern??(b.pattern=aY(a))}else b.pattern??(b.pattern=aY());b8.init(a,b)}),cb=W("$ZodEmail",(a,b)=>{b.pattern??(b.pattern=a0),b8.init(a,b)}),cc=W("$ZodURL",(a,b)=>{b8.init(a,b),a._zod.check=c=>{try{let d=c.value.trim(),e=new URL(d);b.hostname&&(b.hostname.lastIndex=0,b.hostname.test(e.hostname)||c.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:bd.source,input:c.value,inst:a,continue:!b.abort})),b.protocol&&(b.protocol.lastIndex=0,b.protocol.test(e.protocol.endsWith(":")?e.protocol.slice(0,-1):e.protocol)||c.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:b.protocol.source,input:c.value,inst:a,continue:!b.abort})),b.normalize?c.value=e.href:c.value=d;return}catch(d){c.issues.push({code:"invalid_format",format:"url",input:c.value,inst:a,continue:!b.abort})}}}),cd=W("$ZodEmoji",(a,b)=>{b.pattern??(b.pattern=a6()),b8.init(a,b)}),ce=W("$ZodNanoID",(a,b)=>{b.pattern??(b.pattern=aU),b8.init(a,b)}),cf=W("$ZodCUID",(a,b)=>{b.pattern??(b.pattern=aP),b8.init(a,b)}),cg=W("$ZodCUID2",(a,b)=>{b.pattern??(b.pattern=aQ),b8.init(a,b)}),ch=W("$ZodULID",(a,b)=>{b.pattern??(b.pattern=aR),b8.init(a,b)}),ci=W("$ZodXID",(a,b)=>{b.pattern??(b.pattern=aS),b8.init(a,b)}),cj=W("$ZodKSUID",(a,b)=>{b.pattern??(b.pattern=aT),b8.init(a,b)}),ck=W("$ZodISODateTime",(a,b)=>{b.pattern??(b.pattern=bk(b)),b8.init(a,b)}),cl=W("$ZodISODate",(a,b)=>{b.pattern??(b.pattern=bh),b8.init(a,b)}),cm=W("$ZodISOTime",(a,b)=>{b.pattern??(b.pattern=bj(b)),b8.init(a,b)}),cn=W("$ZodISODuration",(a,b)=>{b.pattern??(b.pattern=aV),b8.init(a,b)}),co=W("$ZodIPv4",(a,b)=>{b.pattern??(b.pattern=a7),b8.init(a,b),a._zod.onattach.push(a=>{a._zod.bag.format="ipv4"})}),cp=W("$ZodIPv6",(a,b)=>{b.pattern??(b.pattern=a8),b8.init(a,b),a._zod.onattach.push(a=>{a._zod.bag.format="ipv6"}),a._zod.check=c=>{try{new URL(`http://[${c.value}]`)}catch{c.issues.push({code:"invalid_format",format:"ipv6",input:c.value,inst:a,continue:!b.abort})}}}),cq=W("$ZodCIDRv4",(a,b)=>{b.pattern??(b.pattern=a9),b8.init(a,b)}),cr=W("$ZodCIDRv6",(a,b)=>{b.pattern??(b.pattern=ba),b8.init(a,b),a._zod.check=c=>{let d=c.value.split("/");try{if(2!==d.length)throw Error();let[a,b]=d;if(!b)throw Error();let c=Number(b);if(`${c}`!==b||c<0||c>128)throw Error();new URL(`http://[${a}]`)}catch{c.issues.push({code:"invalid_format",format:"cidrv6",input:c.value,inst:a,continue:!b.abort})}}});function cs(a){if(""===a)return!0;if(a.length%4!=0)return!1;try{return atob(a),!0}catch{return!1}}let ct=W("$ZodBase64",(a,b)=>{b.pattern??(b.pattern=bb),b8.init(a,b),a._zod.onattach.push(a=>{a._zod.bag.contentEncoding="base64"}),a._zod.check=c=>{cs(c.value)||c.issues.push({code:"invalid_format",format:"base64",input:c.value,inst:a,continue:!b.abort})}}),cu=W("$ZodBase64URL",(a,b)=>{b.pattern??(b.pattern=bc),b8.init(a,b),a._zod.onattach.push(a=>{a._zod.bag.contentEncoding="base64url"}),a._zod.check=c=>{!function(a){if(!bc.test(a))return!1;let b=a.replace(/[-_]/g,a=>"-"===a?"+":"/");return cs(b.padEnd(4*Math.ceil(b.length/4),"="))}(c.value)&&c.issues.push({code:"invalid_format",format:"base64url",input:c.value,inst:a,continue:!b.abort})}}),cv=W("$ZodE164",(a,b)=>{b.pattern??(b.pattern=bf),b8.init(a,b)}),cw=W("$ZodJWT",(a,b)=>{b8.init(a,b),a._zod.check=c=>{!function(a,b=null){try{let c=a.split(".");if(3!==c.length)return!1;let[d]=c;if(!d)return!1;let e=JSON.parse(atob(d));if("typ"in e&&e?.typ!=="JWT"||!e.alg||b&&(!("alg"in e)||e.alg!==b))return!1;return!0}catch{return!1}}(c.value,b.alg)&&c.issues.push({code:"invalid_format",format:"jwt",input:c.value,inst:a,continue:!b.abort})}}),cx=((a,b)=>{b8.init(a,b),a._zod.check=c=>{b.fn(c.value)||c.issues.push({code:"invalid_format",format:b.format,input:c.value,inst:a,continue:!b.abort})}},W("$ZodNumber",(a,b)=>{b6.init(a,b),a._zod.pattern=a._zod.bag.pattern??bo,a._zod.parse=(c,d)=>{if(b.coerce)try{c.value=Number(c.value)}catch(a){}let e=c.value;if("number"==typeof e&&!Number.isNaN(e)&&Number.isFinite(e))return c;let f="number"==typeof e?Number.isNaN(e)?"NaN":Number.isFinite(e)?void 0:"Infinity":void 0;return c.issues.push({expected:"number",code:"invalid_type",input:e,inst:a,...f?{received:f}:{}}),c}})),cy=W("$ZodNumber",(a,b)=>{bR.init(a,b),cx.init(a,b)}),cz=W("$ZodBoolean",(a,b)=>{b6.init(a,b),a._zod.pattern=bp,a._zod.parse=(c,d)=>{if(b.coerce)try{c.value=!!c.value}catch(a){}let e=c.value;return"boolean"==typeof e||c.issues.push({expected:"boolean",code:"invalid_type",input:e,inst:a}),c}}),cA=W("$ZodBigInt",(a,b)=>{b6.init(a,b),a._zod.pattern=bm,a._zod.parse=(c,d)=>{if(b.coerce)try{c.value=BigInt(c.value)}catch(a){}return"bigint"==typeof c.value||c.issues.push({expected:"bigint",code:"invalid_type",input:c.value,inst:a}),c}}),cB=((a,b)=>{bS.init(a,b),cA.init(a,b)},W("$ZodNull",(a,b)=>{b6.init(a,b),a._zod.pattern=bq,a._zod.values=new Set([null]),a._zod.parse=(b,c)=>{let d=b.value;return null===d||b.issues.push({expected:"null",code:"invalid_type",input:d,inst:a}),b}})),cC=((a,b)=>{b6.init(a,b),a._zod.parse=a=>a},W("$ZodUnknown",(a,b)=>{b6.init(a,b),a._zod.parse=a=>a})),cD=W("$ZodNever",(a,b)=>{b6.init(a,b),a._zod.parse=(b,c)=>(b.issues.push({expected:"never",code:"invalid_type",input:b.value,inst:a}),b)});function cE(a,b,c){a.issues.length&&b.issues.push(...ay(c,a.issues)),b.value[c]=a.value}(a,b)=>{b6.init(a,b),a._zod.parse=(b,c)=>{let d=b.value;return void 0===d||b.issues.push({expected:"void",code:"invalid_type",input:d,inst:a}),b}},(a,b)=>{b6.init(a,b),a._zod.parse=(c,d)=>{if(b.coerce)try{c.value=new Date(c.value)}catch(a){}let e=c.value,f=e instanceof Date;return f&&!Number.isNaN(e.getTime())||c.issues.push({expected:"date",code:"invalid_type",input:e,...f?{received:"Invalid Date"}:{},inst:a}),c}};let cF=W("$ZodArray",(a,b)=>{b6.init(a,b),a._zod.parse=(c,d)=>{let e=c.value;if(!Array.isArray(e))return c.issues.push({expected:"array",code:"invalid_type",input:e,inst:a}),c;c.value=Array(e.length);let f=[];for(let a=0;a<e.length;a++){let g=e[a],h=b.element._zod.run({value:g,issues:[]},d);h instanceof Promise?f.push(h.then(b=>cE(b,c,a))):cE(h,c,a)}return f.length?Promise.all(f).then(()=>c):c}});function cG(a,b,c,d){a.issues.length&&b.issues.push(...ay(c,a.issues)),void 0===a.value?c in d&&(b.value[c]=void 0):b.value[c]=a.value}function cH(a){var b;let c=Object.keys(a.shape);for(let b of c)if(!a.shape?.[b]?._zod?.traits?.has("$ZodType"))throw Error(`Invalid element at key "${b}": expected a Zod schema`);let d=Object.keys(b=a.shape).filter(a=>"optional"===b[a]._zod.optin&&"optional"===b[a]._zod.optout);return{...a,keys:c,keySet:new Set(c),numKeys:c.length,optionalKeys:new Set(d)}}function cI(a,b,c,d,e,f){let g=[],h=e.keySet,i=e.catchall._zod,j=i.def.type;for(let e of Object.keys(b)){if(h.has(e))continue;if("never"===j){g.push(e);continue}let f=i.run({value:b[e],issues:[]},d);f instanceof Promise?a.push(f.then(a=>cG(a,c,e,b))):cG(f,c,e,b)}return(g.length&&c.issues.push({code:"unrecognized_keys",keys:g,input:b,inst:f}),a.length)?Promise.all(a).then(()=>c):c}let cJ=W("$ZodObject",(a,b)=>{let c;b6.init(a,b);let d=Object.getOwnPropertyDescriptor(b,"shape");if(!d?.get){let a=b.shape;Object.defineProperty(b,"shape",{get:()=>{let c={...a};return Object.defineProperty(b,"shape",{value:c}),c}})}let e=ac(()=>cH(b));ag(a._zod,"propValues",()=>{let a=b.shape,c={};for(let b in a){let d=a[b]._zod;if(d.values)for(let a of(c[b]??(c[b]=new Set),d.values))c[b].add(a)}return c});let f=b.catchall;a._zod.parse=(b,d)=>{c??(c=e.value);let g=b.value;if(!al(g))return b.issues.push({expected:"object",code:"invalid_type",input:g,inst:a}),b;b.value={};let h=[],i=c.shape;for(let a of c.keys){let c=i[a]._zod.run({value:g[a],issues:[]},d);c instanceof Promise?h.push(c.then(c=>cG(c,b,a,g))):cG(c,b,a,g)}return f?cI(h,g,b,d,e.value,a):h.length?Promise.all(h).then(()=>b):b}}),cK=W("$ZodObjectJIT",(a,b)=>{let c,d;cJ.init(a,b);let e=a._zod.parse,f=ac(()=>cH(b)),g=!Z.jitless,h=g&&am.value,i=b.catchall;a._zod.parse=(j,k)=>{d??(d=f.value);let l=j.value;return al(l)?g&&h&&k?.async===!1&&!0!==k.jitless?(c||(c=(a=>{let b=new b4(["shape","payload","ctx"]),c=f.value,d=a=>{let b=aj(a);return`shape[${b}]._zod.run({ value: input[${b}], issues: [] }, ctx)`};b.write("const input = payload.value;");let e=Object.create(null),g=0;for(let a of c.keys)e[a]=`key_${g++}`;for(let a of(b.write("const newResult = {};"),c.keys)){let c=e[a],f=aj(a);b.write(`const ${c} = ${d(a)};`),b.write(`
        if (${c}.issues.length) {
          payload.issues = payload.issues.concat(${c}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${f}, ...iss.path] : [${f}]
          })));
        }
        
        
        if (${c}.value === undefined) {
          if (${f} in input) {
            newResult[${f}] = undefined;
          }
        } else {
          newResult[${f}] = ${c}.value;
        }
        
      `)}b.write("payload.value = newResult;"),b.write("return payload;");let h=b.compile();return(b,c)=>h(a,b,c)})(b.shape)),j=c(j,k),i)?cI([],l,j,k,d,a):j:e(j,k):(j.issues.push({expected:"object",code:"invalid_type",input:l,inst:a}),j)}});function cL(a,b,c,d){for(let c of a)if(0===c.issues.length)return b.value=c.value,b;let e=a.filter(a=>!ax(a));return 1===e.length?(b.value=e[0].value,e[0]):(b.issues.push({code:"invalid_union",input:b.value,inst:c,errors:a.map(a=>a.issues.map(a=>aA(a,d,$())))}),b)}let cM=W("$ZodUnion",(a,b)=>{b6.init(a,b),ag(a._zod,"optin",()=>b.options.some(a=>"optional"===a._zod.optin)?"optional":void 0),ag(a._zod,"optout",()=>b.options.some(a=>"optional"===a._zod.optout)?"optional":void 0),ag(a._zod,"values",()=>{if(b.options.every(a=>a._zod.values))return new Set(b.options.flatMap(a=>Array.from(a._zod.values)))}),ag(a._zod,"pattern",()=>{if(b.options.every(a=>a._zod.pattern)){let a=b.options.map(a=>a._zod.pattern);return RegExp(`^(${a.map(a=>ae(a.source)).join("|")})$`)}});let c=1===b.options.length,d=b.options[0]._zod.run;a._zod.parse=(e,f)=>{if(c)return d(e,f);let g=!1,h=[];for(let a of b.options){let b=a._zod.run({value:e.value,issues:[]},f);if(b instanceof Promise)h.push(b),g=!0;else{if(0===b.issues.length)return b;h.push(b)}}return g?Promise.all(h).then(b=>cL(b,e,a,f)):cL(h,e,a,f)}}),cN=W("$ZodDiscriminatedUnion",(a,b)=>{cM.init(a,b);let c=a._zod.parse;ag(a._zod,"propValues",()=>{let a={};for(let c of b.options){let d=c._zod.propValues;if(!d||0===Object.keys(d).length)throw Error(`Invalid discriminated union option at index "${b.options.indexOf(c)}"`);for(let[b,c]of Object.entries(d))for(let d of(a[b]||(a[b]=new Set),c))a[b].add(d)}return a});let d=ac(()=>{let a=b.options,c=new Map;for(let d of a){let a=d._zod.propValues?.[b.discriminator];if(!a||0===a.size)throw Error(`Invalid discriminated union option at index "${b.options.indexOf(d)}"`);for(let b of a){if(c.has(b))throw Error(`Duplicate discriminator value "${String(b)}"`);c.set(b,d)}}return c});a._zod.parse=(e,f)=>{let g=e.value;if(!al(g))return e.issues.push({code:"invalid_type",expected:"object",input:g,inst:a}),e;let h=d.value.get(g?.[b.discriminator]);return h?h._zod.run(e,f):b.unionFallback?c(e,f):(e.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",discriminator:b.discriminator,input:g,path:[b.discriminator],inst:a}),e)}}),cO=W("$ZodIntersection",(a,b)=>{b6.init(a,b),a._zod.parse=(a,c)=>{let d=a.value,e=b.left._zod.run({value:d,issues:[]},c),f=b.right._zod.run({value:d,issues:[]},c);return e instanceof Promise||f instanceof Promise?Promise.all([e,f]).then(([b,c])=>cP(a,b,c)):cP(a,e,f)}});function cP(a,b,c){if(b.issues.length&&a.issues.push(...b.issues),c.issues.length&&a.issues.push(...c.issues),ax(a))return a;let d=function a(b,c){if(b===c||b instanceof Date&&c instanceof Date&&+b==+c)return{valid:!0,data:b};if(an(b)&&an(c)){let d=Object.keys(c),e=Object.keys(b).filter(a=>-1!==d.indexOf(a)),f={...b,...c};for(let d of e){let e=a(b[d],c[d]);if(!e.valid)return{valid:!1,mergeErrorPath:[d,...e.mergeErrorPath]};f[d]=e.data}return{valid:!0,data:f}}if(Array.isArray(b)&&Array.isArray(c)){if(b.length!==c.length)return{valid:!1,mergeErrorPath:[]};let d=[];for(let e=0;e<b.length;e++){let f=a(b[e],c[e]);if(!f.valid)return{valid:!1,mergeErrorPath:[e,...f.mergeErrorPath]};d.push(f.data)}return{valid:!0,data:d}}return{valid:!1,mergeErrorPath:[]}}(b.value,c.value);if(!d.valid)throw Error(`Unmergable intersection. Error path: ${JSON.stringify(d.mergeErrorPath)}`);return a.value=d.data,a}let cQ=W("$ZodTuple",(a,b)=>{b6.init(a,b);let c=b.items,d=c.length-[...c].reverse().findIndex(a=>"optional"!==a._zod.optin);a._zod.parse=(e,f)=>{let g=e.value;if(!Array.isArray(g))return e.issues.push({input:g,inst:a,expected:"tuple",code:"invalid_type"}),e;e.value=[];let h=[];if(!b.rest){let b=g.length>c.length,f=g.length<d-1;if(b||f)return e.issues.push({...b?{code:"too_big",maximum:c.length}:{code:"too_small",minimum:c.length},input:g,inst:a,origin:"array"}),e}let i=-1;for(let a of c){if(++i>=g.length&&i>=d)continue;let b=a._zod.run({value:g[i],issues:[]},f);b instanceof Promise?h.push(b.then(a=>cR(a,e,i))):cR(b,e,i)}if(b.rest)for(let a of g.slice(c.length)){i++;let c=b.rest._zod.run({value:a,issues:[]},f);c instanceof Promise?h.push(c.then(a=>cR(a,e,i))):cR(c,e,i)}return h.length?Promise.all(h).then(()=>e):e}});function cR(a,b,c){a.issues.length&&b.issues.push(...ay(c,a.issues)),b.value[c]=a.value}let cS=W("$ZodRecord",(a,b)=>{b6.init(a,b),a._zod.parse=(c,d)=>{let e=c.value;if(!an(e))return c.issues.push({expected:"record",code:"invalid_type",input:e,inst:a}),c;let f=[];if(b.keyType._zod.values){let g,h=b.keyType._zod.values;for(let a of(c.value={},h))if("string"==typeof a||"number"==typeof a||"symbol"==typeof a){let g=b.valueType._zod.run({value:e[a],issues:[]},d);g instanceof Promise?f.push(g.then(b=>{b.issues.length&&c.issues.push(...ay(a,b.issues)),c.value[a]=b.value})):(g.issues.length&&c.issues.push(...ay(a,g.issues)),c.value[a]=g.value)}for(let a in e)h.has(a)||(g=g??[]).push(a);g&&g.length>0&&c.issues.push({code:"unrecognized_keys",input:e,inst:a,keys:g})}else for(let g of(c.value={},Reflect.ownKeys(e))){if("__proto__"===g)continue;let h=b.keyType._zod.run({value:g,issues:[]},d);if(h instanceof Promise)throw Error("Async schemas not supported in object keys currently");if(h.issues.length){c.issues.push({code:"invalid_key",origin:"record",issues:h.issues.map(a=>aA(a,d,$())),input:g,path:[g],inst:a}),c.value[h.value]=h.value;continue}let i=b.valueType._zod.run({value:e[g],issues:[]},d);i instanceof Promise?f.push(i.then(a=>{a.issues.length&&c.issues.push(...ay(g,a.issues)),c.value[h.value]=a.value})):(i.issues.length&&c.issues.push(...ay(g,i.issues)),c.value[h.value]=i.value)}return f.length?Promise.all(f).then(()=>c):c}});function cT(a,b,c,d,e,f,g){a.issues.length&&(ap.has(typeof d)?c.issues.push(...ay(d,a.issues)):c.issues.push({code:"invalid_key",origin:"map",input:e,inst:f,issues:a.issues.map(a=>aA(a,g,$()))})),b.issues.length&&(ap.has(typeof d)?c.issues.push(...ay(d,b.issues)):c.issues.push({origin:"map",code:"invalid_element",input:e,inst:f,key:d,issues:b.issues.map(a=>aA(a,g,$()))})),c.value.set(a.value,b.value)}function cU(a,b){a.issues.length&&b.issues.push(...a.issues),b.value.add(a.value)}(a,b)=>{b6.init(a,b),a._zod.parse=(c,d)=>{let e=c.value;if(!(e instanceof Map))return c.issues.push({expected:"map",code:"invalid_type",input:e,inst:a}),c;let f=[];for(let[g,h]of(c.value=new Map,e)){let i=b.keyType._zod.run({value:g,issues:[]},d),j=b.valueType._zod.run({value:h,issues:[]},d);i instanceof Promise||j instanceof Promise?f.push(Promise.all([i,j]).then(([b,f])=>{cT(b,f,c,g,e,a,d)})):cT(i,j,c,g,e,a,d)}return f.length?Promise.all(f).then(()=>c):c}},(a,b)=>{b6.init(a,b),a._zod.parse=(c,d)=>{let e=c.value;if(!(e instanceof Set))return c.issues.push({input:e,inst:a,expected:"set",code:"invalid_type"}),c;let f=[];for(let a of(c.value=new Set,e)){let e=b.valueType._zod.run({value:a,issues:[]},d);e instanceof Promise?f.push(e.then(a=>cU(a,c))):cU(e,c)}return f.length?Promise.all(f).then(()=>c):c}};let cV=W("$ZodEnum",(a,b)=>{b6.init(a,b);let c=_(b.entries),d=new Set(c);a._zod.values=d,a._zod.pattern=RegExp(`^(${c.filter(a=>ap.has(typeof a)).map(a=>"string"==typeof a?ar(a):a.toString()).join("|")})$`),a._zod.parse=(b,e)=>{let f=b.value;return d.has(f)||b.issues.push({code:"invalid_value",values:c,input:f,inst:a}),b}}),cW=W("$ZodLiteral",(a,b)=>{if(b6.init(a,b),0===b.values.length)throw Error("Cannot create literal schema with no valid values");a._zod.values=new Set(b.values),a._zod.pattern=RegExp(`^(${b.values.map(a=>"string"==typeof a?ar(a):a?ar(a.toString()):String(a)).join("|")})$`),a._zod.parse=(c,d)=>{let e=c.value;return a._zod.values.has(e)||c.issues.push({code:"invalid_value",values:b.values,input:e,inst:a}),c}}),cX=((a,b)=>{b6.init(a,b),a._zod.parse=(b,c)=>{let d=b.value;return d instanceof File||b.issues.push({expected:"file",code:"invalid_type",input:d,inst:a}),b}},W("$ZodTransform",(a,b)=>{b6.init(a,b),a._zod.parse=(c,d)=>{if("backward"===d.direction)throw new Y(a.constructor.name);let e=b.transform(c.value,c);if(d.async)return(e instanceof Promise?e:Promise.resolve(e)).then(a=>(c.value=a,c));if(e instanceof Promise)throw new X;return c.value=e,c}}));function cY(a,b){return a.issues.length&&void 0===b?{issues:[],value:void 0}:a}let cZ=W("$ZodOptional",(a,b)=>{b6.init(a,b),a._zod.optin="optional",a._zod.optout="optional",ag(a._zod,"values",()=>b.innerType._zod.values?new Set([...b.innerType._zod.values,void 0]):void 0),ag(a._zod,"pattern",()=>{let a=b.innerType._zod.pattern;return a?RegExp(`^(${ae(a.source)})?$`):void 0}),a._zod.parse=(a,c)=>{if("optional"===b.innerType._zod.optin){let d=b.innerType._zod.run(a,c);return d instanceof Promise?d.then(b=>cY(b,a.value)):cY(d,a.value)}return void 0===a.value?a:b.innerType._zod.run(a,c)}}),c$=W("$ZodNullable",(a,b)=>{b6.init(a,b),ag(a._zod,"optin",()=>b.innerType._zod.optin),ag(a._zod,"optout",()=>b.innerType._zod.optout),ag(a._zod,"pattern",()=>{let a=b.innerType._zod.pattern;return a?RegExp(`^(${ae(a.source)}|null)$`):void 0}),ag(a._zod,"values",()=>b.innerType._zod.values?new Set([...b.innerType._zod.values,null]):void 0),a._zod.parse=(a,c)=>null===a.value?a:b.innerType._zod.run(a,c)}),c_=W("$ZodDefault",(a,b)=>{b6.init(a,b),a._zod.optin="optional",ag(a._zod,"values",()=>b.innerType._zod.values),a._zod.parse=(a,c)=>{if("backward"===c.direction)return b.innerType._zod.run(a,c);if(void 0===a.value)return a.value=b.defaultValue,a;let d=b.innerType._zod.run(a,c);return d instanceof Promise?d.then(a=>c0(a,b)):c0(d,b)}});function c0(a,b){return void 0===a.value&&(a.value=b.defaultValue),a}let c1=W("$ZodPrefault",(a,b)=>{b6.init(a,b),a._zod.optin="optional",ag(a._zod,"values",()=>b.innerType._zod.values),a._zod.parse=(a,c)=>("backward"===c.direction||void 0===a.value&&(a.value=b.defaultValue),b.innerType._zod.run(a,c))}),c2=W("$ZodNonOptional",(a,b)=>{b6.init(a,b),ag(a._zod,"values",()=>{let a=b.innerType._zod.values;return a?new Set([...a].filter(a=>void 0!==a)):void 0}),a._zod.parse=(c,d)=>{let e=b.innerType._zod.run(c,d);return e instanceof Promise?e.then(b=>c3(b,a)):c3(e,a)}});function c3(a,b){return a.issues.length||void 0!==a.value||a.issues.push({code:"invalid_type",expected:"nonoptional",input:a.value,inst:b}),a}(a,b)=>{b6.init(a,b),a._zod.parse=(a,c)=>{if("backward"===c.direction)throw new Y("ZodSuccess");let d=b.innerType._zod.run(a,c);return d instanceof Promise?d.then(b=>(a.value=0===b.issues.length,a)):(a.value=0===d.issues.length,a)}};let c4=W("$ZodCatch",(a,b)=>{b6.init(a,b),ag(a._zod,"optin",()=>b.innerType._zod.optin),ag(a._zod,"optout",()=>b.innerType._zod.optout),ag(a._zod,"values",()=>b.innerType._zod.values),a._zod.parse=(a,c)=>{if("backward"===c.direction)return b.innerType._zod.run(a,c);let d=b.innerType._zod.run(a,c);return d instanceof Promise?d.then(d=>(a.value=d.value,d.issues.length&&(a.value=b.catchValue({...a,error:{issues:d.issues.map(a=>aA(a,c,$()))},input:a.value}),a.issues=[]),a)):(a.value=d.value,d.issues.length&&(a.value=b.catchValue({...a,error:{issues:d.issues.map(a=>aA(a,c,$()))},input:a.value}),a.issues=[]),a)}}),c5=((a,b)=>{b6.init(a,b),a._zod.parse=(b,c)=>("number"==typeof b.value&&Number.isNaN(b.value)||b.issues.push({input:b.value,inst:a,expected:"nan",code:"invalid_type"}),b)},W("$ZodPipe",(a,b)=>{b6.init(a,b),ag(a._zod,"values",()=>b.in._zod.values),ag(a._zod,"optin",()=>b.in._zod.optin),ag(a._zod,"optout",()=>b.out._zod.optout),ag(a._zod,"propValues",()=>b.in._zod.propValues),a._zod.parse=(a,c)=>{if("backward"===c.direction){let d=b.out._zod.run(a,c);return d instanceof Promise?d.then(a=>c6(a,b.in,c)):c6(d,b.in,c)}let d=b.in._zod.run(a,c);return d instanceof Promise?d.then(a=>c6(a,b.out,c)):c6(d,b.out,c)}}));function c6(a,b,c){return a.issues.length?(a.aborted=!0,a):b._zod.run({value:a.value,issues:a.issues},c)}function c7(a,b,c){if(a.issues.length)return a.aborted=!0,a;if("forward"===(c.direction||"forward")){let d=b.transform(a.value,a);return d instanceof Promise?d.then(d=>c8(a,d,b.out,c)):c8(a,d,b.out,c)}{let d=b.reverseTransform(a.value,a);return d instanceof Promise?d.then(d=>c8(a,d,b.in,c)):c8(a,d,b.in,c)}}function c8(a,b,c,d){return a.issues.length?(a.aborted=!0,a):c._zod.run({value:b,issues:a.issues},d)}(a,b)=>{b6.init(a,b),ag(a._zod,"values",()=>b.in._zod.values),ag(a._zod,"optin",()=>b.in._zod.optin),ag(a._zod,"optout",()=>b.out._zod.optout),ag(a._zod,"propValues",()=>b.in._zod.propValues),a._zod.parse=(a,c)=>{if("forward"===(c.direction||"forward")){let d=b.in._zod.run(a,c);return d instanceof Promise?d.then(a=>c7(a,b,c)):c7(d,b,c)}{let d=b.out._zod.run(a,c);return d instanceof Promise?d.then(a=>c7(a,b,c)):c7(d,b,c)}}};let c9=W("$ZodReadonly",(a,b)=>{b6.init(a,b),ag(a._zod,"propValues",()=>b.innerType._zod.propValues),ag(a._zod,"values",()=>b.innerType._zod.values),ag(a._zod,"optin",()=>b.innerType._zod.optin),ag(a._zod,"optout",()=>b.innerType._zod.optout),a._zod.parse=(a,c)=>{if("backward"===c.direction)return b.innerType._zod.run(a,c);let d=b.innerType._zod.run(a,c);return d instanceof Promise?d.then(da):da(d)}});function da(a){return a.value=Object.freeze(a.value),a}(a,b)=>{b6.init(a,b);let c=[];for(let a of b.parts)if("object"==typeof a&&null!==a){if(!a._zod.pattern)throw Error(`Invalid template literal part, no pattern found: ${[...a._zod.traits].shift()}`);let b=a._zod.pattern instanceof RegExp?a._zod.pattern.source:a._zod.pattern;if(!b)throw Error(`Invalid template literal part: ${a._zod.traits}`);let d=+!!b.startsWith("^"),e=b.endsWith("$")?b.length-1:b.length;c.push(b.slice(d,e))}else if(null===a||aq.has(typeof a))c.push(ar(`${a}`));else throw Error(`Invalid template literal part: ${a}`);a._zod.pattern=RegExp(`^${c.join("")}$`),a._zod.parse=(c,d)=>("string"!=typeof c.value?c.issues.push({input:c.value,inst:a,expected:"template_literal",code:"invalid_type"}):(a._zod.pattern.lastIndex=0,a._zod.pattern.test(c.value)||c.issues.push({input:c.value,inst:a,code:"invalid_format",format:b.format??"template_literal",pattern:a._zod.pattern.source})),c)},(a,b)=>{b6.init(a,b),a._zod.parse=(a,c)=>Promise.resolve(a.value).then(a=>b.innerType._zod.run({value:a,issues:[]},c))};let db=W("$ZodLazy",(a,b)=>{b6.init(a,b),ag(a._zod,"innerType",()=>b.getter()),ag(a._zod,"pattern",()=>a._zod.innerType._zod.pattern),ag(a._zod,"propValues",()=>a._zod.innerType._zod.propValues),ag(a._zod,"optin",()=>a._zod.innerType._zod.optin??void 0),ag(a._zod,"optout",()=>a._zod.innerType._zod.optout??void 0),a._zod.parse=(b,c)=>a._zod.innerType._zod.run(b,c)}),dc=W("$ZodCustom",(a,b)=>{bM.init(a,b),b6.init(a,b),a._zod.parse=(a,b)=>a,a._zod.check=c=>{let d=c.value,e=b.fn(d);if(e instanceof Promise)return e.then(b=>dd(b,c,d,a));dd(e,c,d,a)}});function dd(a,b,c,d){if(!a){let a={code:"custom",input:c,inst:d,path:[...d._zod.def.path??[]],continue:!d._zod.def.abort};d._zod.def.params&&(a.params=d._zod.def.params),b.issues.push(aD(a))}}Symbol("ZodOutput"),Symbol("ZodInput");class de{constructor(){this._map=new WeakMap,this._idmap=new Map}add(a,...b){let c=b[0];if(this._map.set(a,c),c&&"object"==typeof c&&"id"in c){if(this._idmap.has(c.id))throw Error(`ID ${c.id} already exists in the registry`);this._idmap.set(c.id,a)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(a){let b=this._map.get(a);return b&&"object"==typeof b&&"id"in b&&this._idmap.delete(b.id),this._map.delete(a),this}get(a){let b=a._zod.parent;if(b){let c={...this.get(b)??{}};delete c.id;let d={...c,...this._map.get(a)};return Object.keys(d).length?d:void 0}return this._map.get(a)}has(a){return this._map.has(a)}}let df=new de;function dg(a,b){return new a({type:"string",format:"guid",check:"string_format",abort:!1,...at(b)})}function dh(a,b){return new a({type:"string",format:"base64",check:"string_format",abort:!1,...at(b)})}function di(a,b){return new bO({check:"less_than",...at(b),value:a,inclusive:!1})}function dj(a,b){return new bO({check:"less_than",...at(b),value:a,inclusive:!0})}function dk(a,b){return new bP({check:"greater_than",...at(b),value:a,inclusive:!1})}function dl(a,b){return new bP({check:"greater_than",...at(b),value:a,inclusive:!0})}function dm(a,b){return new bQ({check:"multiple_of",...at(b),value:a})}function dn(a,b){return new bV({check:"max_length",...at(b),maximum:a})}function dp(a,b){return new bW({check:"min_length",...at(b),minimum:a})}function dq(a,b){return new bX({check:"length_equals",...at(b),length:a})}function dr(a){return new b3({check:"overwrite",tx:a})}class ds{constructor(a){this.counter=0,this.metadataRegistry=a?.metadata??df,this.target=a?.target??"draft-2020-12",this.unrepresentable=a?.unrepresentable??"throw",this.override=a?.override??(()=>{}),this.io=a?.io??"output",this.seen=new Map}process(a,b={path:[],schemaPath:[]}){var c;let d=a._zod.def,e=this.seen.get(a);if(e)return e.count++,b.schemaPath.includes(a)&&(e.cycle=b.path),e.schema;let f={schema:{},count:1,cycle:void 0,path:b.path};this.seen.set(a,f);let g=a._zod.toJSONSchema?.();if(g)f.schema=g;else{let c={...b,schemaPath:[...b.schemaPath,a],path:b.path},e=a._zod.parent;if(e)f.ref=e,this.process(e,c),this.seen.get(e).isParent=!0;else{let b=f.schema;switch(d.type){case"string":{b.type="string";let{minimum:c,maximum:d,format:e,patterns:g,contentEncoding:h}=a._zod.bag;if("number"==typeof c&&(b.minLength=c),"number"==typeof d&&(b.maxLength=d),e&&(b.format=({guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""})[e]??e,""===b.format&&delete b.format),h&&(b.contentEncoding=h),g&&g.size>0){let a=[...g];1===a.length?b.pattern=a[0].source:a.length>1&&(f.schema.allOf=[...a.map(a=>({..."draft-7"===this.target||"draft-4"===this.target||"openapi-3.0"===this.target?{type:"string"}:{},pattern:a.source}))])}break}case"number":{let{minimum:c,maximum:d,format:e,multipleOf:f,exclusiveMaximum:g,exclusiveMinimum:h}=a._zod.bag;"string"==typeof e&&e.includes("int")?b.type="integer":b.type="number","number"==typeof h&&("draft-4"===this.target||"openapi-3.0"===this.target?(b.minimum=h,b.exclusiveMinimum=!0):b.exclusiveMinimum=h),"number"==typeof c&&(b.minimum=c,"number"==typeof h&&"draft-4"!==this.target&&(h>=c?delete b.minimum:delete b.exclusiveMinimum)),"number"==typeof g&&("draft-4"===this.target||"openapi-3.0"===this.target?(b.maximum=g,b.exclusiveMaximum=!0):b.exclusiveMaximum=g),"number"==typeof d&&(b.maximum=d,"number"==typeof g&&"draft-4"!==this.target&&(g<=d?delete b.maximum:delete b.exclusiveMaximum)),"number"==typeof f&&(b.multipleOf=f);break}case"boolean":case"success":b.type="boolean";break;case"bigint":if("throw"===this.unrepresentable)throw Error("BigInt cannot be represented in JSON Schema");break;case"symbol":if("throw"===this.unrepresentable)throw Error("Symbols cannot be represented in JSON Schema");break;case"null":"openapi-3.0"===this.target?(b.type="string",b.nullable=!0,b.enum=[null]):b.type="null";break;case"any":case"unknown":break;case"undefined":if("throw"===this.unrepresentable)throw Error("Undefined cannot be represented in JSON Schema");break;case"void":if("throw"===this.unrepresentable)throw Error("Void cannot be represented in JSON Schema");break;case"never":b.not={};break;case"date":if("throw"===this.unrepresentable)throw Error("Date cannot be represented in JSON Schema");break;case"array":{let{minimum:e,maximum:f}=a._zod.bag;"number"==typeof e&&(b.minItems=e),"number"==typeof f&&(b.maxItems=f),b.type="array",b.items=this.process(d.element,{...c,path:[...c.path,"items"]});break}case"object":{b.type="object",b.properties={};let a=d.shape;for(let d in a)b.properties[d]=this.process(a[d],{...c,path:[...c.path,"properties",d]});let e=new Set([...new Set(Object.keys(a))].filter(a=>{let b=d.shape[a]._zod;return"input"===this.io?void 0===b.optin:void 0===b.optout}));e.size>0&&(b.required=Array.from(e)),d.catchall?._zod.def.type==="never"?b.additionalProperties=!1:d.catchall?d.catchall&&(b.additionalProperties=this.process(d.catchall,{...c,path:[...c.path,"additionalProperties"]})):"output"===this.io&&(b.additionalProperties=!1);break}case"union":b.anyOf=d.options.map((a,b)=>this.process(a,{...c,path:[...c.path,"anyOf",b]}));break;case"intersection":{let a=this.process(d.left,{...c,path:[...c.path,"allOf",0]}),e=this.process(d.right,{...c,path:[...c.path,"allOf",1]}),f=a=>"allOf"in a&&1===Object.keys(a).length;b.allOf=[...f(a)?a.allOf:[a],...f(e)?e.allOf:[e]];break}case"tuple":{b.type="array";let e="draft-2020-12"===this.target?"prefixItems":"items",f="draft-2020-12"===this.target||"openapi-3.0"===this.target?"items":"additionalItems",g=d.items.map((a,b)=>this.process(a,{...c,path:[...c.path,e,b]})),h=d.rest?this.process(d.rest,{...c,path:[...c.path,f,..."openapi-3.0"===this.target?[d.items.length]:[]]}):null;"draft-2020-12"===this.target?(b.prefixItems=g,h&&(b.items=h)):"openapi-3.0"===this.target?(b.items={anyOf:g},h&&b.items.anyOf.push(h),b.minItems=g.length,h||(b.maxItems=g.length)):(b.items=g,h&&(b.additionalItems=h));let{minimum:i,maximum:j}=a._zod.bag;"number"==typeof i&&(b.minItems=i),"number"==typeof j&&(b.maxItems=j);break}case"record":b.type="object",("draft-7"===this.target||"draft-2020-12"===this.target)&&(b.propertyNames=this.process(d.keyType,{...c,path:[...c.path,"propertyNames"]})),b.additionalProperties=this.process(d.valueType,{...c,path:[...c.path,"additionalProperties"]});break;case"map":if("throw"===this.unrepresentable)throw Error("Map cannot be represented in JSON Schema");break;case"set":if("throw"===this.unrepresentable)throw Error("Set cannot be represented in JSON Schema");break;case"enum":{let a=_(d.entries);a.every(a=>"number"==typeof a)&&(b.type="number"),a.every(a=>"string"==typeof a)&&(b.type="string"),b.enum=a;break}case"literal":{let a=[];for(let b of d.values)if(void 0===b){if("throw"===this.unrepresentable)throw Error("Literal `undefined` cannot be represented in JSON Schema")}else if("bigint"==typeof b)if("throw"===this.unrepresentable)throw Error("BigInt literals cannot be represented in JSON Schema");else a.push(Number(b));else a.push(b);if(0===a.length);else if(1===a.length){let c=a[0];b.type=null===c?"null":typeof c,"draft-4"===this.target||"openapi-3.0"===this.target?b.enum=[c]:b.const=c}else a.every(a=>"number"==typeof a)&&(b.type="number"),a.every(a=>"string"==typeof a)&&(b.type="string"),a.every(a=>"boolean"==typeof a)&&(b.type="string"),a.every(a=>null===a)&&(b.type="null"),b.enum=a;break}case"file":{let c={type:"string",format:"binary",contentEncoding:"binary"},{minimum:d,maximum:e,mime:f}=a._zod.bag;void 0!==d&&(c.minLength=d),void 0!==e&&(c.maxLength=e),f?1===f.length?(c.contentMediaType=f[0],Object.assign(b,c)):b.anyOf=f.map(a=>({...c,contentMediaType:a})):Object.assign(b,c);break}case"transform":if("throw"===this.unrepresentable)throw Error("Transforms cannot be represented in JSON Schema");break;case"nullable":{let a=this.process(d.innerType,c);"openapi-3.0"===this.target?(f.ref=d.innerType,b.nullable=!0):b.anyOf=[a,{type:"null"}];break}case"nonoptional":case"promise":case"optional":this.process(d.innerType,c),f.ref=d.innerType;break;case"default":this.process(d.innerType,c),f.ref=d.innerType,b.default=JSON.parse(JSON.stringify(d.defaultValue));break;case"prefault":this.process(d.innerType,c),f.ref=d.innerType,"input"===this.io&&(b._prefault=JSON.parse(JSON.stringify(d.defaultValue)));break;case"catch":{let a;this.process(d.innerType,c),f.ref=d.innerType;try{a=d.catchValue(void 0)}catch{throw Error("Dynamic catch values are not supported in JSON Schema")}b.default=a;break}case"nan":if("throw"===this.unrepresentable)throw Error("NaN cannot be represented in JSON Schema");break;case"template_literal":{let c=a._zod.pattern;if(!c)throw Error("Pattern not found in template literal");b.type="string",b.pattern=c.source;break}case"pipe":{let a="input"===this.io?"transform"===d.in._zod.def.type?d.out:d.in:d.out;this.process(a,c),f.ref=a;break}case"readonly":this.process(d.innerType,c),f.ref=d.innerType,b.readOnly=!0;break;case"lazy":{let b=a._zod.innerType;this.process(b,c),f.ref=b;break}case"custom":if("throw"===this.unrepresentable)throw Error("Custom types cannot be represented in JSON Schema");break;case"function":if("throw"===this.unrepresentable)throw Error("Function types cannot be represented in JSON Schema")}}}let h=this.metadataRegistry.get(a);return h&&Object.assign(f.schema,h),"input"===this.io&&function a(b,c){let d=c??{seen:new Set};if(d.seen.has(b))return!1;d.seen.add(b);let e=b._zod.def;switch(e.type){case"string":case"number":case"bigint":case"boolean":case"date":case"symbol":case"undefined":case"null":case"any":case"unknown":case"never":case"void":case"literal":case"enum":case"nan":case"file":case"template_literal":case"custom":case"success":case"catch":case"function":return!1;case"array":return a(e.element,d);case"object":for(let b in e.shape)if(a(e.shape[b],d))return!0;return!1;case"union":for(let b of e.options)if(a(b,d))return!0;return!1;case"intersection":return a(e.left,d)||a(e.right,d);case"tuple":for(let b of e.items)if(a(b,d))return!0;if(e.rest&&a(e.rest,d))return!0;return!1;case"record":case"map":return a(e.keyType,d)||a(e.valueType,d);case"set":return a(e.valueType,d);case"promise":case"optional":case"nonoptional":case"nullable":case"readonly":case"default":case"prefault":return a(e.innerType,d);case"lazy":return a(e.getter(),d);case"transform":return!0;case"pipe":return a(e.in,d)||a(e.out,d)}throw Error(`Unknown schema type: ${e.type}`)}(a)&&(delete f.schema.examples,delete f.schema.default),"input"===this.io&&f.schema._prefault&&((c=f.schema).default??(c.default=f.schema._prefault)),delete f.schema._prefault,this.seen.get(a).schema}emit(a,b){let c={cycles:b?.cycles??"ref",reused:b?.reused??"inline",external:b?.external??void 0},d=this.seen.get(a);if(!d)throw Error("Unprocessed schema. This is a bug in Zod.");let e=a=>{let b="draft-2020-12"===this.target?"$defs":"definitions";if(c.external){let d=c.external.registry.get(a[0])?.id,e=c.external.uri??(a=>a);if(d)return{ref:e(d)};let f=a[1].defId??a[1].schema.id??`schema${this.counter++}`;return a[1].defId=f,{defId:f,ref:`${e("__shared")}#/${b}/${f}`}}if(a[1]===d)return{ref:"#"};let e=`#/${b}/`,f=a[1].schema.id??`__schema${this.counter++}`;return{defId:f,ref:e+f}},f=a=>{if(a[1].schema.$ref)return;let b=a[1],{ref:c,defId:d}=e(a);b.def={...b.schema},d&&(b.defId=d);let f=b.schema;for(let a in f)delete f[a];f.$ref=c};if("throw"===c.cycles)for(let a of this.seen.entries()){let b=a[1];if(b.cycle)throw Error(`Cycle detected: #/${b.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(let b of this.seen.entries()){let d=b[1];if(a===b[0]){f(b);continue}if(c.external){let d=c.external.registry.get(b[0])?.id;if(a!==b[0]&&d){f(b);continue}}if(this.metadataRegistry.get(b[0])?.id||d.cycle||d.count>1&&"ref"===c.reused){f(b);continue}}let g=(a,b)=>{let c=this.seen.get(a),d=c.def??c.schema,e={...d};if(null===c.ref)return;let f=c.ref;if(c.ref=null,f){g(f,b);let a=this.seen.get(f).schema;a.$ref&&("draft-7"===b.target||"draft-4"===b.target||"openapi-3.0"===b.target)?(d.allOf=d.allOf??[],d.allOf.push(a)):(Object.assign(d,a),Object.assign(d,e))}c.isParent||this.override({zodSchema:a,jsonSchema:d,path:c.path??[]})};for(let a of[...this.seen.entries()].reverse())g(a[0],{target:this.target});let h={};if("draft-2020-12"===this.target?h.$schema="https://json-schema.org/draft/2020-12/schema":"draft-7"===this.target?h.$schema="http://json-schema.org/draft-07/schema#":"draft-4"===this.target?h.$schema="http://json-schema.org/draft-04/schema#":"openapi-3.0"===this.target||console.warn(`Invalid target: ${this.target}`),c.external?.uri){let b=c.external.registry.get(a)?.id;if(!b)throw Error("Schema is missing an `id` property");h.$id=c.external.uri(b)}Object.assign(h,d.def);let i=c.external?.defs??{};for(let a of this.seen.entries()){let b=a[1];b.def&&b.defId&&(i[b.defId]=b.def)}c.external||Object.keys(i).length>0&&("draft-2020-12"===this.target?h.$defs=i:h.definitions=i);try{return JSON.parse(JSON.stringify(h))}catch(a){throw Error("Error converting schema to JSON.")}}}function dt(a,b){if(a instanceof de){let c=new ds(b),d={};for(let b of a._idmap.entries()){let[a,d]=b;c.process(d)}let e={},f={registry:a,uri:b?.uri,defs:d};for(let d of a._idmap.entries()){let[a,g]=d;e[a]=c.emit(g,{...b,external:f})}return Object.keys(d).length>0&&(e.__shared={["draft-2020-12"===c.target?"$defs":"definitions"]:d}),{schemas:e}}let c=new ds(b);return c.process(a),c.emit(a,b)}let du=W("ZodISODateTime",(a,b)=>{ck.init(a,b),dQ.init(a,b)}),dv=W("ZodISODate",(a,b)=>{cl.init(a,b),dQ.init(a,b)}),dw=W("ZodISOTime",(a,b)=>{cm.init(a,b),dQ.init(a,b)}),dx=W("ZodISODuration",(a,b)=>{cn.init(a,b),dQ.init(a,b)}),dy=(a,b)=>{aF.init(a,b),a.name="ZodError",Object.defineProperties(a,{format:{value:b=>(function(a,b=a=>a.message){let c={_errors:[]},d=a=>{for(let e of a.issues)if("invalid_union"===e.code&&e.errors.length)e.errors.map(a=>d({issues:a}));else if("invalid_key"===e.code)d({issues:e.issues});else if("invalid_element"===e.code)d({issues:e.issues});else if(0===e.path.length)c._errors.push(b(e));else{let a=c,d=0;for(;d<e.path.length;){let c=e.path[d];d===e.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(b(e))):a[c]=a[c]||{_errors:[]},a=a[c],d++}}};return d(a),c})(a,b)},flatten:{value:b=>(function(a,b=a=>a.message){let c={},d=[];for(let e of a.issues)e.path.length>0?(c[e.path[0]]=c[e.path[0]]||[],c[e.path[0]].push(b(e))):d.push(b(e));return{formErrors:d,fieldErrors:c}})(a,b)},addIssue:{value:b=>{a.issues.push(b),a.message=JSON.stringify(a.issues,ab,2)}},addIssues:{value:b=>{a.issues.push(...b),a.message=JSON.stringify(a.issues,ab,2)}},isEmpty:{get:()=>0===a.issues.length}})};W("ZodError",dy);let dz=W("ZodError",dy,{Parent:Error}),dA=aH(dz),dB=aJ(dz),dC=aL(dz),dD=aN(dz),dE=(a,b,c)=>{let d=c?Object.assign(c,{direction:"backward"}):{direction:"backward"};return aH(dz)(a,b,d)},dF=(a,b,c)=>aH(dz)(a,b,c),dG=async(a,b,c)=>{let d=c?Object.assign(c,{direction:"backward"}):{direction:"backward"};return aJ(dz)(a,b,d)},dH=async(a,b,c)=>aJ(dz)(a,b,c),dI=(a,b,c)=>{let d=c?Object.assign(c,{direction:"backward"}):{direction:"backward"};return aL(dz)(a,b,d)},dJ=(a,b,c)=>aL(dz)(a,b,c),dK=async(a,b,c)=>{let d=c?Object.assign(c,{direction:"backward"}):{direction:"backward"};return aN(dz)(a,b,d)},dL=async(a,b,c)=>aN(dz)(a,b,c),dM=W("ZodType",(a,b)=>(b6.init(a,b),a.def=b,a.type=b.type,Object.defineProperty(a,"_def",{value:b}),a.check=(...c)=>a.clone(ai(b,{checks:[...b.checks??[],...c.map(a=>"function"==typeof a?{_zod:{check:a,def:{check:"custom"},onattach:[]}}:a)]})),a.clone=(b,c)=>as(a,b,c),a.brand=()=>a,a.register=(b,c)=>(b.add(a,c),a),a.parse=(b,c)=>dA(a,b,c,{callee:a.parse}),a.safeParse=(b,c)=>dC(a,b,c),a.parseAsync=async(b,c)=>dB(a,b,c,{callee:a.parseAsync}),a.safeParseAsync=async(b,c)=>dD(a,b,c),a.spa=a.safeParseAsync,a.encode=(b,c)=>dE(a,b,c),a.decode=(b,c)=>dF(a,b,c),a.encodeAsync=async(b,c)=>dG(a,b,c),a.decodeAsync=async(b,c)=>dH(a,b,c),a.safeEncode=(b,c)=>dI(a,b,c),a.safeDecode=(b,c)=>dJ(a,b,c),a.safeEncodeAsync=async(b,c)=>dK(a,b,c),a.safeDecodeAsync=async(b,c)=>dL(a,b,c),a.refine=(b,c)=>a.check(function(a,b={}){return new eP({type:"custom",check:"custom",fn:a,...at(b)})}(b,c)),a.superRefine=b=>a.check(function(a){let b=function(a,b){let c=new bM({check:"custom",...at(void 0)});return c._zod.check=a,c}(c=>(c.addIssue=a=>{"string"==typeof a?c.issues.push(aD(a,c.value,b._zod.def)):(a.fatal&&(a.continue=!1),a.code??(a.code="custom"),a.input??(a.input=c.value),a.inst??(a.inst=b),a.continue??(a.continue=!b._zod.def.abort),c.issues.push(aD(a)))},a(c.value,c)));return b}(b)),a.overwrite=b=>a.check(dr(b)),a.optional=()=>eD(a),a.nullable=()=>eF(a),a.nullish=()=>eD(eF(a)),a.nonoptional=b=>new eI({type:"nonoptional",innerType:a,...at(b)}),a.array=()=>el(a),a.or=b=>er([a,b]),a.and=b=>new eu({type:"intersection",left:a,right:b}),a.transform=b=>eL(a,new eB({type:"transform",transform:b})),a.default=b=>(function(a,b){return new eG({type:"default",innerType:a,get defaultValue(){return"function"==typeof b?b():ao(b)}})})(a,b),a.prefault=b=>(function(a,b){return new eH({type:"prefault",innerType:a,get defaultValue(){return"function"==typeof b?b():ao(b)}})})(a,b),a.catch=b=>(function(a,b){return new eJ({type:"catch",innerType:a,catchValue:"function"==typeof b?b:()=>b})})(a,b),a.pipe=b=>eL(a,b),a.readonly=()=>new eM({type:"readonly",innerType:a}),a.describe=b=>{let c=a.clone();return df.add(c,{description:b}),c},Object.defineProperty(a,"description",{get:()=>df.get(a)?.description,configurable:!0}),a.meta=(...b)=>{if(0===b.length)return df.get(a);let c=a.clone();return df.add(c,b[0]),c},a.isOptional=()=>a.safeParse(void 0).success,a.isNullable=()=>a.safeParse(null).success,a)),dN=W("_ZodString",(a,b)=>{b7.init(a,b),dM.init(a,b);let c=a._zod.bag;a.format=c.format??null,a.minLength=c.minimum??null,a.maxLength=c.maximum??null,a.regex=(...b)=>a.check(function(a,b){return new bZ({check:"string_format",format:"regex",...at(b),pattern:a})}(...b)),a.includes=(...b)=>a.check(function(a,b){return new b0({check:"string_format",format:"includes",...at(b),includes:a})}(...b)),a.startsWith=(...b)=>a.check(function(a,b){return new b1({check:"string_format",format:"starts_with",...at(b),prefix:a})}(...b)),a.endsWith=(...b)=>a.check(function(a,b){return new b2({check:"string_format",format:"ends_with",...at(b),suffix:a})}(...b)),a.min=(...b)=>a.check(dp(...b)),a.max=(...b)=>a.check(dn(...b)),a.length=(...b)=>a.check(dq(...b)),a.nonempty=(...b)=>a.check(dp(1,...b)),a.lowercase=b=>a.check(new b$({check:"string_format",format:"lowercase",...at(b)})),a.uppercase=b=>a.check(new b_({check:"string_format",format:"uppercase",...at(b)})),a.trim=()=>a.check(dr(a=>a.trim())),a.normalize=(...b)=>a.check(function(a){return dr(b=>b.normalize(a))}(...b)),a.toLowerCase=()=>a.check(dr(a=>a.toLowerCase())),a.toUpperCase=()=>a.check(dr(a=>a.toUpperCase()))}),dO=W("ZodString",(a,b)=>{b7.init(a,b),dN.init(a,b),a.email=b=>a.check(new dR({type:"string",format:"email",check:"string_format",abort:!1,...at(b)})),a.url=b=>a.check(new dU({type:"string",format:"url",check:"string_format",abort:!1,...at(b)})),a.jwt=b=>a.check(new d7({type:"string",format:"jwt",check:"string_format",abort:!1,...at(b)})),a.emoji=b=>a.check(new dV({type:"string",format:"emoji",check:"string_format",abort:!1,...at(b)})),a.guid=b=>a.check(dg(dS,b)),a.uuid=b=>a.check(new dT({type:"string",format:"uuid",check:"string_format",abort:!1,...at(b)})),a.uuidv4=b=>a.check(new dT({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...at(b)})),a.uuidv6=b=>a.check(new dT({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...at(b)})),a.uuidv7=b=>a.check(new dT({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...at(b)})),a.nanoid=b=>a.check(new dW({type:"string",format:"nanoid",check:"string_format",abort:!1,...at(b)})),a.guid=b=>a.check(dg(dS,b)),a.cuid=b=>a.check(new dX({type:"string",format:"cuid",check:"string_format",abort:!1,...at(b)})),a.cuid2=b=>a.check(new dY({type:"string",format:"cuid2",check:"string_format",abort:!1,...at(b)})),a.ulid=b=>a.check(new dZ({type:"string",format:"ulid",check:"string_format",abort:!1,...at(b)})),a.base64=b=>a.check(dh(d4,b)),a.base64url=b=>a.check(new d5({type:"string",format:"base64url",check:"string_format",abort:!1,...at(b)})),a.xid=b=>a.check(new d$({type:"string",format:"xid",check:"string_format",abort:!1,...at(b)})),a.ksuid=b=>a.check(new d_({type:"string",format:"ksuid",check:"string_format",abort:!1,...at(b)})),a.ipv4=b=>a.check(new d0({type:"string",format:"ipv4",check:"string_format",abort:!1,...at(b)})),a.ipv6=b=>a.check(new d1({type:"string",format:"ipv6",check:"string_format",abort:!1,...at(b)})),a.cidrv4=b=>a.check(new d2({type:"string",format:"cidrv4",check:"string_format",abort:!1,...at(b)})),a.cidrv6=b=>a.check(new d3({type:"string",format:"cidrv6",check:"string_format",abort:!1,...at(b)})),a.e164=b=>a.check(new d6({type:"string",format:"e164",check:"string_format",abort:!1,...at(b)})),a.datetime=b=>a.check(new du({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...at(b)})),a.date=b=>a.check(new dv({type:"string",format:"date",check:"string_format",...at(b)})),a.time=b=>a.check(new dw({type:"string",format:"time",check:"string_format",precision:null,...at(b)})),a.duration=b=>a.check(new dx({type:"string",format:"duration",check:"string_format",...at(b)}))});function dP(a){return new dO({type:"string",...at(a)})}let dQ=W("ZodStringFormat",(a,b)=>{b8.init(a,b),dN.init(a,b)}),dR=W("ZodEmail",(a,b)=>{cb.init(a,b),dQ.init(a,b)}),dS=W("ZodGUID",(a,b)=>{b9.init(a,b),dQ.init(a,b)}),dT=W("ZodUUID",(a,b)=>{ca.init(a,b),dQ.init(a,b)}),dU=W("ZodURL",(a,b)=>{cc.init(a,b),dQ.init(a,b)}),dV=W("ZodEmoji",(a,b)=>{cd.init(a,b),dQ.init(a,b)}),dW=W("ZodNanoID",(a,b)=>{ce.init(a,b),dQ.init(a,b)}),dX=W("ZodCUID",(a,b)=>{cf.init(a,b),dQ.init(a,b)}),dY=W("ZodCUID2",(a,b)=>{cg.init(a,b),dQ.init(a,b)}),dZ=W("ZodULID",(a,b)=>{ch.init(a,b),dQ.init(a,b)}),d$=W("ZodXID",(a,b)=>{ci.init(a,b),dQ.init(a,b)}),d_=W("ZodKSUID",(a,b)=>{cj.init(a,b),dQ.init(a,b)}),d0=W("ZodIPv4",(a,b)=>{co.init(a,b),dQ.init(a,b)}),d1=W("ZodIPv6",(a,b)=>{cp.init(a,b),dQ.init(a,b)}),d2=W("ZodCIDRv4",(a,b)=>{cq.init(a,b),dQ.init(a,b)}),d3=W("ZodCIDRv6",(a,b)=>{cr.init(a,b),dQ.init(a,b)}),d4=W("ZodBase64",(a,b)=>{ct.init(a,b),dQ.init(a,b)}),d5=W("ZodBase64URL",(a,b)=>{cu.init(a,b),dQ.init(a,b)}),d6=W("ZodE164",(a,b)=>{cv.init(a,b),dQ.init(a,b)}),d7=W("ZodJWT",(a,b)=>{cw.init(a,b),dQ.init(a,b)}),d8=W("ZodNumber",(a,b)=>{cx.init(a,b),dM.init(a,b),a.gt=(b,c)=>a.check(dk(b,c)),a.gte=(b,c)=>a.check(dl(b,c)),a.min=(b,c)=>a.check(dl(b,c)),a.lt=(b,c)=>a.check(di(b,c)),a.lte=(b,c)=>a.check(dj(b,c)),a.max=(b,c)=>a.check(dj(b,c)),a.int=b=>a.check(eb(b)),a.safe=b=>a.check(eb(b)),a.positive=b=>a.check(dk(0,b)),a.nonnegative=b=>a.check(dl(0,b)),a.negative=b=>a.check(di(0,b)),a.nonpositive=b=>a.check(dj(0,b)),a.multipleOf=(b,c)=>a.check(dm(b,c)),a.step=(b,c)=>a.check(dm(b,c)),a.finite=()=>a;let c=a._zod.bag;a.minValue=Math.max(c.minimum??-1/0,c.exclusiveMinimum??-1/0)??null,a.maxValue=Math.min(c.maximum??1/0,c.exclusiveMaximum??1/0)??null,a.isInt=(c.format??"").includes("int")||Number.isSafeInteger(c.multipleOf??.5),a.isFinite=!0,a.format=c.format??null});function d9(a){return new d8({type:"number",checks:[],...at(a)})}let ea=W("ZodNumberFormat",(a,b)=>{cy.init(a,b),d8.init(a,b)});function eb(a){return new ea({type:"number",check:"number_format",abort:!1,format:"safeint",...at(a)})}let ec=W("ZodBoolean",(a,b)=>{cz.init(a,b),dM.init(a,b)});function ed(a){return new ec({type:"boolean",...at(a)})}(a,b)=>{cA.init(a,b),dM.init(a,b),a.gte=(b,c)=>a.check(dl(b,c)),a.min=(b,c)=>a.check(dl(b,c)),a.gt=(b,c)=>a.check(dk(b,c)),a.gte=(b,c)=>a.check(dl(b,c)),a.min=(b,c)=>a.check(dl(b,c)),a.lt=(b,c)=>a.check(di(b,c)),a.lte=(b,c)=>a.check(dj(b,c)),a.max=(b,c)=>a.check(dj(b,c)),a.positive=b=>a.check(dk(BigInt(0),b)),a.negative=b=>a.check(di(BigInt(0),b)),a.nonpositive=b=>a.check(dj(BigInt(0),b)),a.nonnegative=b=>a.check(dl(BigInt(0),b)),a.multipleOf=(b,c)=>a.check(dm(b,c));let c=a._zod.bag;a.minValue=c.minimum??null,a.maxValue=c.maximum??null,a.format=c.format??null};let ee=W("ZodNull",(a,b)=>{cB.init(a,b),dM.init(a,b)});function ef(a){return new ee({type:"null",...at(a)})}let eg=W("ZodUnknown",(a,b)=>{cC.init(a,b),dM.init(a,b)});function eh(){return new eg({type:"unknown"})}let ei=W("ZodNever",(a,b)=>{cD.init(a,b),dM.init(a,b)});function ej(a){return new ei({type:"never",...at(a)})}let ek=W("ZodArray",(a,b)=>{cF.init(a,b),dM.init(a,b),a.element=b.element,a.min=(b,c)=>a.check(dp(b,c)),a.nonempty=b=>a.check(dp(1,b)),a.max=(b,c)=>a.check(dn(b,c)),a.length=(b,c)=>a.check(dq(b,c)),a.unwrap=()=>a.element});function el(a,b){return new ek({type:"array",element:a,...at(b)})}let em=W("ZodObject",(a,b)=>{cK.init(a,b),dM.init(a,b),ag(a,"shape",()=>b.shape),a.keyof=()=>ey(Object.keys(a._zod.def.shape)),a.catchall=b=>a.clone({...a._zod.def,catchall:b}),a.passthrough=()=>a.clone({...a._zod.def,catchall:eh()}),a.loose=()=>a.clone({...a._zod.def,catchall:eh()}),a.strict=()=>a.clone({...a._zod.def,catchall:ej()}),a.strip=()=>a.clone({...a._zod.def,catchall:void 0}),a.extend=b=>(function(a,b){if(!an(b))throw Error("Invalid input to extend: expected a plain object");let c=a._zod.def.checks;if(c&&c.length>0)throw Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");let d=ai(a._zod.def,{get shape(){let c={...a._zod.def.shape,...b};return ah(this,"shape",c),c},checks:[]});return as(a,d)})(a,b),a.safeExtend=b=>(function(a,b){if(!an(b))throw Error("Invalid input to safeExtend: expected a plain object");let c={...a._zod.def,get shape(){let c={...a._zod.def.shape,...b};return ah(this,"shape",c),c},checks:a._zod.def.checks};return as(a,c)})(a,b),a.merge=b=>(function(a,b){let c=ai(a._zod.def,{get shape(){let c={...a._zod.def.shape,...b._zod.def.shape};return ah(this,"shape",c),c},get catchall(){return b._zod.def.catchall},checks:[]});return as(a,c)})(a,b),a.pick=b=>(function(a,b){let c=a._zod.def,d=ai(a._zod.def,{get shape(){let a={};for(let d in b){if(!(d in c.shape))throw Error(`Unrecognized key: "${d}"`);b[d]&&(a[d]=c.shape[d])}return ah(this,"shape",a),a},checks:[]});return as(a,d)})(a,b),a.omit=b=>(function(a,b){let c=a._zod.def,d=ai(a._zod.def,{get shape(){let d={...a._zod.def.shape};for(let a in b){if(!(a in c.shape))throw Error(`Unrecognized key: "${a}"`);b[a]&&delete d[a]}return ah(this,"shape",d),d},checks:[]});return as(a,d)})(a,b),a.partial=(...b)=>(function(a,b,c){let d=ai(b._zod.def,{get shape(){let d=b._zod.def.shape,e={...d};if(c)for(let b in c){if(!(b in d))throw Error(`Unrecognized key: "${b}"`);c[b]&&(e[b]=a?new a({type:"optional",innerType:d[b]}):d[b])}else for(let b in d)e[b]=a?new a({type:"optional",innerType:d[b]}):d[b];return ah(this,"shape",e),e},checks:[]});return as(b,d)})(eC,a,b[0]),a.required=(...b)=>(function(a,b,c){let d=ai(b._zod.def,{get shape(){let d=b._zod.def.shape,e={...d};if(c)for(let b in c){if(!(b in e))throw Error(`Unrecognized key: "${b}"`);c[b]&&(e[b]=new a({type:"nonoptional",innerType:d[b]}))}else for(let b in d)e[b]=new a({type:"nonoptional",innerType:d[b]});return ah(this,"shape",e),e},checks:[]});return as(b,d)})(eI,a,b[0])});function en(a,b){return new em({type:"object",shape:a??{},...at(b)})}function eo(a,b){return new em({type:"object",shape:a,catchall:ej(),...at(b)})}function ep(a,b){return new em({type:"object",shape:a,catchall:eh(),...at(b)})}let eq=W("ZodUnion",(a,b)=>{cM.init(a,b),dM.init(a,b),a.options=b.options});function er(a,b){return new eq({type:"union",options:a,...at(b)})}let es=W("ZodDiscriminatedUnion",(a,b)=>{eq.init(a,b),cN.init(a,b)});function et(a,b,c){return new es({type:"union",options:b,discriminator:a,...at(c)})}let eu=W("ZodIntersection",(a,b)=>{cO.init(a,b),dM.init(a,b)}),ev=W("ZodRecord",(a,b)=>{cS.init(a,b),dM.init(a,b),a.keyType=b.keyType,a.valueType=b.valueType});function ew(a,b,c){return new ev({type:"record",keyType:a,valueType:b,...at(c)})}let ex=W("ZodEnum",(a,b)=>{cV.init(a,b),dM.init(a,b),a.enum=b.entries,a.options=Object.values(b.entries);let c=new Set(Object.keys(b.entries));a.extract=(a,d)=>{let e={};for(let d of a)if(c.has(d))e[d]=b.entries[d];else throw Error(`Key ${d} not found in enum`);return new ex({...b,checks:[],...at(d),entries:e})},a.exclude=(a,d)=>{let e={...b.entries};for(let b of a)if(c.has(b))delete e[b];else throw Error(`Key ${b} not found in enum`);return new ex({...b,checks:[],...at(d),entries:e})}});function ey(a,b){return new ex({type:"enum",entries:Array.isArray(a)?Object.fromEntries(a.map(a=>[a,a])):a,...at(b)})}let ez=W("ZodLiteral",(a,b)=>{cW.init(a,b),dM.init(a,b),a.values=new Set(b.values),Object.defineProperty(a,"value",{get(){if(b.values.length>1)throw Error("This schema contains multiple valid literal values. Use `.values` instead.");return b.values[0]}})});function eA(a,b){return new ez({type:"literal",values:Array.isArray(a)?a:[a],...at(b)})}let eB=W("ZodTransform",(a,b)=>{cX.init(a,b),dM.init(a,b),a._zod.parse=(c,d)=>{if("backward"===d.direction)throw new Y(a.constructor.name);c.addIssue=d=>{"string"==typeof d?c.issues.push(aD(d,c.value,b)):(d.fatal&&(d.continue=!1),d.code??(d.code="custom"),d.input??(d.input=c.value),d.inst??(d.inst=a),c.issues.push(aD(d)))};let e=b.transform(c.value,c);return e instanceof Promise?e.then(a=>(c.value=a,c)):(c.value=e,c)}}),eC=W("ZodOptional",(a,b)=>{cZ.init(a,b),dM.init(a,b),a.unwrap=()=>a._zod.def.innerType});function eD(a){return new eC({type:"optional",innerType:a})}let eE=W("ZodNullable",(a,b)=>{c$.init(a,b),dM.init(a,b),a.unwrap=()=>a._zod.def.innerType});function eF(a){return new eE({type:"nullable",innerType:a})}let eG=W("ZodDefault",(a,b)=>{c_.init(a,b),dM.init(a,b),a.unwrap=()=>a._zod.def.innerType,a.removeDefault=a.unwrap}),eH=W("ZodPrefault",(a,b)=>{c1.init(a,b),dM.init(a,b),a.unwrap=()=>a._zod.def.innerType}),eI=W("ZodNonOptional",(a,b)=>{c2.init(a,b),dM.init(a,b),a.unwrap=()=>a._zod.def.innerType}),eJ=W("ZodCatch",(a,b)=>{c4.init(a,b),dM.init(a,b),a.unwrap=()=>a._zod.def.innerType,a.removeCatch=a.unwrap}),eK=W("ZodPipe",(a,b)=>{c5.init(a,b),dM.init(a,b),a.in=b.in,a.out=b.out});function eL(a,b){return new eK({type:"pipe",in:a,out:b})}let eM=W("ZodReadonly",(a,b)=>{c9.init(a,b),dM.init(a,b),a.unwrap=()=>a._zod.def.innerType}),eN=W("ZodLazy",(a,b)=>{db.init(a,b),dM.init(a,b),a.unwrap=()=>a._zod.def.getter()});function eO(a){return new eN({type:"lazy",getter:a})}let eP=W("ZodCustom",(a,b)=>{dc.init(a,b),dM.init(a,b)});function eQ(a,b){let c=at(b);return c.abort??(c.abort=!0),new eP({type:"custom",check:"custom",fn:a??(()=>!0),...c})}function eR(a,b={error:`Input not instance of ${a.name}`}){let c=new eP({type:"custom",check:"custom",fn:b=>b instanceof a,abort:!0,...at(b)});return c._zod.bag.Class=a,c}i||(i={}),$({localeError:(()=>{let a={string:{unit:"characters",verb:"to have"},file:{unit:"bytes",verb:"to have"},array:{unit:"items",verb:"to have"},set:{unit:"items",verb:"to have"}},b={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"};return c=>{switch(c.code){case"invalid_type":return`Invalid input: expected ${c.expected}, received ${(a=>{let b=typeof a;switch(b){case"number":return Number.isNaN(a)?"NaN":"number";case"object":if(Array.isArray(a))return"array";if(null===a)return"null";if(Object.getPrototypeOf(a)!==Object.prototype&&a.constructor)return a.constructor.name}return b})(c.input)}`;case"invalid_value":if(1===c.values.length)return`Invalid input: expected ${au(c.values[0])}`;return`Invalid option: expected one of ${aa(c.values,"|")}`;case"too_big":{let b=c.inclusive?"<=":"<",d=a[c.origin]??null;if(d)return`Too big: expected ${c.origin??"value"} to have ${b}${c.maximum.toString()} ${d.unit??"elements"}`;return`Too big: expected ${c.origin??"value"} to be ${b}${c.maximum.toString()}`}case"too_small":{let b=c.inclusive?">=":">",d=a[c.origin]??null;if(d)return`Too small: expected ${c.origin} to have ${b}${c.minimum.toString()} ${d.unit}`;return`Too small: expected ${c.origin} to be ${b}${c.minimum.toString()}`}case"invalid_format":if("starts_with"===c.format)return`Invalid string: must start with "${c.prefix}"`;if("ends_with"===c.format)return`Invalid string: must end with "${c.suffix}"`;if("includes"===c.format)return`Invalid string: must include "${c.includes}"`;if("regex"===c.format)return`Invalid string: must match pattern ${c.pattern}`;return`Invalid ${b[c.format]??c.format}`;case"not_multiple_of":return`Invalid number: must be a multiple of ${c.divisor}`;case"unrecognized_keys":return`Unrecognized key${c.keys.length>1?"s":""}: ${aa(c.keys,", ")}`;case"invalid_key":return`Invalid key in ${c.origin}`;case"invalid_union":default:return"Invalid input";case"invalid_element":return`Invalid value in ${c.origin}`}}})()}),function(a){a.assertEqual=a=>{},a.assertIs=function(a){},a.assertNever=function(a){throw Error()},a.arrayToEnum=a=>{let b={};for(let c of a)b[c]=c;return b},a.getValidEnumValues=b=>{let c=a.objectKeys(b).filter(a=>"number"!=typeof b[b[a]]),d={};for(let a of c)d[a]=b[a];return a.objectValues(d)},a.objectValues=b=>a.objectKeys(b).map(function(a){return b[a]}),a.objectKeys="function"==typeof Object.keys?a=>Object.keys(a):a=>{let b=[];for(let c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return b},a.find=(a,b)=>{for(let c of a)if(b(c))return c},a.isInteger="function"==typeof Number.isInteger?a=>Number.isInteger(a):a=>"number"==typeof a&&Number.isFinite(a)&&Math.floor(a)===a,a.joinValues=function(a,b=" | "){return a.map(a=>"string"==typeof a?`'${a}'`:a).join(b)},a.jsonStringifyReplacer=(a,b)=>"bigint"==typeof b?b.toString():b}(j||(j={})),(k||(k={})).mergeShapes=(a,b)=>({...a,...b});let eS=j.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),eT=a=>{switch(typeof a){case"undefined":return eS.undefined;case"string":return eS.string;case"number":return Number.isNaN(a)?eS.nan:eS.number;case"boolean":return eS.boolean;case"function":return eS.function;case"bigint":return eS.bigint;case"symbol":return eS.symbol;case"object":if(Array.isArray(a))return eS.array;if(null===a)return eS.null;if(a.then&&"function"==typeof a.then&&a.catch&&"function"==typeof a.catch)return eS.promise;if("undefined"!=typeof Map&&a instanceof Map)return eS.map;if("undefined"!=typeof Set&&a instanceof Set)return eS.set;if("undefined"!=typeof Date&&a instanceof Date)return eS.date;return eS.object;default:return eS.unknown}},eU=j.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class eV extends Error{get errors(){return this.issues}constructor(a){super(),this.issues=[],this.addIssue=a=>{this.issues=[...this.issues,a]},this.addIssues=(a=[])=>{this.issues=[...this.issues,...a]};let b=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,b):this.__proto__=b,this.name="ZodError",this.issues=a}format(a){let b=a||function(a){return a.message},c={_errors:[]},d=a=>{for(let e of a.issues)if("invalid_union"===e.code)e.unionErrors.map(d);else if("invalid_return_type"===e.code)d(e.returnTypeError);else if("invalid_arguments"===e.code)d(e.argumentsError);else if(0===e.path.length)c._errors.push(b(e));else{let a=c,d=0;for(;d<e.path.length;){let c=e.path[d];d===e.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(b(e))):a[c]=a[c]||{_errors:[]},a=a[c],d++}}};return d(this),c}static assert(a){if(!(a instanceof eV))throw Error(`Not a ZodError: ${a}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,j.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(a=a=>a.message){let b=Object.create(null),c=[];for(let d of this.issues)if(d.path.length>0){let c=d.path[0];b[c]=b[c]||[],b[c].push(a(d))}else c.push(a(d));return{formErrors:c,fieldErrors:b}}get formErrors(){return this.flatten()}}eV.create=a=>new eV(a);let eW=(a,b)=>{let c;switch(a.code){case eU.invalid_type:c=a.received===eS.undefined?"Required":`Expected ${a.expected}, received ${a.received}`;break;case eU.invalid_literal:c=`Invalid literal value, expected ${JSON.stringify(a.expected,j.jsonStringifyReplacer)}`;break;case eU.unrecognized_keys:c=`Unrecognized key(s) in object: ${j.joinValues(a.keys,", ")}`;break;case eU.invalid_union:c="Invalid input";break;case eU.invalid_union_discriminator:c=`Invalid discriminator value. Expected ${j.joinValues(a.options)}`;break;case eU.invalid_enum_value:c=`Invalid enum value. Expected ${j.joinValues(a.options)}, received '${a.received}'`;break;case eU.invalid_arguments:c="Invalid function arguments";break;case eU.invalid_return_type:c="Invalid function return type";break;case eU.invalid_date:c="Invalid date";break;case eU.invalid_string:"object"==typeof a.validation?"includes"in a.validation?(c=`Invalid input: must include "${a.validation.includes}"`,"number"==typeof a.validation.position&&(c=`${c} at one or more positions greater than or equal to ${a.validation.position}`)):"startsWith"in a.validation?c=`Invalid input: must start with "${a.validation.startsWith}"`:"endsWith"in a.validation?c=`Invalid input: must end with "${a.validation.endsWith}"`:j.assertNever(a.validation):c="regex"!==a.validation?`Invalid ${a.validation}`:"Invalid";break;case eU.too_small:c="array"===a.type?`Array must contain ${a.exact?"exactly":a.inclusive?"at least":"more than"} ${a.minimum} element(s)`:"string"===a.type?`String must contain ${a.exact?"exactly":a.inclusive?"at least":"over"} ${a.minimum} character(s)`:"number"===a.type||"bigint"===a.type?`Number must be ${a.exact?"exactly equal to ":a.inclusive?"greater than or equal to ":"greater than "}${a.minimum}`:"date"===a.type?`Date must be ${a.exact?"exactly equal to ":a.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(a.minimum))}`:"Invalid input";break;case eU.too_big:c="array"===a.type?`Array must contain ${a.exact?"exactly":a.inclusive?"at most":"less than"} ${a.maximum} element(s)`:"string"===a.type?`String must contain ${a.exact?"exactly":a.inclusive?"at most":"under"} ${a.maximum} character(s)`:"number"===a.type?`Number must be ${a.exact?"exactly":a.inclusive?"less than or equal to":"less than"} ${a.maximum}`:"bigint"===a.type?`BigInt must be ${a.exact?"exactly":a.inclusive?"less than or equal to":"less than"} ${a.maximum}`:"date"===a.type?`Date must be ${a.exact?"exactly":a.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(a.maximum))}`:"Invalid input";break;case eU.custom:c="Invalid input";break;case eU.invalid_intersection_types:c="Intersection results could not be merged";break;case eU.not_multiple_of:c=`Number must be a multiple of ${a.multipleOf}`;break;case eU.not_finite:c="Number must be finite";break;default:c=b.defaultError,j.assertNever(a)}return{message:c}},eX=a=>{let{data:b,path:c,errorMaps:d,issueData:e}=a,f=[...c,...e.path||[]],g={...e,path:f};if(void 0!==e.message)return{...e,path:f,message:e.message};let h="";for(let a of d.filter(a=>!!a).slice().reverse())h=a(g,{data:b,defaultError:h}).message;return{...e,path:f,message:h}};function eY(a,b){let c=eX({issueData:b,data:a.data,path:a.path,errorMaps:[a.common.contextualErrorMap,a.schemaErrorMap,eW,void 0].filter(a=>!!a)});a.common.issues.push(c)}class eZ{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(a,b){let c=[];for(let d of b){if("aborted"===d.status)return e$;"dirty"===d.status&&a.dirty(),c.push(d.value)}return{status:a.value,value:c}}static async mergeObjectAsync(a,b){let c=[];for(let a of b){let b=await a.key,d=await a.value;c.push({key:b,value:d})}return eZ.mergeObjectSync(a,c)}static mergeObjectSync(a,b){let c={};for(let d of b){let{key:b,value:e}=d;if("aborted"===b.status||"aborted"===e.status)return e$;"dirty"===b.status&&a.dirty(),"dirty"===e.status&&a.dirty(),"__proto__"!==b.value&&(void 0!==e.value||d.alwaysSet)&&(c[b.value]=e.value)}return{status:a.value,value:c}}}let e$=Object.freeze({status:"aborted"}),e_=a=>({status:"dirty",value:a}),e0=a=>({status:"valid",value:a}),e1=a=>"undefined"!=typeof Promise&&a instanceof Promise;!function(a){a.errToObj=a=>"string"==typeof a?{message:a}:a||{},a.toString=a=>"string"==typeof a?a:a?.message}(l||(l={}));class e2{constructor(a,b,c,d){this._cachedPath=[],this.parent=a,this.data=b,this._path=c,this._key=d}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}let e3=(a,b)=>{if("valid"===b.status)return{success:!0,data:b.value};if(!a.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let b=new eV(a.common.issues);return this._error=b,this._error}}};function e4(a){if(!a)return{};let{errorMap:b,invalid_type_error:c,required_error:d,description:e}=a;if(b&&(c||d))throw Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return b?{errorMap:b,description:e}:{errorMap:(b,e)=>{let{message:f}=a;return"invalid_enum_value"===b.code?{message:f??e.defaultError}:void 0===e.data?{message:f??d??e.defaultError}:"invalid_type"!==b.code?{message:e.defaultError}:{message:f??c??e.defaultError}},description:e}}class e5{get description(){return this._def.description}_getType(a){return eT(a.data)}_getOrReturnCtx(a,b){return b||{common:a.parent.common,data:a.data,parsedType:eT(a.data),schemaErrorMap:this._def.errorMap,path:a.path,parent:a.parent}}_processInputParams(a){return{status:new eZ,ctx:{common:a.parent.common,data:a.data,parsedType:eT(a.data),schemaErrorMap:this._def.errorMap,path:a.path,parent:a.parent}}}_parseSync(a){let b=this._parse(a);if(e1(b))throw Error("Synchronous parse encountered promise.");return b}_parseAsync(a){return Promise.resolve(this._parse(a))}parse(a,b){let c=this.safeParse(a,b);if(c.success)return c.data;throw c.error}safeParse(a,b){let c={common:{issues:[],async:b?.async??!1,contextualErrorMap:b?.errorMap},path:b?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:a,parsedType:eT(a)},d=this._parseSync({data:a,path:c.path,parent:c});return e3(c,d)}"~validate"(a){let b={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:a,parsedType:eT(a)};if(!this["~standard"].async)try{let c=this._parseSync({data:a,path:[],parent:b});return"valid"===c.status?{value:c.value}:{issues:b.common.issues}}catch(a){a?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),b.common={issues:[],async:!0}}return this._parseAsync({data:a,path:[],parent:b}).then(a=>"valid"===a.status?{value:a.value}:{issues:b.common.issues})}async parseAsync(a,b){let c=await this.safeParseAsync(a,b);if(c.success)return c.data;throw c.error}async safeParseAsync(a,b){let c={common:{issues:[],contextualErrorMap:b?.errorMap,async:!0},path:b?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:a,parsedType:eT(a)},d=this._parse({data:a,path:c.path,parent:c});return e3(c,await (e1(d)?d:Promise.resolve(d)))}refine(a,b){return this._refinement((c,d)=>{let e=a(c),f=()=>d.addIssue({code:eU.custom,..."string"==typeof b||void 0===b?{message:b}:"function"==typeof b?b(c):b});return"undefined"!=typeof Promise&&e instanceof Promise?e.then(a=>!!a||(f(),!1)):!!e||(f(),!1)})}refinement(a,b){return this._refinement((c,d)=>!!a(c)||(d.addIssue("function"==typeof b?b(c,d):b),!1))}_refinement(a){return new fQ({schema:this,typeName:m.ZodEffects,effect:{type:"refinement",refinement:a}})}superRefine(a){return this._refinement(a)}constructor(a){this.spa=this.safeParseAsync,this._def=a,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:a=>this["~validate"](a)}}optional(){return fR.create(this,this._def)}nullable(){return fS.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return fz.create(this)}promise(){return fP.create(this,this._def)}or(a){return fB.create([this,a],this._def)}and(a){return fE.create(this,a,this._def)}transform(a){return new fQ({...e4(this._def),schema:this,typeName:m.ZodEffects,effect:{type:"transform",transform:a}})}default(a){return new fT({...e4(this._def),innerType:this,defaultValue:"function"==typeof a?a:()=>a,typeName:m.ZodDefault})}brand(){return new fW({typeName:m.ZodBranded,type:this,...e4(this._def)})}catch(a){return new fU({...e4(this._def),innerType:this,catchValue:"function"==typeof a?a:()=>a,typeName:m.ZodCatch})}describe(a){return new this.constructor({...this._def,description:a})}pipe(a){return fX.create(this,a)}readonly(){return fY.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}let e6=/^c[^\s-]{8,}$/i,e7=/^[0-9a-z]+$/,e8=/^[0-9A-HJKMNP-TV-Z]{26}$/i,e9=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,fa=/^[a-z0-9_-]{21}$/i,fb=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,fc=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,fd=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,fe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ff=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,fg=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,fh=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,fi=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,fj=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,fk="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",fl=RegExp(`^${fk}$`);function fm(a){let b="[0-5]\\d";a.precision?b=`${b}\\.\\d{${a.precision}}`:null==a.precision&&(b=`${b}(\\.\\d+)?`);let c=a.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${b})${c}`}class fn extends e5{_parse(a){var b,c,e,f;let g;if(this._def.coerce&&(a.data=String(a.data)),this._getType(a)!==eS.string){let b=this._getOrReturnCtx(a);return eY(b,{code:eU.invalid_type,expected:eS.string,received:b.parsedType}),e$}let h=new eZ;for(let i of this._def.checks)if("min"===i.kind)a.data.length<i.value&&(eY(g=this._getOrReturnCtx(a,g),{code:eU.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),h.dirty());else if("max"===i.kind)a.data.length>i.value&&(eY(g=this._getOrReturnCtx(a,g),{code:eU.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),h.dirty());else if("length"===i.kind){let b=a.data.length>i.value,c=a.data.length<i.value;(b||c)&&(g=this._getOrReturnCtx(a,g),b?eY(g,{code:eU.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):c&&eY(g,{code:eU.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),h.dirty())}else if("email"===i.kind)fd.test(a.data)||(eY(g=this._getOrReturnCtx(a,g),{validation:"email",code:eU.invalid_string,message:i.message}),h.dirty());else if("emoji"===i.kind)d||(d=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),d.test(a.data)||(eY(g=this._getOrReturnCtx(a,g),{validation:"emoji",code:eU.invalid_string,message:i.message}),h.dirty());else if("uuid"===i.kind)e9.test(a.data)||(eY(g=this._getOrReturnCtx(a,g),{validation:"uuid",code:eU.invalid_string,message:i.message}),h.dirty());else if("nanoid"===i.kind)fa.test(a.data)||(eY(g=this._getOrReturnCtx(a,g),{validation:"nanoid",code:eU.invalid_string,message:i.message}),h.dirty());else if("cuid"===i.kind)e6.test(a.data)||(eY(g=this._getOrReturnCtx(a,g),{validation:"cuid",code:eU.invalid_string,message:i.message}),h.dirty());else if("cuid2"===i.kind)e7.test(a.data)||(eY(g=this._getOrReturnCtx(a,g),{validation:"cuid2",code:eU.invalid_string,message:i.message}),h.dirty());else if("ulid"===i.kind)e8.test(a.data)||(eY(g=this._getOrReturnCtx(a,g),{validation:"ulid",code:eU.invalid_string,message:i.message}),h.dirty());else if("url"===i.kind)try{new URL(a.data)}catch{eY(g=this._getOrReturnCtx(a,g),{validation:"url",code:eU.invalid_string,message:i.message}),h.dirty()}else"regex"===i.kind?(i.regex.lastIndex=0,i.regex.test(a.data)||(eY(g=this._getOrReturnCtx(a,g),{validation:"regex",code:eU.invalid_string,message:i.message}),h.dirty())):"trim"===i.kind?a.data=a.data.trim():"includes"===i.kind?a.data.includes(i.value,i.position)||(eY(g=this._getOrReturnCtx(a,g),{code:eU.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),h.dirty()):"toLowerCase"===i.kind?a.data=a.data.toLowerCase():"toUpperCase"===i.kind?a.data=a.data.toUpperCase():"startsWith"===i.kind?a.data.startsWith(i.value)||(eY(g=this._getOrReturnCtx(a,g),{code:eU.invalid_string,validation:{startsWith:i.value},message:i.message}),h.dirty()):"endsWith"===i.kind?a.data.endsWith(i.value)||(eY(g=this._getOrReturnCtx(a,g),{code:eU.invalid_string,validation:{endsWith:i.value},message:i.message}),h.dirty()):"datetime"===i.kind?(function(a){let b=`${fk}T${fm(a)}`,c=[];return c.push(a.local?"Z?":"Z"),a.offset&&c.push("([+-]\\d{2}:?\\d{2})"),b=`${b}(${c.join("|")})`,RegExp(`^${b}$`)})(i).test(a.data)||(eY(g=this._getOrReturnCtx(a,g),{code:eU.invalid_string,validation:"datetime",message:i.message}),h.dirty()):"date"===i.kind?fl.test(a.data)||(eY(g=this._getOrReturnCtx(a,g),{code:eU.invalid_string,validation:"date",message:i.message}),h.dirty()):"time"===i.kind?RegExp(`^${fm(i)}$`).test(a.data)||(eY(g=this._getOrReturnCtx(a,g),{code:eU.invalid_string,validation:"time",message:i.message}),h.dirty()):"duration"===i.kind?fc.test(a.data)||(eY(g=this._getOrReturnCtx(a,g),{validation:"duration",code:eU.invalid_string,message:i.message}),h.dirty()):"ip"===i.kind?(b=a.data,!(("v4"===(c=i.version)||!c)&&fe.test(b)||("v6"===c||!c)&&fg.test(b))&&1&&(eY(g=this._getOrReturnCtx(a,g),{validation:"ip",code:eU.invalid_string,message:i.message}),h.dirty())):"jwt"===i.kind?!function(a,b){if(!fb.test(a))return!1;try{let[c]=a.split(".");if(!c)return!1;let d=c.replace(/-/g,"+").replace(/_/g,"/").padEnd(c.length+(4-c.length%4)%4,"="),e=JSON.parse(atob(d));if("object"!=typeof e||null===e||"typ"in e&&e?.typ!=="JWT"||!e.alg||b&&e.alg!==b)return!1;return!0}catch{return!1}}(a.data,i.alg)&&(eY(g=this._getOrReturnCtx(a,g),{validation:"jwt",code:eU.invalid_string,message:i.message}),h.dirty()):"cidr"===i.kind?(e=a.data,!(("v4"===(f=i.version)||!f)&&ff.test(e)||("v6"===f||!f)&&fh.test(e))&&1&&(eY(g=this._getOrReturnCtx(a,g),{validation:"cidr",code:eU.invalid_string,message:i.message}),h.dirty())):"base64"===i.kind?fi.test(a.data)||(eY(g=this._getOrReturnCtx(a,g),{validation:"base64",code:eU.invalid_string,message:i.message}),h.dirty()):"base64url"===i.kind?fj.test(a.data)||(eY(g=this._getOrReturnCtx(a,g),{validation:"base64url",code:eU.invalid_string,message:i.message}),h.dirty()):j.assertNever(i);return{status:h.value,value:a.data}}_regex(a,b,c){return this.refinement(b=>a.test(b),{validation:b,code:eU.invalid_string,...l.errToObj(c)})}_addCheck(a){return new fn({...this._def,checks:[...this._def.checks,a]})}email(a){return this._addCheck({kind:"email",...l.errToObj(a)})}url(a){return this._addCheck({kind:"url",...l.errToObj(a)})}emoji(a){return this._addCheck({kind:"emoji",...l.errToObj(a)})}uuid(a){return this._addCheck({kind:"uuid",...l.errToObj(a)})}nanoid(a){return this._addCheck({kind:"nanoid",...l.errToObj(a)})}cuid(a){return this._addCheck({kind:"cuid",...l.errToObj(a)})}cuid2(a){return this._addCheck({kind:"cuid2",...l.errToObj(a)})}ulid(a){return this._addCheck({kind:"ulid",...l.errToObj(a)})}base64(a){return this._addCheck({kind:"base64",...l.errToObj(a)})}base64url(a){return this._addCheck({kind:"base64url",...l.errToObj(a)})}jwt(a){return this._addCheck({kind:"jwt",...l.errToObj(a)})}ip(a){return this._addCheck({kind:"ip",...l.errToObj(a)})}cidr(a){return this._addCheck({kind:"cidr",...l.errToObj(a)})}datetime(a){return"string"==typeof a?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:a}):this._addCheck({kind:"datetime",precision:void 0===a?.precision?null:a?.precision,offset:a?.offset??!1,local:a?.local??!1,...l.errToObj(a?.message)})}date(a){return this._addCheck({kind:"date",message:a})}time(a){return"string"==typeof a?this._addCheck({kind:"time",precision:null,message:a}):this._addCheck({kind:"time",precision:void 0===a?.precision?null:a?.precision,...l.errToObj(a?.message)})}duration(a){return this._addCheck({kind:"duration",...l.errToObj(a)})}regex(a,b){return this._addCheck({kind:"regex",regex:a,...l.errToObj(b)})}includes(a,b){return this._addCheck({kind:"includes",value:a,position:b?.position,...l.errToObj(b?.message)})}startsWith(a,b){return this._addCheck({kind:"startsWith",value:a,...l.errToObj(b)})}endsWith(a,b){return this._addCheck({kind:"endsWith",value:a,...l.errToObj(b)})}min(a,b){return this._addCheck({kind:"min",value:a,...l.errToObj(b)})}max(a,b){return this._addCheck({kind:"max",value:a,...l.errToObj(b)})}length(a,b){return this._addCheck({kind:"length",value:a,...l.errToObj(b)})}nonempty(a){return this.min(1,l.errToObj(a))}trim(){return new fn({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new fn({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new fn({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(a=>"datetime"===a.kind)}get isDate(){return!!this._def.checks.find(a=>"date"===a.kind)}get isTime(){return!!this._def.checks.find(a=>"time"===a.kind)}get isDuration(){return!!this._def.checks.find(a=>"duration"===a.kind)}get isEmail(){return!!this._def.checks.find(a=>"email"===a.kind)}get isURL(){return!!this._def.checks.find(a=>"url"===a.kind)}get isEmoji(){return!!this._def.checks.find(a=>"emoji"===a.kind)}get isUUID(){return!!this._def.checks.find(a=>"uuid"===a.kind)}get isNANOID(){return!!this._def.checks.find(a=>"nanoid"===a.kind)}get isCUID(){return!!this._def.checks.find(a=>"cuid"===a.kind)}get isCUID2(){return!!this._def.checks.find(a=>"cuid2"===a.kind)}get isULID(){return!!this._def.checks.find(a=>"ulid"===a.kind)}get isIP(){return!!this._def.checks.find(a=>"ip"===a.kind)}get isCIDR(){return!!this._def.checks.find(a=>"cidr"===a.kind)}get isBase64(){return!!this._def.checks.find(a=>"base64"===a.kind)}get isBase64url(){return!!this._def.checks.find(a=>"base64url"===a.kind)}get minLength(){let a=null;for(let b of this._def.checks)"min"===b.kind&&(null===a||b.value>a)&&(a=b.value);return a}get maxLength(){let a=null;for(let b of this._def.checks)"max"===b.kind&&(null===a||b.value<a)&&(a=b.value);return a}}fn.create=a=>new fn({checks:[],typeName:m.ZodString,coerce:a?.coerce??!1,...e4(a)});class fo extends e5{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(a){let b;if(this._def.coerce&&(a.data=Number(a.data)),this._getType(a)!==eS.number){let b=this._getOrReturnCtx(a);return eY(b,{code:eU.invalid_type,expected:eS.number,received:b.parsedType}),e$}let c=new eZ;for(let d of this._def.checks)"int"===d.kind?j.isInteger(a.data)||(eY(b=this._getOrReturnCtx(a,b),{code:eU.invalid_type,expected:"integer",received:"float",message:d.message}),c.dirty()):"min"===d.kind?(d.inclusive?a.data<d.value:a.data<=d.value)&&(eY(b=this._getOrReturnCtx(a,b),{code:eU.too_small,minimum:d.value,type:"number",inclusive:d.inclusive,exact:!1,message:d.message}),c.dirty()):"max"===d.kind?(d.inclusive?a.data>d.value:a.data>=d.value)&&(eY(b=this._getOrReturnCtx(a,b),{code:eU.too_big,maximum:d.value,type:"number",inclusive:d.inclusive,exact:!1,message:d.message}),c.dirty()):"multipleOf"===d.kind?0!==function(a,b){let c=(a.toString().split(".")[1]||"").length,d=(b.toString().split(".")[1]||"").length,e=c>d?c:d;return Number.parseInt(a.toFixed(e).replace(".",""))%Number.parseInt(b.toFixed(e).replace(".",""))/10**e}(a.data,d.value)&&(eY(b=this._getOrReturnCtx(a,b),{code:eU.not_multiple_of,multipleOf:d.value,message:d.message}),c.dirty()):"finite"===d.kind?Number.isFinite(a.data)||(eY(b=this._getOrReturnCtx(a,b),{code:eU.not_finite,message:d.message}),c.dirty()):j.assertNever(d);return{status:c.value,value:a.data}}gte(a,b){return this.setLimit("min",a,!0,l.toString(b))}gt(a,b){return this.setLimit("min",a,!1,l.toString(b))}lte(a,b){return this.setLimit("max",a,!0,l.toString(b))}lt(a,b){return this.setLimit("max",a,!1,l.toString(b))}setLimit(a,b,c,d){return new fo({...this._def,checks:[...this._def.checks,{kind:a,value:b,inclusive:c,message:l.toString(d)}]})}_addCheck(a){return new fo({...this._def,checks:[...this._def.checks,a]})}int(a){return this._addCheck({kind:"int",message:l.toString(a)})}positive(a){return this._addCheck({kind:"min",value:0,inclusive:!1,message:l.toString(a)})}negative(a){return this._addCheck({kind:"max",value:0,inclusive:!1,message:l.toString(a)})}nonpositive(a){return this._addCheck({kind:"max",value:0,inclusive:!0,message:l.toString(a)})}nonnegative(a){return this._addCheck({kind:"min",value:0,inclusive:!0,message:l.toString(a)})}multipleOf(a,b){return this._addCheck({kind:"multipleOf",value:a,message:l.toString(b)})}finite(a){return this._addCheck({kind:"finite",message:l.toString(a)})}safe(a){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:l.toString(a)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:l.toString(a)})}get minValue(){let a=null;for(let b of this._def.checks)"min"===b.kind&&(null===a||b.value>a)&&(a=b.value);return a}get maxValue(){let a=null;for(let b of this._def.checks)"max"===b.kind&&(null===a||b.value<a)&&(a=b.value);return a}get isInt(){return!!this._def.checks.find(a=>"int"===a.kind||"multipleOf"===a.kind&&j.isInteger(a.value))}get isFinite(){let a=null,b=null;for(let c of this._def.checks)if("finite"===c.kind||"int"===c.kind||"multipleOf"===c.kind)return!0;else"min"===c.kind?(null===b||c.value>b)&&(b=c.value):"max"===c.kind&&(null===a||c.value<a)&&(a=c.value);return Number.isFinite(b)&&Number.isFinite(a)}}fo.create=a=>new fo({checks:[],typeName:m.ZodNumber,coerce:a?.coerce||!1,...e4(a)});class fp extends e5{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(a){let b;if(this._def.coerce)try{a.data=BigInt(a.data)}catch{return this._getInvalidInput(a)}if(this._getType(a)!==eS.bigint)return this._getInvalidInput(a);let c=new eZ;for(let d of this._def.checks)"min"===d.kind?(d.inclusive?a.data<d.value:a.data<=d.value)&&(eY(b=this._getOrReturnCtx(a,b),{code:eU.too_small,type:"bigint",minimum:d.value,inclusive:d.inclusive,message:d.message}),c.dirty()):"max"===d.kind?(d.inclusive?a.data>d.value:a.data>=d.value)&&(eY(b=this._getOrReturnCtx(a,b),{code:eU.too_big,type:"bigint",maximum:d.value,inclusive:d.inclusive,message:d.message}),c.dirty()):"multipleOf"===d.kind?a.data%d.value!==BigInt(0)&&(eY(b=this._getOrReturnCtx(a,b),{code:eU.not_multiple_of,multipleOf:d.value,message:d.message}),c.dirty()):j.assertNever(d);return{status:c.value,value:a.data}}_getInvalidInput(a){let b=this._getOrReturnCtx(a);return eY(b,{code:eU.invalid_type,expected:eS.bigint,received:b.parsedType}),e$}gte(a,b){return this.setLimit("min",a,!0,l.toString(b))}gt(a,b){return this.setLimit("min",a,!1,l.toString(b))}lte(a,b){return this.setLimit("max",a,!0,l.toString(b))}lt(a,b){return this.setLimit("max",a,!1,l.toString(b))}setLimit(a,b,c,d){return new fp({...this._def,checks:[...this._def.checks,{kind:a,value:b,inclusive:c,message:l.toString(d)}]})}_addCheck(a){return new fp({...this._def,checks:[...this._def.checks,a]})}positive(a){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:l.toString(a)})}negative(a){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:l.toString(a)})}nonpositive(a){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:l.toString(a)})}nonnegative(a){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:l.toString(a)})}multipleOf(a,b){return this._addCheck({kind:"multipleOf",value:a,message:l.toString(b)})}get minValue(){let a=null;for(let b of this._def.checks)"min"===b.kind&&(null===a||b.value>a)&&(a=b.value);return a}get maxValue(){let a=null;for(let b of this._def.checks)"max"===b.kind&&(null===a||b.value<a)&&(a=b.value);return a}}fp.create=a=>new fp({checks:[],typeName:m.ZodBigInt,coerce:a?.coerce??!1,...e4(a)});class fq extends e5{_parse(a){if(this._def.coerce&&(a.data=!!a.data),this._getType(a)!==eS.boolean){let b=this._getOrReturnCtx(a);return eY(b,{code:eU.invalid_type,expected:eS.boolean,received:b.parsedType}),e$}return e0(a.data)}}fq.create=a=>new fq({typeName:m.ZodBoolean,coerce:a?.coerce||!1,...e4(a)});class fr extends e5{_parse(a){let b;if(this._def.coerce&&(a.data=new Date(a.data)),this._getType(a)!==eS.date){let b=this._getOrReturnCtx(a);return eY(b,{code:eU.invalid_type,expected:eS.date,received:b.parsedType}),e$}if(Number.isNaN(a.data.getTime()))return eY(this._getOrReturnCtx(a),{code:eU.invalid_date}),e$;let c=new eZ;for(let d of this._def.checks)"min"===d.kind?a.data.getTime()<d.value&&(eY(b=this._getOrReturnCtx(a,b),{code:eU.too_small,message:d.message,inclusive:!0,exact:!1,minimum:d.value,type:"date"}),c.dirty()):"max"===d.kind?a.data.getTime()>d.value&&(eY(b=this._getOrReturnCtx(a,b),{code:eU.too_big,message:d.message,inclusive:!0,exact:!1,maximum:d.value,type:"date"}),c.dirty()):j.assertNever(d);return{status:c.value,value:new Date(a.data.getTime())}}_addCheck(a){return new fr({...this._def,checks:[...this._def.checks,a]})}min(a,b){return this._addCheck({kind:"min",value:a.getTime(),message:l.toString(b)})}max(a,b){return this._addCheck({kind:"max",value:a.getTime(),message:l.toString(b)})}get minDate(){let a=null;for(let b of this._def.checks)"min"===b.kind&&(null===a||b.value>a)&&(a=b.value);return null!=a?new Date(a):null}get maxDate(){let a=null;for(let b of this._def.checks)"max"===b.kind&&(null===a||b.value<a)&&(a=b.value);return null!=a?new Date(a):null}}fr.create=a=>new fr({checks:[],coerce:a?.coerce||!1,typeName:m.ZodDate,...e4(a)});class fs extends e5{_parse(a){if(this._getType(a)!==eS.symbol){let b=this._getOrReturnCtx(a);return eY(b,{code:eU.invalid_type,expected:eS.symbol,received:b.parsedType}),e$}return e0(a.data)}}fs.create=a=>new fs({typeName:m.ZodSymbol,...e4(a)});class ft extends e5{_parse(a){if(this._getType(a)!==eS.undefined){let b=this._getOrReturnCtx(a);return eY(b,{code:eU.invalid_type,expected:eS.undefined,received:b.parsedType}),e$}return e0(a.data)}}ft.create=a=>new ft({typeName:m.ZodUndefined,...e4(a)});class fu extends e5{_parse(a){if(this._getType(a)!==eS.null){let b=this._getOrReturnCtx(a);return eY(b,{code:eU.invalid_type,expected:eS.null,received:b.parsedType}),e$}return e0(a.data)}}fu.create=a=>new fu({typeName:m.ZodNull,...e4(a)});class fv extends e5{constructor(){super(...arguments),this._any=!0}_parse(a){return e0(a.data)}}fv.create=a=>new fv({typeName:m.ZodAny,...e4(a)});class fw extends e5{constructor(){super(...arguments),this._unknown=!0}_parse(a){return e0(a.data)}}fw.create=a=>new fw({typeName:m.ZodUnknown,...e4(a)});class fx extends e5{_parse(a){let b=this._getOrReturnCtx(a);return eY(b,{code:eU.invalid_type,expected:eS.never,received:b.parsedType}),e$}}fx.create=a=>new fx({typeName:m.ZodNever,...e4(a)});class fy extends e5{_parse(a){if(this._getType(a)!==eS.undefined){let b=this._getOrReturnCtx(a);return eY(b,{code:eU.invalid_type,expected:eS.void,received:b.parsedType}),e$}return e0(a.data)}}fy.create=a=>new fy({typeName:m.ZodVoid,...e4(a)});class fz extends e5{_parse(a){let{ctx:b,status:c}=this._processInputParams(a),d=this._def;if(b.parsedType!==eS.array)return eY(b,{code:eU.invalid_type,expected:eS.array,received:b.parsedType}),e$;if(null!==d.exactLength){let a=b.data.length>d.exactLength.value,e=b.data.length<d.exactLength.value;(a||e)&&(eY(b,{code:a?eU.too_big:eU.too_small,minimum:e?d.exactLength.value:void 0,maximum:a?d.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:d.exactLength.message}),c.dirty())}if(null!==d.minLength&&b.data.length<d.minLength.value&&(eY(b,{code:eU.too_small,minimum:d.minLength.value,type:"array",inclusive:!0,exact:!1,message:d.minLength.message}),c.dirty()),null!==d.maxLength&&b.data.length>d.maxLength.value&&(eY(b,{code:eU.too_big,maximum:d.maxLength.value,type:"array",inclusive:!0,exact:!1,message:d.maxLength.message}),c.dirty()),b.common.async)return Promise.all([...b.data].map((a,c)=>d.type._parseAsync(new e2(b,a,b.path,c)))).then(a=>eZ.mergeArray(c,a));let e=[...b.data].map((a,c)=>d.type._parseSync(new e2(b,a,b.path,c)));return eZ.mergeArray(c,e)}get element(){return this._def.type}min(a,b){return new fz({...this._def,minLength:{value:a,message:l.toString(b)}})}max(a,b){return new fz({...this._def,maxLength:{value:a,message:l.toString(b)}})}length(a,b){return new fz({...this._def,exactLength:{value:a,message:l.toString(b)}})}nonempty(a){return this.min(1,a)}}fz.create=(a,b)=>new fz({type:a,minLength:null,maxLength:null,exactLength:null,typeName:m.ZodArray,...e4(b)});class fA extends e5{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;let a=this._def.shape(),b=j.objectKeys(a);return this._cached={shape:a,keys:b},this._cached}_parse(a){if(this._getType(a)!==eS.object){let b=this._getOrReturnCtx(a);return eY(b,{code:eU.invalid_type,expected:eS.object,received:b.parsedType}),e$}let{status:b,ctx:c}=this._processInputParams(a),{shape:d,keys:e}=this._getCached(),f=[];if(!(this._def.catchall instanceof fx&&"strip"===this._def.unknownKeys))for(let a in c.data)e.includes(a)||f.push(a);let g=[];for(let a of e){let b=d[a],e=c.data[a];g.push({key:{status:"valid",value:a},value:b._parse(new e2(c,e,c.path,a)),alwaysSet:a in c.data})}if(this._def.catchall instanceof fx){let a=this._def.unknownKeys;if("passthrough"===a)for(let a of f)g.push({key:{status:"valid",value:a},value:{status:"valid",value:c.data[a]}});else if("strict"===a)f.length>0&&(eY(c,{code:eU.unrecognized_keys,keys:f}),b.dirty());else if("strip"===a);else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let a=this._def.catchall;for(let b of f){let d=c.data[b];g.push({key:{status:"valid",value:b},value:a._parse(new e2(c,d,c.path,b)),alwaysSet:b in c.data})}}return c.common.async?Promise.resolve().then(async()=>{let a=[];for(let b of g){let c=await b.key,d=await b.value;a.push({key:c,value:d,alwaysSet:b.alwaysSet})}return a}).then(a=>eZ.mergeObjectSync(b,a)):eZ.mergeObjectSync(b,g)}get shape(){return this._def.shape()}strict(a){return l.errToObj,new fA({...this._def,unknownKeys:"strict",...void 0!==a?{errorMap:(b,c)=>{let d=this._def.errorMap?.(b,c).message??c.defaultError;return"unrecognized_keys"===b.code?{message:l.errToObj(a).message??d}:{message:d}}}:{}})}strip(){return new fA({...this._def,unknownKeys:"strip"})}passthrough(){return new fA({...this._def,unknownKeys:"passthrough"})}extend(a){return new fA({...this._def,shape:()=>({...this._def.shape(),...a})})}merge(a){return new fA({unknownKeys:a._def.unknownKeys,catchall:a._def.catchall,shape:()=>({...this._def.shape(),...a._def.shape()}),typeName:m.ZodObject})}setKey(a,b){return this.augment({[a]:b})}catchall(a){return new fA({...this._def,catchall:a})}pick(a){let b={};for(let c of j.objectKeys(a))a[c]&&this.shape[c]&&(b[c]=this.shape[c]);return new fA({...this._def,shape:()=>b})}omit(a){let b={};for(let c of j.objectKeys(this.shape))a[c]||(b[c]=this.shape[c]);return new fA({...this._def,shape:()=>b})}deepPartial(){return function a(b){if(b instanceof fA){let c={};for(let d in b.shape){let e=b.shape[d];c[d]=fR.create(a(e))}return new fA({...b._def,shape:()=>c})}if(b instanceof fz)return new fz({...b._def,type:a(b.element)});if(b instanceof fR)return fR.create(a(b.unwrap()));if(b instanceof fS)return fS.create(a(b.unwrap()));if(b instanceof fF)return fF.create(b.items.map(b=>a(b)));else return b}(this)}partial(a){let b={};for(let c of j.objectKeys(this.shape)){let d=this.shape[c];a&&!a[c]?b[c]=d:b[c]=d.optional()}return new fA({...this._def,shape:()=>b})}required(a){let b={};for(let c of j.objectKeys(this.shape))if(a&&!a[c])b[c]=this.shape[c];else{let a=this.shape[c];for(;a instanceof fR;)a=a._def.innerType;b[c]=a}return new fA({...this._def,shape:()=>b})}keyof(){return fM(j.objectKeys(this.shape))}}fA.create=(a,b)=>new fA({shape:()=>a,unknownKeys:"strip",catchall:fx.create(),typeName:m.ZodObject,...e4(b)}),fA.strictCreate=(a,b)=>new fA({shape:()=>a,unknownKeys:"strict",catchall:fx.create(),typeName:m.ZodObject,...e4(b)}),fA.lazycreate=(a,b)=>new fA({shape:a,unknownKeys:"strip",catchall:fx.create(),typeName:m.ZodObject,...e4(b)});class fB extends e5{_parse(a){let{ctx:b}=this._processInputParams(a),c=this._def.options;if(b.common.async)return Promise.all(c.map(async a=>{let c={...b,common:{...b.common,issues:[]},parent:null};return{result:await a._parseAsync({data:b.data,path:b.path,parent:c}),ctx:c}})).then(function(a){for(let b of a)if("valid"===b.result.status)return b.result;for(let c of a)if("dirty"===c.result.status)return b.common.issues.push(...c.ctx.common.issues),c.result;let c=a.map(a=>new eV(a.ctx.common.issues));return eY(b,{code:eU.invalid_union,unionErrors:c}),e$});{let a,d=[];for(let e of c){let c={...b,common:{...b.common,issues:[]},parent:null},f=e._parseSync({data:b.data,path:b.path,parent:c});if("valid"===f.status)return f;"dirty"!==f.status||a||(a={result:f,ctx:c}),c.common.issues.length&&d.push(c.common.issues)}if(a)return b.common.issues.push(...a.ctx.common.issues),a.result;let e=d.map(a=>new eV(a));return eY(b,{code:eU.invalid_union,unionErrors:e}),e$}}get options(){return this._def.options}}fB.create=(a,b)=>new fB({options:a,typeName:m.ZodUnion,...e4(b)});let fC=a=>{if(a instanceof fK)return fC(a.schema);if(a instanceof fQ)return fC(a.innerType());if(a instanceof fL)return[a.value];if(a instanceof fN)return a.options;if(a instanceof fO)return j.objectValues(a.enum);else if(a instanceof fT)return fC(a._def.innerType);else if(a instanceof ft)return[void 0];else if(a instanceof fu)return[null];else if(a instanceof fR)return[void 0,...fC(a.unwrap())];else if(a instanceof fS)return[null,...fC(a.unwrap())];else if(a instanceof fW)return fC(a.unwrap());else if(a instanceof fY)return fC(a.unwrap());else if(a instanceof fU)return fC(a._def.innerType);else return[]};class fD extends e5{_parse(a){let{ctx:b}=this._processInputParams(a);if(b.parsedType!==eS.object)return eY(b,{code:eU.invalid_type,expected:eS.object,received:b.parsedType}),e$;let c=this.discriminator,d=b.data[c],e=this.optionsMap.get(d);return e?b.common.async?e._parseAsync({data:b.data,path:b.path,parent:b}):e._parseSync({data:b.data,path:b.path,parent:b}):(eY(b,{code:eU.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[c]}),e$)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(a,b,c){let d=new Map;for(let c of b){let b=fC(c.shape[a]);if(!b.length)throw Error(`A discriminator value for key \`${a}\` could not be extracted from all schema options`);for(let e of b){if(d.has(e))throw Error(`Discriminator property ${String(a)} has duplicate value ${String(e)}`);d.set(e,c)}}return new fD({typeName:m.ZodDiscriminatedUnion,discriminator:a,options:b,optionsMap:d,...e4(c)})}}class fE extends e5{_parse(a){let{status:b,ctx:c}=this._processInputParams(a),d=(a,d)=>{if("aborted"===a.status||"aborted"===d.status)return e$;let e=function a(b,c){let d=eT(b),e=eT(c);if(b===c)return{valid:!0,data:b};if(d===eS.object&&e===eS.object){let d=j.objectKeys(c),e=j.objectKeys(b).filter(a=>-1!==d.indexOf(a)),f={...b,...c};for(let d of e){let e=a(b[d],c[d]);if(!e.valid)return{valid:!1};f[d]=e.data}return{valid:!0,data:f}}if(d===eS.array&&e===eS.array){if(b.length!==c.length)return{valid:!1};let d=[];for(let e=0;e<b.length;e++){let f=a(b[e],c[e]);if(!f.valid)return{valid:!1};d.push(f.data)}return{valid:!0,data:d}}if(d===eS.date&&e===eS.date&&+b==+c)return{valid:!0,data:b};return{valid:!1}}(a.value,d.value);return e.valid?(("dirty"===a.status||"dirty"===d.status)&&b.dirty(),{status:b.value,value:e.data}):(eY(c,{code:eU.invalid_intersection_types}),e$)};return c.common.async?Promise.all([this._def.left._parseAsync({data:c.data,path:c.path,parent:c}),this._def.right._parseAsync({data:c.data,path:c.path,parent:c})]).then(([a,b])=>d(a,b)):d(this._def.left._parseSync({data:c.data,path:c.path,parent:c}),this._def.right._parseSync({data:c.data,path:c.path,parent:c}))}}fE.create=(a,b,c)=>new fE({left:a,right:b,typeName:m.ZodIntersection,...e4(c)});class fF extends e5{_parse(a){let{status:b,ctx:c}=this._processInputParams(a);if(c.parsedType!==eS.array)return eY(c,{code:eU.invalid_type,expected:eS.array,received:c.parsedType}),e$;if(c.data.length<this._def.items.length)return eY(c,{code:eU.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),e$;!this._def.rest&&c.data.length>this._def.items.length&&(eY(c,{code:eU.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),b.dirty());let d=[...c.data].map((a,b)=>{let d=this._def.items[b]||this._def.rest;return d?d._parse(new e2(c,a,c.path,b)):null}).filter(a=>!!a);return c.common.async?Promise.all(d).then(a=>eZ.mergeArray(b,a)):eZ.mergeArray(b,d)}get items(){return this._def.items}rest(a){return new fF({...this._def,rest:a})}}fF.create=(a,b)=>{if(!Array.isArray(a))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new fF({items:a,typeName:m.ZodTuple,rest:null,...e4(b)})};class fG extends e5{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(a){let{status:b,ctx:c}=this._processInputParams(a);if(c.parsedType!==eS.object)return eY(c,{code:eU.invalid_type,expected:eS.object,received:c.parsedType}),e$;let d=[],e=this._def.keyType,f=this._def.valueType;for(let a in c.data)d.push({key:e._parse(new e2(c,a,c.path,a)),value:f._parse(new e2(c,c.data[a],c.path,a)),alwaysSet:a in c.data});return c.common.async?eZ.mergeObjectAsync(b,d):eZ.mergeObjectSync(b,d)}get element(){return this._def.valueType}static create(a,b,c){return new fG(b instanceof e5?{keyType:a,valueType:b,typeName:m.ZodRecord,...e4(c)}:{keyType:fn.create(),valueType:a,typeName:m.ZodRecord,...e4(b)})}}class fH extends e5{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(a){let{status:b,ctx:c}=this._processInputParams(a);if(c.parsedType!==eS.map)return eY(c,{code:eU.invalid_type,expected:eS.map,received:c.parsedType}),e$;let d=this._def.keyType,e=this._def.valueType,f=[...c.data.entries()].map(([a,b],f)=>({key:d._parse(new e2(c,a,c.path,[f,"key"])),value:e._parse(new e2(c,b,c.path,[f,"value"]))}));if(c.common.async){let a=new Map;return Promise.resolve().then(async()=>{for(let c of f){let d=await c.key,e=await c.value;if("aborted"===d.status||"aborted"===e.status)return e$;("dirty"===d.status||"dirty"===e.status)&&b.dirty(),a.set(d.value,e.value)}return{status:b.value,value:a}})}{let a=new Map;for(let c of f){let d=c.key,e=c.value;if("aborted"===d.status||"aborted"===e.status)return e$;("dirty"===d.status||"dirty"===e.status)&&b.dirty(),a.set(d.value,e.value)}return{status:b.value,value:a}}}}fH.create=(a,b,c)=>new fH({valueType:b,keyType:a,typeName:m.ZodMap,...e4(c)});class fI extends e5{_parse(a){let{status:b,ctx:c}=this._processInputParams(a);if(c.parsedType!==eS.set)return eY(c,{code:eU.invalid_type,expected:eS.set,received:c.parsedType}),e$;let d=this._def;null!==d.minSize&&c.data.size<d.minSize.value&&(eY(c,{code:eU.too_small,minimum:d.minSize.value,type:"set",inclusive:!0,exact:!1,message:d.minSize.message}),b.dirty()),null!==d.maxSize&&c.data.size>d.maxSize.value&&(eY(c,{code:eU.too_big,maximum:d.maxSize.value,type:"set",inclusive:!0,exact:!1,message:d.maxSize.message}),b.dirty());let e=this._def.valueType;function f(a){let c=new Set;for(let d of a){if("aborted"===d.status)return e$;"dirty"===d.status&&b.dirty(),c.add(d.value)}return{status:b.value,value:c}}let g=[...c.data.values()].map((a,b)=>e._parse(new e2(c,a,c.path,b)));return c.common.async?Promise.all(g).then(a=>f(a)):f(g)}min(a,b){return new fI({...this._def,minSize:{value:a,message:l.toString(b)}})}max(a,b){return new fI({...this._def,maxSize:{value:a,message:l.toString(b)}})}size(a,b){return this.min(a,b).max(a,b)}nonempty(a){return this.min(1,a)}}fI.create=(a,b)=>new fI({valueType:a,minSize:null,maxSize:null,typeName:m.ZodSet,...e4(b)});class fJ extends e5{constructor(){super(...arguments),this.validate=this.implement}_parse(a){let{ctx:b}=this._processInputParams(a);if(b.parsedType!==eS.function)return eY(b,{code:eU.invalid_type,expected:eS.function,received:b.parsedType}),e$;function c(a,c){return eX({data:a,path:b.path,errorMaps:[b.common.contextualErrorMap,b.schemaErrorMap,eW,eW].filter(a=>!!a),issueData:{code:eU.invalid_arguments,argumentsError:c}})}function d(a,c){return eX({data:a,path:b.path,errorMaps:[b.common.contextualErrorMap,b.schemaErrorMap,eW,eW].filter(a=>!!a),issueData:{code:eU.invalid_return_type,returnTypeError:c}})}let e={errorMap:b.common.contextualErrorMap},f=b.data;if(this._def.returns instanceof fP){let a=this;return e0(async function(...b){let g=new eV([]),h=await a._def.args.parseAsync(b,e).catch(a=>{throw g.addIssue(c(b,a)),g}),i=await Reflect.apply(f,this,h);return await a._def.returns._def.type.parseAsync(i,e).catch(a=>{throw g.addIssue(d(i,a)),g})})}{let a=this;return e0(function(...b){let g=a._def.args.safeParse(b,e);if(!g.success)throw new eV([c(b,g.error)]);let h=Reflect.apply(f,this,g.data),i=a._def.returns.safeParse(h,e);if(!i.success)throw new eV([d(h,i.error)]);return i.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...a){return new fJ({...this._def,args:fF.create(a).rest(fw.create())})}returns(a){return new fJ({...this._def,returns:a})}implement(a){return this.parse(a)}strictImplement(a){return this.parse(a)}static create(a,b,c){return new fJ({args:a||fF.create([]).rest(fw.create()),returns:b||fw.create(),typeName:m.ZodFunction,...e4(c)})}}class fK extends e5{get schema(){return this._def.getter()}_parse(a){let{ctx:b}=this._processInputParams(a);return this._def.getter()._parse({data:b.data,path:b.path,parent:b})}}fK.create=(a,b)=>new fK({getter:a,typeName:m.ZodLazy,...e4(b)});class fL extends e5{_parse(a){if(a.data!==this._def.value){let b=this._getOrReturnCtx(a);return eY(b,{received:b.data,code:eU.invalid_literal,expected:this._def.value}),e$}return{status:"valid",value:a.data}}get value(){return this._def.value}}function fM(a,b){return new fN({values:a,typeName:m.ZodEnum,...e4(b)})}fL.create=(a,b)=>new fL({value:a,typeName:m.ZodLiteral,...e4(b)});class fN extends e5{_parse(a){if("string"!=typeof a.data){let b=this._getOrReturnCtx(a),c=this._def.values;return eY(b,{expected:j.joinValues(c),received:b.parsedType,code:eU.invalid_type}),e$}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(a.data)){let b=this._getOrReturnCtx(a),c=this._def.values;return eY(b,{received:b.data,code:eU.invalid_enum_value,options:c}),e$}return e0(a.data)}get options(){return this._def.values}get enum(){let a={};for(let b of this._def.values)a[b]=b;return a}get Values(){let a={};for(let b of this._def.values)a[b]=b;return a}get Enum(){let a={};for(let b of this._def.values)a[b]=b;return a}extract(a,b=this._def){return fN.create(a,{...this._def,...b})}exclude(a,b=this._def){return fN.create(this.options.filter(b=>!a.includes(b)),{...this._def,...b})}}fN.create=fM;class fO extends e5{_parse(a){let b=j.getValidEnumValues(this._def.values),c=this._getOrReturnCtx(a);if(c.parsedType!==eS.string&&c.parsedType!==eS.number){let a=j.objectValues(b);return eY(c,{expected:j.joinValues(a),received:c.parsedType,code:eU.invalid_type}),e$}if(this._cache||(this._cache=new Set(j.getValidEnumValues(this._def.values))),!this._cache.has(a.data)){let a=j.objectValues(b);return eY(c,{received:c.data,code:eU.invalid_enum_value,options:a}),e$}return e0(a.data)}get enum(){return this._def.values}}fO.create=(a,b)=>new fO({values:a,typeName:m.ZodNativeEnum,...e4(b)});class fP extends e5{unwrap(){return this._def.type}_parse(a){let{ctx:b}=this._processInputParams(a);return b.parsedType!==eS.promise&&!1===b.common.async?(eY(b,{code:eU.invalid_type,expected:eS.promise,received:b.parsedType}),e$):e0((b.parsedType===eS.promise?b.data:Promise.resolve(b.data)).then(a=>this._def.type.parseAsync(a,{path:b.path,errorMap:b.common.contextualErrorMap})))}}fP.create=(a,b)=>new fP({type:a,typeName:m.ZodPromise,...e4(b)});class fQ extends e5{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===m.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(a){let{status:b,ctx:c}=this._processInputParams(a),d=this._def.effect||null,e={addIssue:a=>{eY(c,a),a.fatal?b.abort():b.dirty()},get path(){return c.path}};if(e.addIssue=e.addIssue.bind(e),"preprocess"===d.type){let a=d.transform(c.data,e);if(c.common.async)return Promise.resolve(a).then(async a=>{if("aborted"===b.value)return e$;let d=await this._def.schema._parseAsync({data:a,path:c.path,parent:c});return"aborted"===d.status?e$:"dirty"===d.status||"dirty"===b.value?e_(d.value):d});{if("aborted"===b.value)return e$;let d=this._def.schema._parseSync({data:a,path:c.path,parent:c});return"aborted"===d.status?e$:"dirty"===d.status||"dirty"===b.value?e_(d.value):d}}if("refinement"===d.type){let a=a=>{let b=d.refinement(a,e);if(c.common.async)return Promise.resolve(b);if(b instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(!1!==c.common.async)return this._def.schema._parseAsync({data:c.data,path:c.path,parent:c}).then(c=>"aborted"===c.status?e$:("dirty"===c.status&&b.dirty(),a(c.value).then(()=>({status:b.value,value:c.value}))));{let d=this._def.schema._parseSync({data:c.data,path:c.path,parent:c});return"aborted"===d.status?e$:("dirty"===d.status&&b.dirty(),a(d.value),{status:b.value,value:d.value})}}if("transform"===d.type)if(!1!==c.common.async)return this._def.schema._parseAsync({data:c.data,path:c.path,parent:c}).then(a=>"valid"!==a.status?e$:Promise.resolve(d.transform(a.value,e)).then(a=>({status:b.value,value:a})));else{let a=this._def.schema._parseSync({data:c.data,path:c.path,parent:c});if("valid"!==a.status)return e$;let f=d.transform(a.value,e);if(f instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:b.value,value:f}}j.assertNever(d)}}fQ.create=(a,b,c)=>new fQ({schema:a,typeName:m.ZodEffects,effect:b,...e4(c)}),fQ.createWithPreprocess=(a,b,c)=>new fQ({schema:b,effect:{type:"preprocess",transform:a},typeName:m.ZodEffects,...e4(c)});class fR extends e5{_parse(a){return this._getType(a)===eS.undefined?e0(void 0):this._def.innerType._parse(a)}unwrap(){return this._def.innerType}}fR.create=(a,b)=>new fR({innerType:a,typeName:m.ZodOptional,...e4(b)});class fS extends e5{_parse(a){return this._getType(a)===eS.null?e0(null):this._def.innerType._parse(a)}unwrap(){return this._def.innerType}}fS.create=(a,b)=>new fS({innerType:a,typeName:m.ZodNullable,...e4(b)});class fT extends e5{_parse(a){let{ctx:b}=this._processInputParams(a),c=b.data;return b.parsedType===eS.undefined&&(c=this._def.defaultValue()),this._def.innerType._parse({data:c,path:b.path,parent:b})}removeDefault(){return this._def.innerType}}fT.create=(a,b)=>new fT({innerType:a,typeName:m.ZodDefault,defaultValue:"function"==typeof b.default?b.default:()=>b.default,...e4(b)});class fU extends e5{_parse(a){let{ctx:b}=this._processInputParams(a),c={...b,common:{...b.common,issues:[]}},d=this._def.innerType._parse({data:c.data,path:c.path,parent:{...c}});return e1(d)?d.then(a=>({status:"valid",value:"valid"===a.status?a.value:this._def.catchValue({get error(){return new eV(c.common.issues)},input:c.data})})):{status:"valid",value:"valid"===d.status?d.value:this._def.catchValue({get error(){return new eV(c.common.issues)},input:c.data})}}removeCatch(){return this._def.innerType}}fU.create=(a,b)=>new fU({innerType:a,typeName:m.ZodCatch,catchValue:"function"==typeof b.catch?b.catch:()=>b.catch,...e4(b)});class fV extends e5{_parse(a){if(this._getType(a)!==eS.nan){let b=this._getOrReturnCtx(a);return eY(b,{code:eU.invalid_type,expected:eS.nan,received:b.parsedType}),e$}return{status:"valid",value:a.data}}}fV.create=a=>new fV({typeName:m.ZodNaN,...e4(a)}),Symbol("zod_brand");class fW extends e5{_parse(a){let{ctx:b}=this._processInputParams(a),c=b.data;return this._def.type._parse({data:c,path:b.path,parent:b})}unwrap(){return this._def.type}}class fX extends e5{_parse(a){let{status:b,ctx:c}=this._processInputParams(a);if(c.common.async)return(async()=>{let a=await this._def.in._parseAsync({data:c.data,path:c.path,parent:c});return"aborted"===a.status?e$:"dirty"===a.status?(b.dirty(),e_(a.value)):this._def.out._parseAsync({data:a.value,path:c.path,parent:c})})();{let a=this._def.in._parseSync({data:c.data,path:c.path,parent:c});return"aborted"===a.status?e$:"dirty"===a.status?(b.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:c.path,parent:c})}}static create(a,b){return new fX({in:a,out:b,typeName:m.ZodPipeline})}}class fY extends e5{_parse(a){let b=this._def.innerType._parse(a),c=a=>("valid"===a.status&&(a.value=Object.freeze(a.value)),a);return e1(b)?b.then(a=>c(a)):c(b)}unwrap(){return this._def.innerType}}function fZ(a=globalThis){var b,c,d;return a.window?"runtime/browser":(null==(b=a.navigator)?void 0:b.userAgent)?`runtime/${a.navigator.userAgent.toLowerCase()}`:(null==(d=null==(c=a.process)?void 0:c.versions)?void 0:d.node)?`runtime/node.js/${a.process.version.substring(0)}`:a.EdgeRuntime?"runtime/vercel-edge":"runtime/unknown"}function f$(a,...b){let c=new Headers(Object.fromEntries(Object.entries(null!=a?a:{}).filter(([a,b])=>null!=b))),d=c.get("user-agent")||"";return c.set("user-agent",[d,...b].filter(Boolean).join(" ")),Object.fromEntries(c)}fY.create=(a,b)=>new fY({innerType:a,typeName:m.ZodReadonly,...e4(b)}),fA.lazycreate,function(a){a.ZodString="ZodString",a.ZodNumber="ZodNumber",a.ZodNaN="ZodNaN",a.ZodBigInt="ZodBigInt",a.ZodBoolean="ZodBoolean",a.ZodDate="ZodDate",a.ZodSymbol="ZodSymbol",a.ZodUndefined="ZodUndefined",a.ZodNull="ZodNull",a.ZodAny="ZodAny",a.ZodUnknown="ZodUnknown",a.ZodNever="ZodNever",a.ZodVoid="ZodVoid",a.ZodArray="ZodArray",a.ZodObject="ZodObject",a.ZodUnion="ZodUnion",a.ZodDiscriminatedUnion="ZodDiscriminatedUnion",a.ZodIntersection="ZodIntersection",a.ZodTuple="ZodTuple",a.ZodRecord="ZodRecord",a.ZodMap="ZodMap",a.ZodSet="ZodSet",a.ZodFunction="ZodFunction",a.ZodLazy="ZodLazy",a.ZodLiteral="ZodLiteral",a.ZodEnum="ZodEnum",a.ZodEffects="ZodEffects",a.ZodNativeEnum="ZodNativeEnum",a.ZodOptional="ZodOptional",a.ZodNullable="ZodNullable",a.ZodDefault="ZodDefault",a.ZodCatch="ZodCatch",a.ZodPromise="ZodPromise",a.ZodBranded="ZodBranded",a.ZodPipeline="ZodPipeline",a.ZodReadonly="ZodReadonly"}(m||(m={})),fn.create,fo.create,fV.create,fp.create,fq.create,fr.create,fs.create,ft.create,fu.create,fv.create,fw.create,fx.create,fy.create,fz.create,fA.create,fA.strictCreate,fB.create,fD.create,fE.create,fF.create,fG.create,fH.create,fI.create,fJ.create,fK.create,fL.create,fN.create,fO.create,fP.create,fQ.create,fR.create,fS.create,fQ.createWithPreprocess,fX.create;var f_=({prefix:a,size:b=16,alphabet:c="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:d="-"}={})=>{let e=()=>{let a=c.length,d=Array(b);for(let e=0;e<b;e++)d[e]=c[Math.random()*a|0];return d.join("")};if(null==a)return e;if(c.includes(d))throw new K({argument:"separator",message:`The separator "${d}" must not be part of the alphabet "${c}".`});return()=>`${a}${d}${e()}`},f0=f_(),f1=/"__proto__"\s*:/,f2=/"constructor"\s*:/,f3=Symbol.for("vercel.ai.validator");async function f4({value:a,schema:b}){let c=await f5({value:a,schema:b});if(!c.success)throw S.wrap({value:a,cause:c.error});return c.value}async function f5({value:a,schema:b}){var c;let d="object"==typeof b&&null!==b&&f3 in b&&!0===b[f3]&&"validate"in b?b:(c=b,{[f3]:!0,validate:async a=>{let b=await c["~standard"].validate(a);return null==b.issues?{success:!0,value:b.value}:{success:!1,error:new S({value:a,cause:b.issues})}}});try{if(null==d.validate)return{success:!0,value:a,rawValue:a};let b=await d.validate(a);if(b.success)return{success:!0,value:b.value,rawValue:a};return{success:!1,error:S.wrap({value:a,cause:b.error}),rawValue:a}}catch(b){return{success:!1,error:S.wrap({value:a,cause:b}),rawValue:a}}}async function f6({text:a,schema:b}){try{let c=function(a){let{stackTraceLimit:b}=Error;Error.stackTraceLimit=0;try{let b=JSON.parse(a);return null===b||"object"!=typeof b||!1===f1.test(a)&&!1===f2.test(a)?b:function(a){let b=[a];for(;b.length;){let a=b;for(let c of(b=[],a)){if(Object.prototype.hasOwnProperty.call(c,"__proto__")||Object.prototype.hasOwnProperty.call(c,"constructor")&&Object.prototype.hasOwnProperty.call(c.constructor,"prototype"))throw SyntaxError("Object contains forbidden prototype property");for(let a in c){let d=c[a];d&&"object"==typeof d&&b.push(d)}}}return a}(b)}finally{Error.stackTraceLimit=b}}(a);if(null==b)return{success:!0,value:c,rawValue:c};return await f5({value:c,schema:b})}catch(b){return{success:!1,error:O.isInstance(b)?b:new O({text:a,cause:b}),rawValue:void 0}}}async function f7(a){return"function"==typeof a&&(a=a()),Promise.resolve(a)}var f8=Symbol("Let zodToJsonSchema decide on which parser to use"),f9={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",strictUnions:!1,definitions:{},errorMessages:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"};function ga(a,b){return gl(a.type._def,b)}var gb=void 0,gc={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(void 0===gb&&(gb=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),gb),ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function gd(a,b){let c={type:"string"};if(a.checks)for(let d of a.checks)switch(d.kind){case"min":c.minLength="number"==typeof c.minLength?Math.max(c.minLength,d.value):d.value;break;case"max":c.maxLength="number"==typeof c.maxLength?Math.min(c.maxLength,d.value):d.value;break;case"email":switch(b.emailStrategy){case"format:email":gg(c,"email",d.message,b);break;case"format:idn-email":gg(c,"idn-email",d.message,b);break;case"pattern:zod":gh(c,gc.email,d.message,b)}break;case"url":gg(c,"uri",d.message,b);break;case"uuid":gg(c,"uuid",d.message,b);break;case"regex":gh(c,d.regex,d.message,b);break;case"cuid":gh(c,gc.cuid,d.message,b);break;case"cuid2":gh(c,gc.cuid2,d.message,b);break;case"startsWith":gh(c,RegExp(`^${ge(d.value,b)}`),d.message,b);break;case"endsWith":gh(c,RegExp(`${ge(d.value,b)}$`),d.message,b);break;case"datetime":gg(c,"date-time",d.message,b);break;case"date":gg(c,"date",d.message,b);break;case"time":gg(c,"time",d.message,b);break;case"duration":gg(c,"duration",d.message,b);break;case"length":c.minLength="number"==typeof c.minLength?Math.max(c.minLength,d.value):d.value,c.maxLength="number"==typeof c.maxLength?Math.min(c.maxLength,d.value):d.value;break;case"includes":gh(c,RegExp(ge(d.value,b)),d.message,b);break;case"ip":"v6"!==d.version&&gg(c,"ipv4",d.message,b),"v4"!==d.version&&gg(c,"ipv6",d.message,b);break;case"base64url":gh(c,gc.base64url,d.message,b);break;case"jwt":gh(c,gc.jwt,d.message,b);break;case"cidr":"v6"!==d.version&&gh(c,gc.ipv4Cidr,d.message,b),"v4"!==d.version&&gh(c,gc.ipv6Cidr,d.message,b);break;case"emoji":gh(c,gc.emoji(),d.message,b);break;case"ulid":gh(c,gc.ulid,d.message,b);break;case"base64":switch(b.base64Strategy){case"format:binary":gg(c,"binary",d.message,b);break;case"contentEncoding:base64":c.contentEncoding="base64";break;case"pattern:zod":gh(c,gc.base64,d.message,b)}break;case"nanoid":gh(c,gc.nanoid,d.message,b)}return c}function ge(a,b){return"escape"===b.patternStrategy?function(a){let b="";for(let c=0;c<a.length;c++)gf.has(a[c])||(b+="\\"),b+=a[c];return b}(a):a}var gf=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function gg(a,b,c,d){var e;a.format||(null==(e=a.anyOf)?void 0:e.some(a=>a.format))?(a.anyOf||(a.anyOf=[]),a.format&&(a.anyOf.push({format:a.format}),delete a.format),a.anyOf.push({format:b,...c&&d.errorMessages&&{errorMessage:{format:c}}})):a.format=b}function gh(a,b,c,d){var e;a.pattern||(null==(e=a.allOf)?void 0:e.some(a=>a.pattern))?(a.allOf||(a.allOf=[]),a.pattern&&(a.allOf.push({pattern:a.pattern}),delete a.pattern),a.allOf.push({pattern:gi(b,d),...c&&d.errorMessages&&{errorMessage:{pattern:c}}})):a.pattern=gi(b,d)}function gi(a,b){var c;if(!b.applyRegexFlags||!a.flags)return a.source;let d={i:a.flags.includes("i"),m:a.flags.includes("m"),s:a.flags.includes("s")},e=d.i?a.source.toLowerCase():a.source,f="",g=!1,h=!1,i=!1;for(let a=0;a<e.length;a++){if(g){f+=e[a],g=!1;continue}if(d.i){if(h){if(e[a].match(/[a-z]/)){i?(f+=e[a],f+=`${e[a-2]}-${e[a]}`.toUpperCase(),i=!1):"-"===e[a+1]&&(null==(c=e[a+2])?void 0:c.match(/[a-z]/))?(f+=e[a],i=!0):f+=`${e[a]}${e[a].toUpperCase()}`;continue}}else if(e[a].match(/[a-z]/)){f+=`[${e[a]}${e[a].toUpperCase()}]`;continue}}if(d.m){if("^"===e[a]){f+=`(^|(?<=[\r
]))`;continue}else if("$"===e[a]){f+=`($|(?=[\r
]))`;continue}}if(d.s&&"."===e[a]){f+=h?`${e[a]}\r
`:`[${e[a]}\r
]`;continue}f+=e[a],"\\"===e[a]?g=!0:h&&"]"===e[a]?h=!1:h||"["!==e[a]||(h=!0)}try{new RegExp(f)}catch(c){return console.warn(`Could not convert regex pattern at ${b.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),a.source}return f}function gj(a,b){var c,d,e,f,g,h;let i={type:"object",additionalProperties:null!=(c=gl(a.valueType._def,{...b,currentPath:[...b.currentPath,"additionalProperties"]}))?c:b.allowedAdditionalProperties};if((null==(d=a.keyType)?void 0:d._def.typeName)===m.ZodString&&(null==(e=a.keyType._def.checks)?void 0:e.length)){let{type:c,...d}=gd(a.keyType._def,b);return{...i,propertyNames:d}}if((null==(f=a.keyType)?void 0:f._def.typeName)===m.ZodEnum)return{...i,propertyNames:{enum:a.keyType._def.values}};if((null==(g=a.keyType)?void 0:g._def.typeName)===m.ZodBranded&&a.keyType._def.type._def.typeName===m.ZodString&&(null==(h=a.keyType._def.type._def.checks)?void 0:h.length)){let{type:c,...d}=ga(a.keyType._def,b);return{...i,propertyNames:d}}return i}var gk={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function gl(a,b,c=!1){var d;let e=b.seen.get(a);if(b.override){let f=null==(d=b.override)?void 0:d.call(b,a,b,e,c);if(f!==f8)return f}if(e&&!c){let a=gm(e,b);if(void 0!==a)return a}let f={def:a,path:b.currentPath,jsonSchema:void 0};b.seen.set(a,f);let g=((a,b,c)=>{switch(b){case m.ZodString:return gd(a,c);case m.ZodNumber:var d,e,f,g,h,i,j=a;let k={type:"number"};if(!j.checks)return k;for(let a of j.checks)switch(a.kind){case"int":k.type="integer";break;case"min":a.inclusive?k.minimum=a.value:k.exclusiveMinimum=a.value;break;case"max":a.inclusive?k.maximum=a.value:k.exclusiveMaximum=a.value;break;case"multipleOf":k.multipleOf=a.value}return k;case m.ZodObject:return function(a,b){let c={type:"object",properties:{}},d=[],e=a.shape();for(let a in e){let f=e[a];if(void 0===f||void 0===f._def)continue;let g=function(a){try{return a.isOptional()}catch(a){return!0}}(f),h=gl(f._def,{...b,currentPath:[...b.currentPath,"properties",a],propertyPath:[...b.currentPath,"properties",a]});void 0!==h&&(c.properties[a]=h,g||d.push(a))}d.length&&(c.required=d);let f=function(a,b){if("ZodNever"!==a.catchall._def.typeName)return gl(a.catchall._def,{...b,currentPath:[...b.currentPath,"additionalProperties"]});switch(a.unknownKeys){case"passthrough":return b.allowedAdditionalProperties;case"strict":return b.rejectedAdditionalProperties;case"strip":return"strict"===b.removeAdditionalStrategy?b.allowedAdditionalProperties:b.rejectedAdditionalProperties}}(a,b);return void 0!==f&&(c.additionalProperties=f),c}(a,c);case m.ZodBigInt:var l=a;let n={type:"integer",format:"int64"};if(!l.checks)return n;for(let a of l.checks)switch(a.kind){case"min":a.inclusive?n.minimum=a.value:n.exclusiveMinimum=a.value;break;case"max":a.inclusive?n.maximum=a.value:n.exclusiveMaximum=a.value;break;case"multipleOf":n.multipleOf=a.value}return n;case m.ZodBoolean:return{type:"boolean"};case m.ZodDate:return function a(b,c,d){let e=null!=d?d:c.dateStrategy;if(Array.isArray(e))return{anyOf:e.map((d,e)=>a(b,c,d))};switch(e){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":var f=b;let g={type:"integer",format:"unix-time"};for(let a of f.checks)switch(a.kind){case"min":g.minimum=a.value;break;case"max":g.maximum=a.value}return g}}(a,c);case m.ZodUndefined:return{not:{}};case m.ZodNull:return{type:"null"};case m.ZodArray:var o,p,q,r=a,s=c;let t={type:"array"};return(null==(o=r.type)?void 0:o._def)&&(null==(q=null==(p=r.type)?void 0:p._def)?void 0:q.typeName)!==m.ZodAny&&(t.items=gl(r.type._def,{...s,currentPath:[...s.currentPath,"items"]})),r.minLength&&(t.minItems=r.minLength.value),r.maxLength&&(t.maxItems=r.maxLength.value),r.exactLength&&(t.minItems=r.exactLength.value,t.maxItems=r.exactLength.value),t;case m.ZodUnion:case m.ZodDiscriminatedUnion:return function(a,b){let c=a.options instanceof Map?Array.from(a.options.values()):a.options;if(c.every(a=>a._def.typeName in gk&&(!a._def.checks||!a._def.checks.length))){let a=c.reduce((a,b)=>{let c=gk[b._def.typeName];return c&&!a.includes(c)?[...a,c]:a},[]);return{type:a.length>1?a:a[0]}}if(c.every(a=>"ZodLiteral"===a._def.typeName&&!a.description)){let a=c.reduce((a,b)=>{let c=typeof b._def.value;switch(c){case"string":case"number":case"boolean":return[...a,c];case"bigint":return[...a,"integer"];case"object":if(null===b._def.value)return[...a,"null"];default:return a}},[]);if(a.length===c.length){let b=a.filter((a,b,c)=>c.indexOf(a)===b);return{type:b.length>1?b:b[0],enum:c.reduce((a,b)=>a.includes(b._def.value)?a:[...a,b._def.value],[])}}}else if(c.every(a=>"ZodEnum"===a._def.typeName))return{type:"string",enum:c.reduce((a,b)=>[...a,...b._def.values.filter(b=>!a.includes(b))],[])};var d=a,e=b;let f=(d.options instanceof Map?Array.from(d.options.values()):d.options).map((a,b)=>gl(a._def,{...e,currentPath:[...e.currentPath,"anyOf",`${b}`]})).filter(a=>!!a&&(!e.strictUnions||"object"==typeof a&&Object.keys(a).length>0));return f.length?{anyOf:f}:void 0}(a,c);case m.ZodIntersection:var u=a,v=c;let w=[gl(u.left._def,{...v,currentPath:[...v.currentPath,"allOf","0"]}),gl(u.right._def,{...v,currentPath:[...v.currentPath,"allOf","1"]})].filter(a=>!!a),x=[];return w.forEach(a=>{if((!("type"in a)||"string"!==a.type)&&"allOf"in a)x.push(...a.allOf);else{let b=a;if("additionalProperties"in a&&!1===a.additionalProperties){let{additionalProperties:c,...d}=a;b=d}x.push(b)}}),x.length?{allOf:x}:void 0;case m.ZodTuple:return H=a,I=c,H.rest?{type:"array",minItems:H.items.length,items:H.items.map((a,b)=>gl(a._def,{...I,currentPath:[...I.currentPath,"items",`${b}`]})).reduce((a,b)=>void 0===b?a:[...a,b],[]),additionalItems:gl(H.rest._def,{...I,currentPath:[...I.currentPath,"additionalItems"]})}:{type:"array",minItems:H.items.length,maxItems:H.items.length,items:H.items.map((a,b)=>gl(a._def,{...I,currentPath:[...I.currentPath,"items",`${b}`]})).reduce((a,b)=>void 0===b?a:[...a,b],[])};case m.ZodRecord:return gj(a,c);case m.ZodLiteral:var y=a;let z=typeof y.value;return"bigint"!==z&&"number"!==z&&"boolean"!==z&&"string"!==z?{type:Array.isArray(y.value)?"array":"object"}:{type:"bigint"===z?"integer":z,const:y.value};case m.ZodEnum:return{type:"string",enum:Array.from(a.values)};case m.ZodNativeEnum:var A=a;let B=A.values,C=Object.keys(A.values).filter(a=>"number"!=typeof B[B[a]]).map(a=>B[a]),D=Array.from(new Set(C.map(a=>typeof a)));return{type:1===D.length?"string"===D[0]?"string":"number":["string","number"],enum:C};case m.ZodNullable:var E=a,F=c;if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(E.innerType._def.typeName)&&(!E.innerType._def.checks||!E.innerType._def.checks.length))return{type:[gk[E.innerType._def.typeName],"null"]};let G=gl(E.innerType._def,{...F,currentPath:[...F.currentPath,"anyOf","0"]});return G&&{anyOf:[G,{type:"null"}]};case m.ZodOptional:var H,I,J,K=a,L=c;if(L.currentPath.toString()===(null==(J=L.propertyPath)?void 0:J.toString()))return gl(K.innerType._def,L);let M=gl(K.innerType._def,{...L,currentPath:[...L.currentPath,"anyOf","1"]});return M?{anyOf:[{not:{}},M]}:{};case m.ZodMap:return d=a,"record"===(e=c).mapStrategy?gj(d,e):{type:"array",maxItems:125,items:{type:"array",items:[gl(d.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||{},gl(d.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||{}],minItems:2,maxItems:2}};case m.ZodSet:var N=a,O=c;let P={type:"array",uniqueItems:!0,items:gl(N.valueType._def,{...O,currentPath:[...O.currentPath,"items"]})};return N.minSize&&(P.minItems=N.minSize.value),N.maxSize&&(P.maxItems=N.maxSize.value),P;case m.ZodLazy:return()=>a.getter()._def;case m.ZodPromise:return gl(a.type._def,c);case m.ZodNaN:case m.ZodNever:return{not:{}};case m.ZodEffects:return f=a,"input"===(g=c).effectStrategy?gl(f.schema._def,g):{};case m.ZodAny:case m.ZodUnknown:return{};case m.ZodDefault:return h=a,i=c,{...gl(h.innerType._def,i),default:h.defaultValue()};case m.ZodBranded:return ga(a,c);case m.ZodReadonly:case m.ZodCatch:return gl(a.innerType._def,c);case m.ZodPipeline:var Q=a,R=c;if("input"===R.pipeStrategy)return gl(Q.in._def,R);if("output"===R.pipeStrategy)return gl(Q.out._def,R);let S=gl(Q.in._def,{...R,currentPath:[...R.currentPath,"allOf","0"]}),T=gl(Q.out._def,{...R,currentPath:[...R.currentPath,"allOf",S?"1":"0"]});return{allOf:[S,T].filter(a=>void 0!==a)};case m.ZodFunction:case m.ZodVoid:case m.ZodSymbol:default:return}})(a,a.typeName,b),h="function"==typeof g?gl(g(),b):g;if(h&&gn(a,b,h),b.postProcess){let c=b.postProcess(h,a,b);return f.jsonSchema=h,c}return f.jsonSchema=h,h}var gm=(a,b)=>{switch(b.$refStrategy){case"root":return{$ref:a.path.join("/")};case"relative":return{$ref:((a,b)=>{let c=0;for(;c<a.length&&c<b.length&&a[c]===b[c];c++);return[(a.length-c).toString(),...b.slice(c)].join("/")})(b.currentPath,a.path)};case"none":case"seen":if(a.path.length<b.currentPath.length&&a.path.every((a,c)=>b.currentPath[c]===a))return console.warn(`Recursive reference detected at ${b.currentPath.join("/")}! Defaulting to any`),{};return"seen"===b.$refStrategy?{}:void 0}},gn=(a,b,c)=>(a.description&&(c.description=a.description),c),go=Symbol.for("vercel.ai.schema");function gp(a,{validate:b}={}){return{[go]:!0,_type:void 0,[f3]:!0,jsonSchema:a,validate:b}}var{btoa:gq,atob:gr}=globalThis,gs=Object.defineProperty,gt=(Symbol.for("vercel.ai.error.AI_NoOutputSpecifiedError"),Symbol.for("vercel.ai.error.AI_InvalidArgumentError"),Symbol.for("vercel.ai.error.AI_InvalidStreamPartError"),Symbol.for("vercel.ai.error.AI_InvalidToolInputError"),Symbol.for("vercel.ai.error.AI_MCPClientError"),Symbol.for("vercel.ai.error.AI_NoImageGeneratedError"),"AI_NoObjectGeneratedError"),gu=`vercel.ai.error.${gt}`,gv=Symbol.for(gu),gw=class extends F{constructor({message:a="No object generated.",cause:b,text:c,response:d,usage:e,finishReason:f}){super({name:gt,message:a,cause:b}),this[n]=!0,this.text=c,this.response=d,this.usage=e,this.finishReason=f}static isInstance(a){return F.hasMarker(a,gu)}};n=gv,Symbol.for("vercel.ai.error.AI_NoOutputGeneratedError"),Symbol.for("vercel.ai.error.AI_NoSuchToolError"),Symbol.for("vercel.ai.error.AI_ToolCallRepairError"),Symbol.for("vercel.ai.error.AI_InvalidDataContentError"),Symbol.for("vercel.ai.error.AI_InvalidMessageRoleError"),Symbol.for("vercel.ai.error.AI_MessageConversionError"),Symbol.for("vercel.ai.error.AI_DownloadError"),Symbol.for("vercel.ai.error.AI_RetryError");var gx="5.0.60",gy=er([dP(),eR(Uint8Array),eR(ArrayBuffer),eQ(a=>{var b,c;return null!=(c=null==(b=globalThis.Buffer)?void 0:b.isBuffer(a))&&c},{message:"Must be a Buffer"})]),gz=eO(()=>er([ef(),dP(),d9(),ed(),ew(dP(),gz),el(gz)])),gA=ew(dP(),ew(dP(),gz)),gB=en({type:eA("text"),text:dP(),providerOptions:gA.optional()}),gC=en({type:eA("image"),image:er([gy,eR(URL)]),mediaType:dP().optional(),providerOptions:gA.optional()}),gD=en({type:eA("file"),data:er([gy,eR(URL)]),filename:dP().optional(),mediaType:dP(),providerOptions:gA.optional()}),gE=en({type:eA("reasoning"),text:dP(),providerOptions:gA.optional()}),gF=en({type:eA("tool-call"),toolCallId:dP(),toolName:dP(),input:eh(),providerOptions:gA.optional(),providerExecuted:ed().optional()}),gG=et("type",[en({type:eA("text"),value:dP()}),en({type:eA("json"),value:gz}),en({type:eA("error-text"),value:dP()}),en({type:eA("error-json"),value:gz}),en({type:eA("content"),value:el(er([en({type:eA("text"),text:dP()}),en({type:eA("media"),data:dP(),mediaType:dP()})]))})]),gH=en({type:eA("tool-result"),toolCallId:dP(),toolName:dP(),output:gG,providerOptions:gA.optional()}),gI=en({role:eA("system"),content:dP(),providerOptions:gA.optional()}),gJ=en({role:eA("user"),content:er([dP(),el(er([gB,gC,gD]))]),providerOptions:gA.optional()}),gK=en({role:eA("assistant"),content:er([dP(),el(er([gB,gD,gE,gF,gH]))]),providerOptions:gA.optional()});er([gI,gJ,gK,en({role:eA("tool"),content:el(gH),providerOptions:gA.optional()})]),f_({prefix:"aitxt",size:24}),TransformStream;var gL=er([eo({type:eA("text-start"),id:dP(),providerMetadata:gA.optional()}),eo({type:eA("text-delta"),id:dP(),delta:dP(),providerMetadata:gA.optional()}),eo({type:eA("text-end"),id:dP(),providerMetadata:gA.optional()}),eo({type:eA("error"),errorText:dP()}),eo({type:eA("tool-input-start"),toolCallId:dP(),toolName:dP(),providerExecuted:ed().optional(),dynamic:ed().optional()}),eo({type:eA("tool-input-delta"),toolCallId:dP(),inputTextDelta:dP()}),eo({type:eA("tool-input-available"),toolCallId:dP(),toolName:dP(),input:eh(),providerExecuted:ed().optional(),providerMetadata:gA.optional(),dynamic:ed().optional()}),eo({type:eA("tool-input-error"),toolCallId:dP(),toolName:dP(),input:eh(),providerExecuted:ed().optional(),providerMetadata:gA.optional(),dynamic:ed().optional(),errorText:dP()}),eo({type:eA("tool-output-available"),toolCallId:dP(),output:eh(),providerExecuted:ed().optional(),dynamic:ed().optional(),preliminary:ed().optional()}),eo({type:eA("tool-output-error"),toolCallId:dP(),errorText:dP(),providerExecuted:ed().optional(),dynamic:ed().optional()}),eo({type:eA("reasoning-start"),id:dP(),providerMetadata:gA.optional()}),eo({type:eA("reasoning-delta"),id:dP(),delta:dP(),providerMetadata:gA.optional()}),eo({type:eA("reasoning-end"),id:dP(),providerMetadata:gA.optional()}),eo({type:eA("source-url"),sourceId:dP(),url:dP(),title:dP().optional(),providerMetadata:gA.optional()}),eo({type:eA("source-document"),sourceId:dP(),mediaType:dP(),title:dP(),filename:dP().optional(),providerMetadata:gA.optional()}),eo({type:eA("file"),url:dP(),mediaType:dP(),providerMetadata:gA.optional()}),eo({type:eQ(a=>"string"==typeof a&&a.startsWith("data-"),{message:'Type must start with "data-"'}),id:dP().optional(),data:eh(),transient:ed().optional()}),eo({type:eA("start-step")}),eo({type:eA("finish-step")}),eo({type:eA("start"),messageId:dP().optional(),messageMetadata:eh().optional()}),eo({type:eA("finish"),messageMetadata:eh().optional()}),eo({type:eA("abort")}),eo({type:eA("message-metadata"),messageMetadata:eh()})]);async function gM(a){if(void 0===a)return{value:void 0,state:"undefined-input"};let b=await f6({text:a});return b.success?{value:b.value,state:"successful-parse"}:(b=await f6({text:function(a){let b=["ROOT"],c=-1,d=null;function e(a,e,f){switch(a){case'"':c=e,b.pop(),b.push(f),b.push("INSIDE_STRING");break;case"f":case"t":case"n":c=e,d=e,b.pop(),b.push(f),b.push("INSIDE_LITERAL");break;case"-":b.pop(),b.push(f),b.push("INSIDE_NUMBER");break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":c=e,b.pop(),b.push(f),b.push("INSIDE_NUMBER");break;case"{":c=e,b.pop(),b.push(f),b.push("INSIDE_OBJECT_START");break;case"[":c=e,b.pop(),b.push(f),b.push("INSIDE_ARRAY_START")}}function f(a,d){switch(a){case",":b.pop(),b.push("INSIDE_OBJECT_AFTER_COMMA");break;case"}":c=d,b.pop()}}function g(a,d){switch(a){case",":b.pop(),b.push("INSIDE_ARRAY_AFTER_COMMA");break;case"]":c=d,b.pop()}}for(let h=0;h<a.length;h++){let i=a[h];switch(b[b.length-1]){case"ROOT":e(i,h,"FINISH");break;case"INSIDE_OBJECT_START":switch(i){case'"':b.pop(),b.push("INSIDE_OBJECT_KEY");break;case"}":c=h,b.pop()}break;case"INSIDE_OBJECT_AFTER_COMMA":'"'===i&&(b.pop(),b.push("INSIDE_OBJECT_KEY"));break;case"INSIDE_OBJECT_KEY":'"'===i&&(b.pop(),b.push("INSIDE_OBJECT_AFTER_KEY"));break;case"INSIDE_OBJECT_AFTER_KEY":":"===i&&(b.pop(),b.push("INSIDE_OBJECT_BEFORE_VALUE"));break;case"INSIDE_OBJECT_BEFORE_VALUE":e(i,h,"INSIDE_OBJECT_AFTER_VALUE");break;case"INSIDE_OBJECT_AFTER_VALUE":f(i,h);break;case"INSIDE_STRING":switch(i){case'"':b.pop(),c=h;break;case"\\":b.push("INSIDE_STRING_ESCAPE");break;default:c=h}break;case"INSIDE_ARRAY_START":"]"===i?(c=h,b.pop()):(c=h,e(i,h,"INSIDE_ARRAY_AFTER_VALUE"));break;case"INSIDE_ARRAY_AFTER_VALUE":switch(i){case",":b.pop(),b.push("INSIDE_ARRAY_AFTER_COMMA");break;case"]":c=h,b.pop();break;default:c=h}break;case"INSIDE_ARRAY_AFTER_COMMA":e(i,h,"INSIDE_ARRAY_AFTER_VALUE");break;case"INSIDE_STRING_ESCAPE":b.pop(),c=h;break;case"INSIDE_NUMBER":switch(i){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":c=h;break;case"e":case"E":case"-":case".":break;case",":b.pop(),"INSIDE_ARRAY_AFTER_VALUE"===b[b.length-1]&&g(i,h),"INSIDE_OBJECT_AFTER_VALUE"===b[b.length-1]&&f(i,h);break;case"}":b.pop(),"INSIDE_OBJECT_AFTER_VALUE"===b[b.length-1]&&f(i,h);break;case"]":b.pop(),"INSIDE_ARRAY_AFTER_VALUE"===b[b.length-1]&&g(i,h);break;default:b.pop()}break;case"INSIDE_LITERAL":{let e=a.substring(d,h+1);"false".startsWith(e)||"true".startsWith(e)||"null".startsWith(e)?c=h:(b.pop(),"INSIDE_OBJECT_AFTER_VALUE"===b[b.length-1]?f(i,h):"INSIDE_ARRAY_AFTER_VALUE"===b[b.length-1]&&g(i,h))}}}let h=a.slice(0,c+1);for(let c=b.length-1;c>=0;c--)switch(b[c]){case"INSIDE_STRING":h+='"';break;case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":h+="}";break;case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":h+="]";break;case"INSIDE_LITERAL":{let b=a.substring(d,a.length);"true".startsWith(b)?h+="true".slice(b.length):"false".startsWith(b)?h+="false".slice(b.length):"null".startsWith(b)&&(h+="null".slice(b.length))}}return h}(a)})).success?{value:b.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"}}function gN(a){return a.type.startsWith("tool-")}function gO(a){return gN(a)||"dynamic-tool"===a.type}function gP(a){return a.type.split("-").slice(1).join("-")}async function gQ({stream:a,onError:b}){let c=a.getReader();try{for(;;){let{done:a}=await c.read();if(a)break}}catch(a){null==b||b(a)}finally{c.releaseLock()}}f_({prefix:"aitxt",size:24}),f_({prefix:"aiobj",size:24});var gR=class{constructor(){this.queue=[],this.isProcessing=!1}async processQueue(){if(!this.isProcessing){for(this.isProcessing=!0;this.queue.length>0;)await this.queue[0](),this.queue.shift();this.isProcessing=!1}}async run(a){return new Promise((b,c)=>{this.queue.push(async()=>{try{await a(),b()}catch(a){c(a)}}),this.processQueue()})}};f_({prefix:"aiobj",size:24}),((a,b)=>{for(var c in b)gs(a,c,{get:b[c],enumerable:!0})})({},{object:()=>gT,text:()=>gS});var gS=()=>({type:"text",responseFormat:{type:"text"},parsePartial:async({text:a})=>({partial:a}),parseOutput:async({text:a})=>a}),gT=({schema:a})=>{let b=function(a){return null==a?gp({properties:{},additionalProperties:!1}):"object"==typeof a&&null!==a&&go in a&&!0===a[go]&&"jsonSchema"in a&&"validate"in a?a:function(a,b){var c;return"_zod"in a?gp(dt(a,{target:"draft-7",io:"output",reused:"inline"}),{validate:async b=>{let c=await dD(a,b);return c.success?{success:!0,value:c.data}:{success:!1,error:c.error}}}):gp(((a,b)=>{var c;let d=(a=>{let b,c="string"==typeof(b=a)?{...f9,name:b}:{...f9,...b},d=void 0!==c.name?[...c.basePath,c.definitionPath,c.name]:c.basePath;return{...c,currentPath:d,propertyPath:void 0,seen:new Map(Object.entries(c.definitions).map(([a,b])=>[b._def,{def:b._def,path:[...c.basePath,c.definitionPath,a],jsonSchema:void 0}]))}})(b),e="object"==typeof b&&b.definitions?Object.entries(b.definitions).reduce((a,[b,c])=>{var e;return{...a,[b]:null!=(e=gl(c._def,{...d,currentPath:[...d.basePath,d.definitionPath,b]},!0))?e:{}}},{}):void 0,f="string"==typeof b?b:(null==b?void 0:b.nameStrategy)==="title"||null==b?void 0:b.name,g=null!=(c=gl(a._def,void 0===f?d:{...d,currentPath:[...d.basePath,d.definitionPath,f]},!1))?c:{},h="object"==typeof b&&void 0!==b.name&&"title"===b.nameStrategy?b.name:void 0;void 0!==h&&(g.title=h);let i=void 0===f?e?{...g,[d.definitionPath]:e}:g:{$ref:[..."relative"===d.$refStrategy?[]:d.basePath,d.definitionPath,f].join("/"),[d.definitionPath]:{...e,[f]:g}};return i.$schema="http://json-schema.org/draft-07/schema#",i})(a,{$refStrategy:(c=void 0,"none")}),{validate:async b=>{let c=await a.safeParseAsync(b);return c.success?{success:!0,value:c.data}:{success:!1,error:c.error}}})}(a)}(a);return{type:"object",responseFormat:{type:"json",schema:b.jsonSchema},async parsePartial({text:a}){let b=await gM(a);switch(b.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:b.value};default:{let a=b.state;throw Error(`Unsupported parse state: ${a}`)}}},async parseOutput({text:a},c){let d=await f6({text:a});if(!d.success)throw new gw({message:"No object generated: could not parse the response.",cause:d.error,text:a,response:c.response,usage:c.usage,finishReason:c.finishReason});let e=await f5({value:d.value,schema:b});if(!e.success)throw new gw({message:"No object generated: response did not match schema.",cause:e.error,text:a,response:c.response,usage:c.usage,finishReason:c.finishReason});return e.value}}},gU=(Symbol.for("vercel.ai.error.AI_NoSuchProviderError"),ep({name:dP(),version:dP()})),gV=ep({_meta:eD(en({}).loose())}),gW=en({method:dP(),params:eD(gV)}),gX=ep({experimental:eD(en({}).loose()),logging:eD(en({}).loose()),prompts:eD(ep({listChanged:eD(ed())})),resources:eD(ep({subscribe:eD(ed()),listChanged:eD(ed())})),tools:eD(ep({listChanged:eD(ed())}))});gV.extend({protocolVersion:dP(),capabilities:gX,serverInfo:gU,instructions:eD(dP())});var gY=gV.extend({nextCursor:eD(dP())}),gZ=en({name:dP(),description:eD(dP()),inputSchema:en({type:eA("object"),properties:eD(en({}).loose())}).loose()}).loose();gY.extend({tools:el(gZ)});var g$=en({type:eA("text"),text:dP()}).loose(),g_=en({type:eA("image"),data:dh(d4,void 0),mimeType:dP()}).loose(),g0=en({uri:dP(),mimeType:eD(dP())}).loose(),g1=g0.extend({text:dP()}),g2=g0.extend({blob:dh(d4,void 0)}),g3=en({type:eA("resource"),resource:er([g1,g2])}).loose();gV.extend({content:el(er([g$,g_,g3])),isError:ed().default(!1).optional()}).or(gV.extend({toolResult:eh()}));var g4=en({jsonrpc:eA("2.0"),id:er([dP(),d9().int()])}).merge(gW).strict(),g5=en({jsonrpc:eA("2.0"),id:er([dP(),d9().int()]),result:gV}).strict(),g6=en({jsonrpc:eA("2.0"),id:er([dP(),d9().int()]),error:en({code:d9().int(),message:dP(),data:eD(eh())})}).strict();async function g7(a){if(null==a)return[];if(!globalThis.FileList||!(a instanceof globalThis.FileList))throw Error("FileList is not supported in the current environment");return Promise.all(Array.from(a).map(async a=>{let{name:b,type:c}=a;return{type:"file",mediaType:c,filename:b,url:await new Promise((b,c)=>{let d=new FileReader;d.onload=a=>{var c;b(null==(c=a.target)?void 0:c.result)},d.onerror=a=>c(a),d.readAsDataURL(a)})}}))}er([g4,en({jsonrpc:eA("2.0")}).merge(en({method:dP(),params:eD(gV)})).strict(),g5,g6]);var g8=class{constructor({api:a="/api/chat",credentials:b,headers:c,body:d,fetch:e,prepareSendMessagesRequest:f,prepareReconnectToStreamRequest:g}){this.api=a,this.credentials=b,this.headers=c,this.body=d,this.fetch=e,this.prepareSendMessagesRequest=f,this.prepareReconnectToStreamRequest=g}async sendMessages({abortSignal:a,...b}){var c,d,e,f,g;let h=await f7(this.body),i=await f7(this.headers),j=await f7(this.credentials),k=await (null==(c=this.prepareSendMessagesRequest)?void 0:c.call(this,{api:this.api,id:b.chatId,messages:b.messages,body:{...h,...b.body},headers:{...i,...b.headers},credentials:j,requestMetadata:b.metadata,trigger:b.trigger,messageId:b.messageId})),l=null!=(d=null==k?void 0:k.api)?d:this.api,m=(null==k?void 0:k.headers)!==void 0?k.headers:{...i,...b.headers},n=(null==k?void 0:k.body)!==void 0?k.body:{...h,...b.body,id:b.chatId,messages:b.messages,trigger:b.trigger,messageId:b.messageId},o=null!=(e=null==k?void 0:k.credentials)?e:j,p=null!=(f=this.fetch)?f:globalThis.fetch,q=await p(l,{method:"POST",headers:f$({"Content-Type":"application/json",...m},`ai-sdk/${gx}`,fZ()),body:JSON.stringify(n),credentials:o,signal:a});if(!q.ok)throw Error(null!=(g=await q.text())?g:"Failed to fetch the chat response.");if(!q.body)throw Error("The response body is empty.");return this.processResponseStream(q.body)}async reconnectToStream(a){var b,c,d,e,f;let g=await f7(this.body),h=await f7(this.headers),i=await f7(this.credentials),j=await (null==(b=this.prepareReconnectToStreamRequest)?void 0:b.call(this,{api:this.api,id:a.chatId,body:{...g,...a.body},headers:{...h,...a.headers},credentials:i,requestMetadata:a.metadata})),k=null!=(c=null==j?void 0:j.api)?c:`${this.api}/${a.chatId}/stream`,l=(null==j?void 0:j.headers)!==void 0?j.headers:{...h,...a.headers},m=null!=(d=null==j?void 0:j.credentials)?d:i,n=null!=(e=this.fetch)?e:globalThis.fetch,o=await n(k,{method:"GET",headers:f$(l,`ai-sdk/${gx}`,fZ()),credentials:m});if(204===o.status)return null;if(!o.ok)throw Error(null!=(f=await o.text())?f:"Failed to fetch the chat response.");if(!o.body)throw Error("The response body is empty.");return this.processResponseStream(o.body)}},g9=class extends g8{constructor(a={}){super(a)}processResponseStream(a){return(function({stream:a,schema:b}){return a.pipeThrough(new TextDecoderStream).pipeThrough(new V).pipeThrough(new TransformStream({async transform({data:a},c){"[DONE]"!==a&&c.enqueue(await f6({text:a,schema:b}))}}))})({stream:a,schema:gL}).pipeThrough(new TransformStream({async transform(a,b){if(!a.success)throw a.error;b.enqueue(a.value)}}))}},ha=class{constructor({generateId:a=f0,id:b=a(),transport:c=new g9,messageMetadataSchema:d,dataPartSchemas:e,state:f,onError:g,onToolCall:h,onFinish:i,onData:j,sendAutomaticallyWhen:k}){this.activeResponse=void 0,this.jobExecutor=new gR,this.sendMessage=async(a,b)=>{var c,d,e,f;let g;if(null==a)return void await this.makeRequest({trigger:"submit-message",messageId:null==(c=this.lastMessage)?void 0:c.id,...b});if(g="text"in a||"files"in a?{parts:[...Array.isArray(a.files)?a.files:await g7(a.files),..."text"in a&&null!=a.text?[{type:"text",text:a.text}]:[]]}:a,null!=a.messageId){let b=this.state.messages.findIndex(b=>b.id===a.messageId);if(-1===b)throw Error(`message with id ${a.messageId} not found`);if("user"!==this.state.messages[b].role)throw Error(`message with id ${a.messageId} is not a user message`);this.state.messages=this.state.messages.slice(0,b+1),this.state.replaceMessage(b,{...g,id:a.messageId,role:null!=(d=g.role)?d:"user",metadata:a.metadata})}else this.state.pushMessage({...g,id:null!=(e=g.id)?e:this.generateId(),role:null!=(f=g.role)?f:"user",metadata:a.metadata});await this.makeRequest({trigger:"submit-message",messageId:a.messageId,...b})},this.regenerate=async({messageId:a,...b}={})=>{let c=null==a?this.state.messages.length-1:this.state.messages.findIndex(b=>b.id===a);if(-1===c)throw Error(`message ${a} not found`);this.state.messages=this.state.messages.slice(0,"assistant"===this.messages[c].role?c:c+1),await this.makeRequest({trigger:"regenerate-message",messageId:a,...b})},this.resumeStream=async(a={})=>{await this.makeRequest({trigger:"resume-stream",...a})},this.clearError=()=>{"error"===this.status&&(this.state.error=void 0,this.setStatus({status:"ready"}))},this.addToolResult=async({state:a="output-available",tool:b,toolCallId:c,output:d,errorText:e})=>this.jobExecutor.run(async()=>{var b,f;let g=this.state.messages,h=g[g.length-1];this.state.replaceMessage(g.length-1,{...h,parts:h.parts.map(b=>gO(b)&&b.toolCallId===c?{...b,state:a,output:d,errorText:e}:b)}),this.activeResponse&&(this.activeResponse.state.message.parts=this.activeResponse.state.message.parts.map(b=>gO(b)&&b.toolCallId===c?{...b,state:a,output:d,errorText:e}:b)),"streaming"!==this.status&&"submitted"!==this.status&&(null==(b=this.sendAutomaticallyWhen)?void 0:b.call(this,{messages:this.state.messages}))&&this.makeRequest({trigger:"submit-message",messageId:null==(f=this.lastMessage)?void 0:f.id})}),this.stop=async()=>{var a;("streaming"===this.status||"submitted"===this.status)&&(null==(a=this.activeResponse)?void 0:a.abortController)&&this.activeResponse.abortController.abort()},this.id=b,this.transport=c,this.generateId=a,this.messageMetadataSchema=d,this.dataPartSchemas=e,this.state=f,this.onError=g,this.onToolCall=h,this.onFinish=i,this.onData=j,this.sendAutomaticallyWhen=k}get status(){return this.state.status}setStatus({status:a,error:b}){this.status!==a&&(this.state.status=a,this.state.error=b)}get error(){return this.state.error}get messages(){return this.state.messages}get lastMessage(){return this.state.messages[this.state.messages.length-1]}set messages(a){this.state.messages=a}async makeRequest({trigger:a,metadata:b,headers:c,body:d,messageId:e}){var f,g,h;this.setStatus({status:"submitted",error:void 0});let i=this.lastMessage,j=!1,k=!1,l=!1;try{let f,g={state:function({lastMessage:a,messageId:b}){return{message:(null==a?void 0:a.role)==="assistant"?a:{id:b,metadata:void 0,role:"assistant",parts:[]},activeTextParts:{},activeReasoningParts:{},partialToolCalls:{}}}({lastMessage:this.state.snapshot(i),messageId:this.generateId()}),abortController:new AbortController};if(g.abortController.signal.addEventListener("abort",()=>{j=!0}),this.activeResponse=g,"resume-stream"===a){let a=await this.transport.reconnectToStream({chatId:this.id,metadata:b,headers:c,body:d});if(null==a)return void this.setStatus({status:"ready"});f=a}else f=await this.transport.sendMessages({chatId:this.id,messages:this.state.messages,abortSignal:g.abortController.signal,metadata:b,headers:c,body:d,trigger:a,messageId:e});let h=a=>this.jobExecutor.run(()=>a({state:g.state,write:()=>{var a;this.setStatus({status:"streaming"}),g.state.message.id===(null==(a=this.lastMessage)?void 0:a.id)?this.state.replaceMessage(this.state.messages.length-1,g.state.message):this.state.pushMessage(g.state.message)}}));await gQ({stream:function({stream:a,messageMetadataSchema:b,dataPartSchemas:c,runUpdateMessageJob:d,onError:e,onToolCall:f,onData:g}){return a.pipeThrough(new TransformStream({async transform(a,h){await d(async({state:d,write:i})=>{var j,k,l,m;function n(a){let b=d.message.parts.filter(gN).find(b=>b.toolCallId===a);if(null==b)throw Error("tool-output-error must be preceded by a tool-input-available");return b}function o(a){let b=d.message.parts.filter(a=>"dynamic-tool"===a.type).find(b=>b.toolCallId===a);if(null==b)throw Error("tool-output-error must be preceded by a tool-input-available");return b}function p(a){var b;let c=d.message.parts.find(b=>gN(b)&&b.toolCallId===a.toolCallId);null!=c?(c.state=a.state,c.input=a.input,c.output=a.output,c.errorText=a.errorText,c.rawInput=a.rawInput,c.preliminary=a.preliminary,c.providerExecuted=null!=(b=a.providerExecuted)?b:c.providerExecuted,null!=a.providerMetadata&&"input-available"===c.state&&(c.callProviderMetadata=a.providerMetadata)):d.message.parts.push({type:`tool-${a.toolName}`,toolCallId:a.toolCallId,state:a.state,input:a.input,output:a.output,rawInput:a.rawInput,errorText:a.errorText,providerExecuted:a.providerExecuted,preliminary:a.preliminary,...null!=a.providerMetadata?{callProviderMetadata:a.providerMetadata}:{}})}function q(a){var b;let c=d.message.parts.find(b=>"dynamic-tool"===b.type&&b.toolCallId===a.toolCallId);null!=c?(c.state=a.state,c.toolName=a.toolName,c.input=a.input,c.output=a.output,c.errorText=a.errorText,c.rawInput=null!=(b=a.rawInput)?b:c.rawInput,c.preliminary=a.preliminary,null!=a.providerMetadata&&"input-available"===c.state&&(c.callProviderMetadata=a.providerMetadata)):d.message.parts.push({type:"dynamic-tool",toolName:a.toolName,toolCallId:a.toolCallId,state:a.state,input:a.input,output:a.output,errorText:a.errorText,preliminary:a.preliminary,...null!=a.providerMetadata?{callProviderMetadata:a.providerMetadata}:{}})}async function r(a){if(null!=a){let c=null!=d.message.metadata?function a(b,c){if(void 0===b&&void 0===c)return;if(void 0===b)return c;if(void 0===c)return b;let d={...b};for(let e in c)if(Object.prototype.hasOwnProperty.call(c,e)){let f=c[e];if(void 0===f)continue;let g=e in b?b[e]:void 0,h=null!==f&&"object"==typeof f&&!Array.isArray(f)&&!(f instanceof Date)&&!(f instanceof RegExp),i=null!=g&&"object"==typeof g&&!Array.isArray(g)&&!(g instanceof Date)&&!(g instanceof RegExp);h&&i?d[e]=a(g,f):d[e]=f}return d}(d.message.metadata,a):a;null!=b&&await f4({value:c,schema:b}),d.message.metadata=c}}switch(a.type){case"text-start":{let b={type:"text",text:"",providerMetadata:a.providerMetadata,state:"streaming"};d.activeTextParts[a.id]=b,d.message.parts.push(b),i();break}case"text-delta":{let b=d.activeTextParts[a.id];b.text+=a.delta,b.providerMetadata=null!=(j=a.providerMetadata)?j:b.providerMetadata,i();break}case"text-end":{let b=d.activeTextParts[a.id];b.state="done",b.providerMetadata=null!=(k=a.providerMetadata)?k:b.providerMetadata,delete d.activeTextParts[a.id],i();break}case"reasoning-start":{let b={type:"reasoning",text:"",providerMetadata:a.providerMetadata,state:"streaming"};d.activeReasoningParts[a.id]=b,d.message.parts.push(b),i();break}case"reasoning-delta":{let b=d.activeReasoningParts[a.id];b.text+=a.delta,b.providerMetadata=null!=(l=a.providerMetadata)?l:b.providerMetadata,i();break}case"reasoning-end":{let b=d.activeReasoningParts[a.id];b.providerMetadata=null!=(m=a.providerMetadata)?m:b.providerMetadata,b.state="done",delete d.activeReasoningParts[a.id],i();break}case"file":d.message.parts.push({type:"file",mediaType:a.mediaType,url:a.url}),i();break;case"source-url":d.message.parts.push({type:"source-url",sourceId:a.sourceId,url:a.url,title:a.title,providerMetadata:a.providerMetadata}),i();break;case"source-document":d.message.parts.push({type:"source-document",sourceId:a.sourceId,mediaType:a.mediaType,title:a.title,filename:a.filename,providerMetadata:a.providerMetadata}),i();break;case"tool-input-start":{let b=d.message.parts.filter(gN);d.partialToolCalls[a.toolCallId]={text:"",toolName:a.toolName,index:b.length,dynamic:a.dynamic},a.dynamic?q({toolCallId:a.toolCallId,toolName:a.toolName,state:"input-streaming",input:void 0}):p({toolCallId:a.toolCallId,toolName:a.toolName,state:"input-streaming",input:void 0,providerExecuted:a.providerExecuted}),i();break}case"tool-input-delta":{let b=d.partialToolCalls[a.toolCallId];b.text+=a.inputTextDelta;let{value:c}=await gM(b.text);b.dynamic?q({toolCallId:a.toolCallId,toolName:b.toolName,state:"input-streaming",input:c}):p({toolCallId:a.toolCallId,toolName:b.toolName,state:"input-streaming",input:c}),i();break}case"tool-input-available":a.dynamic?q({toolCallId:a.toolCallId,toolName:a.toolName,state:"input-available",input:a.input,providerMetadata:a.providerMetadata}):p({toolCallId:a.toolCallId,toolName:a.toolName,state:"input-available",input:a.input,providerExecuted:a.providerExecuted,providerMetadata:a.providerMetadata}),i(),f&&!a.providerExecuted&&await f({toolCall:a});break;case"tool-input-error":a.dynamic?q({toolCallId:a.toolCallId,toolName:a.toolName,state:"output-error",input:a.input,errorText:a.errorText,providerMetadata:a.providerMetadata}):p({toolCallId:a.toolCallId,toolName:a.toolName,state:"output-error",input:void 0,rawInput:a.input,errorText:a.errorText,providerExecuted:a.providerExecuted,providerMetadata:a.providerMetadata}),i();break;case"tool-output-available":if(a.dynamic){let b=o(a.toolCallId);q({toolCallId:a.toolCallId,toolName:b.toolName,state:"output-available",input:b.input,output:a.output,preliminary:a.preliminary})}else{let b=n(a.toolCallId);p({toolCallId:a.toolCallId,toolName:gP(b),state:"output-available",input:b.input,output:a.output,providerExecuted:a.providerExecuted,preliminary:a.preliminary})}i();break;case"tool-output-error":if(a.dynamic){let b=o(a.toolCallId);q({toolCallId:a.toolCallId,toolName:b.toolName,state:"output-error",input:b.input,errorText:a.errorText})}else{let b=n(a.toolCallId);p({toolCallId:a.toolCallId,toolName:gP(b),state:"output-error",input:b.input,rawInput:b.rawInput,errorText:a.errorText})}i();break;case"start-step":d.message.parts.push({type:"step-start"});break;case"finish-step":d.activeTextParts={},d.activeReasoningParts={};break;case"start":null!=a.messageId&&(d.message.id=a.messageId),await r(a.messageMetadata),(null!=a.messageId||null!=a.messageMetadata)&&i();break;case"finish":case"message-metadata":await r(a.messageMetadata),null!=a.messageMetadata&&i();break;case"error":null==e||e(Error(a.errorText));break;default:if(a.type.startsWith("data-")){if((null==c?void 0:c[a.type])!=null&&await f4({value:a.data,schema:c[a.type]}),a.transient){null==g||g(a);break}let b=null!=a.id?d.message.parts.find(b=>a.type===b.type&&a.id===b.id):void 0;null!=b?b.data=a.data:d.message.parts.push(a),null==g||g(a),i()}}h.enqueue(a)})}}))}({stream:f,onToolCall:this.onToolCall,onData:this.onData,messageMetadataSchema:this.messageMetadataSchema,dataPartSchemas:this.dataPartSchemas,runUpdateMessageJob:h,onError:a=>{throw a}}),onError:a=>{throw a}}),this.setStatus({status:"ready"})}catch(a){if(j||"AbortError"===a.name)return j=!0,this.setStatus({status:"ready"}),null;l=!0,a instanceof TypeError&&(a.message.toLowerCase().includes("fetch")||a.message.toLowerCase().includes("network"))&&(k=!0),this.onError&&a instanceof Error&&this.onError(a),this.setStatus({status:"error",error:a})}finally{try{null==(f=this.onFinish)||f.call(this,{message:this.activeResponse.state.message,messages:this.state.messages,isAbort:j,isDisconnect:k,isError:l})}catch(a){console.error(a)}this.activeResponse=void 0}(null==(g=this.sendAutomaticallyWhen)?void 0:g.call(this,{messages:this.state.messages}))&&await this.makeRequest({trigger:"submit-message",messageId:null==(h=this.lastMessage)?void 0:h.id,metadata:b,headers:c,body:d})}},hb=en({type:eA("text"),text:dP(),state:ey(["streaming","done"]).optional(),providerMetadata:gA.optional()}),hc=en({type:eA("reasoning"),text:dP(),state:ey(["streaming","done"]).optional(),providerMetadata:gA.optional()}),hd=en({type:eA("source-url"),sourceId:dP(),url:dP(),title:dP().optional(),providerMetadata:gA.optional()}),he=en({type:eA("source-document"),sourceId:dP(),mediaType:dP(),title:dP(),filename:dP().optional(),providerMetadata:gA.optional()}),hf=en({type:eA("file"),mediaType:dP(),filename:dP().optional(),url:dP(),providerMetadata:gA.optional()}),hg=en({type:eA("step-start")}),hh=en({type:dP().startsWith("data-"),id:dP().optional(),data:eh()}),hi=[en({type:eA("dynamic-tool"),toolName:dP(),toolCallId:dP(),state:eA("input-streaming"),input:eh().optional(),output:ej().optional(),errorText:ej().optional()}),en({type:eA("dynamic-tool"),toolName:dP(),toolCallId:dP(),state:eA("input-available"),input:eh(),output:ej().optional(),errorText:ej().optional(),callProviderMetadata:gA.optional()}),en({type:eA("dynamic-tool"),toolName:dP(),toolCallId:dP(),state:eA("output-available"),input:eh(),output:eh(),errorText:ej().optional(),callProviderMetadata:gA.optional(),preliminary:ed().optional()}),en({type:eA("dynamic-tool"),toolName:dP(),toolCallId:dP(),state:eA("output-error"),input:eh(),output:ej().optional(),errorText:dP(),callProviderMetadata:gA.optional()})],hj=[en({type:dP().startsWith("tool-"),toolCallId:dP(),state:eA("input-streaming"),providerExecuted:ed().optional(),input:eh().optional(),output:ej().optional(),errorText:ej().optional()}),en({type:dP().startsWith("tool-"),toolCallId:dP(),state:eA("input-available"),providerExecuted:ed().optional(),input:eh(),output:ej().optional(),errorText:ej().optional(),callProviderMetadata:gA.optional()}),en({type:dP().startsWith("tool-"),toolCallId:dP(),state:eA("output-available"),providerExecuted:ed().optional(),input:eh(),output:eh(),errorText:ej().optional(),callProviderMetadata:gA.optional(),preliminary:ed().optional()}),en({type:dP().startsWith("tool-"),toolCallId:dP(),state:eA("output-error"),providerExecuted:ed().optional(),input:eh(),output:ej().optional(),errorText:dP(),callProviderMetadata:gA.optional()})];en({id:dP(),role:ey(["system","user","assistant"]),metadata:eh().optional(),parts:el(er([hb,hc,hd,he,hf,hg,hh,...hi,...hj]))});var hk=c(78547),hl=(a,b,c)=>{if(!b.has(a))throw TypeError("Cannot "+c)},hm=(a,b,c)=>(hl(a,b,"read from private field"),c?c.call(a):b.get(a)),hn=(a,b,c)=>{if(b.has(a))throw TypeError("Cannot add the same private member more than once");b instanceof WeakSet?b.add(a):b.set(a,c)},ho=(a,b,c,d)=>(hl(a,b,"write to private field"),d?d.call(a,c):b.set(a,c),c),hp=class{constructor(a=[]){hn(this,o,void 0),hn(this,p,"ready"),hn(this,q,void 0),hn(this,r,new Set),hn(this,s,new Set),hn(this,t,new Set),this.pushMessage=a=>{ho(this,o,hm(this,o).concat(a)),hm(this,u).call(this)},this.popMessage=()=>{ho(this,o,hm(this,o).slice(0,-1)),hm(this,u).call(this)},this.replaceMessage=(a,b)=>{ho(this,o,[...hm(this,o).slice(0,a),this.snapshot(b),...hm(this,o).slice(a+1)]),hm(this,u).call(this)},this.snapshot=a=>structuredClone(a),this["~registerMessagesCallback"]=(a,b)=>{let c=b?function(a,b){return null!=b?hk(a,b):a}(a,b):a;return hm(this,r).add(c),()=>{hm(this,r).delete(c)}},this["~registerStatusCallback"]=a=>(hm(this,s).add(a),()=>{hm(this,s).delete(a)}),this["~registerErrorCallback"]=a=>(hm(this,t).add(a),()=>{hm(this,t).delete(a)}),hn(this,u,()=>{hm(this,r).forEach(a=>a())}),hn(this,v,()=>{hm(this,s).forEach(a=>a())}),hn(this,w,()=>{hm(this,t).forEach(a=>a())}),ho(this,o,a)}get status(){return hm(this,p)}set status(a){ho(this,p,a),hm(this,v).call(this)}get error(){return hm(this,q)}set error(a){ho(this,q,a),hm(this,w).call(this)}get messages(){return hm(this,o)}set messages(a){ho(this,o,[...a]),hm(this,u).call(this)}};o=new WeakMap,p=new WeakMap,q=new WeakMap,r=new WeakMap,s=new WeakMap,t=new WeakMap,u=new WeakMap,v=new WeakMap,w=new WeakMap;var hq=class extends ha{constructor({messages:a,...b}){let c=new hp(a);super({...b,state:c}),hn(this,x,void 0),this["~registerMessagesCallback"]=(a,b)=>hm(this,x)["~registerMessagesCallback"](a,b),this["~registerStatusCallback"]=a=>hm(this,x)["~registerStatusCallback"](a),this["~registerErrorCallback"]=a=>hm(this,x)["~registerErrorCallback"](a),ho(this,x,c)}};x=new WeakMap;var hr=({prefix:a,size:b=16,alphabet:c="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:d="-"}={})=>{let e=()=>{let a=c.length,d=Array(b);for(let e=0;e<b;e++)d[e]=c[Math.random()*a|0];return d.join("")};if(null==a)return e;if(c.includes(d))throw new K({argument:"separator",message:`The separator "${d}" must not be part of the alphabet "${c}".`});return()=>`${a}${d}${e()}`};function hs(a=globalThis){var b,c,d;return a.window?"runtime/browser":(null==(b=a.navigator)?void 0:b.userAgent)?`runtime/${a.navigator.userAgent.toLowerCase()}`:(null==(d=null==(c=a.process)?void 0:c.versions)?void 0:d.node)?`runtime/node.js/${a.process.version.substring(0)}`:a.EdgeRuntime?"runtime/vercel-edge":"runtime/unknown"}function ht(a,...b){let c=new Headers(Object.fromEntries(Object.entries(null!=a?a:{}).filter(([a,b])=>null!=b))),d=c.get("user-agent")||"";return c.set("user-agent",[d,...b].filter(Boolean).join(" ")),Object.fromEntries(c)}hr();var hu=/"__proto__"\s*:/,hv=/"constructor"\s*:/,hw=Symbol.for("vercel.ai.validator");function hx(a){let b;return()=>(null==b&&(b=a()),b)}async function hy({value:a,schema:b}){var c;let d="object"==typeof b&&null!==b&&hw in b&&!0===b[hw]&&"validate"in b?b:"function"==typeof b?b():(c=b,{[hw]:!0,validate:async a=>{let b=await c["~standard"].validate(a);return null==b.issues?{success:!0,value:b.value}:{success:!1,error:new S({value:a,cause:b.issues})}}});try{if(null==d.validate)return{success:!0,value:a,rawValue:a};let b=await d.validate(a);if(b.success)return{success:!0,value:b.value,rawValue:a};return{success:!1,error:S.wrap({value:a,cause:b.error}),rawValue:a}}catch(b){return{success:!1,error:S.wrap({value:a,cause:b}),rawValue:a}}}async function hz({text:a,schema:b}){try{let c=function(a){let{stackTraceLimit:b}=Error;Error.stackTraceLimit=0;try{let b=JSON.parse(a);return null===b||"object"!=typeof b||!1===hu.test(a)&&!1===hv.test(a)?b:function(a){let b=[a];for(;b.length;){let a=b;for(let c of(b=[],a)){if(Object.prototype.hasOwnProperty.call(c,"__proto__")||Object.prototype.hasOwnProperty.call(c,"constructor")&&Object.prototype.hasOwnProperty.call(c.constructor,"prototype"))throw SyntaxError("Object contains forbidden prototype property");for(let a in c){let d=c[a];d&&"object"==typeof d&&b.push(d)}}}return a}(b)}finally{Error.stackTraceLimit=b}}(a);if(null==b)return{success:!0,value:c,rawValue:c};return await hy({value:c,schema:b})}catch(b){return{success:!1,error:O.isInstance(b)?b:new O({text:a,cause:b}),rawValue:void 0}}}async function hA(a){return"function"==typeof a&&(a=a()),Promise.resolve(a)}var hB=Symbol("Let zodToJsonSchema decide on which parser to use"),hC={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",strictUnions:!1,definitions:{},errorMessages:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"};function hD(a,b){return hO(a.type._def,b)}var hE=void 0,hF={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(void 0===hE&&(hE=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),hE),ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function hG(a,b){let c={type:"string"};if(a.checks)for(let d of a.checks)switch(d.kind){case"min":c.minLength="number"==typeof c.minLength?Math.max(c.minLength,d.value):d.value;break;case"max":c.maxLength="number"==typeof c.maxLength?Math.min(c.maxLength,d.value):d.value;break;case"email":switch(b.emailStrategy){case"format:email":hJ(c,"email",d.message,b);break;case"format:idn-email":hJ(c,"idn-email",d.message,b);break;case"pattern:zod":hK(c,hF.email,d.message,b)}break;case"url":hJ(c,"uri",d.message,b);break;case"uuid":hJ(c,"uuid",d.message,b);break;case"regex":hK(c,d.regex,d.message,b);break;case"cuid":hK(c,hF.cuid,d.message,b);break;case"cuid2":hK(c,hF.cuid2,d.message,b);break;case"startsWith":hK(c,RegExp(`^${hH(d.value,b)}`),d.message,b);break;case"endsWith":hK(c,RegExp(`${hH(d.value,b)}$`),d.message,b);break;case"datetime":hJ(c,"date-time",d.message,b);break;case"date":hJ(c,"date",d.message,b);break;case"time":hJ(c,"time",d.message,b);break;case"duration":hJ(c,"duration",d.message,b);break;case"length":c.minLength="number"==typeof c.minLength?Math.max(c.minLength,d.value):d.value,c.maxLength="number"==typeof c.maxLength?Math.min(c.maxLength,d.value):d.value;break;case"includes":hK(c,RegExp(hH(d.value,b)),d.message,b);break;case"ip":"v6"!==d.version&&hJ(c,"ipv4",d.message,b),"v4"!==d.version&&hJ(c,"ipv6",d.message,b);break;case"base64url":hK(c,hF.base64url,d.message,b);break;case"jwt":hK(c,hF.jwt,d.message,b);break;case"cidr":"v6"!==d.version&&hK(c,hF.ipv4Cidr,d.message,b),"v4"!==d.version&&hK(c,hF.ipv6Cidr,d.message,b);break;case"emoji":hK(c,hF.emoji(),d.message,b);break;case"ulid":hK(c,hF.ulid,d.message,b);break;case"base64":switch(b.base64Strategy){case"format:binary":hJ(c,"binary",d.message,b);break;case"contentEncoding:base64":c.contentEncoding="base64";break;case"pattern:zod":hK(c,hF.base64,d.message,b)}break;case"nanoid":hK(c,hF.nanoid,d.message,b)}return c}function hH(a,b){return"escape"===b.patternStrategy?function(a){let b="";for(let c=0;c<a.length;c++)hI.has(a[c])||(b+="\\"),b+=a[c];return b}(a):a}var hI=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function hJ(a,b,c,d){var e;a.format||(null==(e=a.anyOf)?void 0:e.some(a=>a.format))?(a.anyOf||(a.anyOf=[]),a.format&&(a.anyOf.push({format:a.format}),delete a.format),a.anyOf.push({format:b,...c&&d.errorMessages&&{errorMessage:{format:c}}})):a.format=b}function hK(a,b,c,d){var e;a.pattern||(null==(e=a.allOf)?void 0:e.some(a=>a.pattern))?(a.allOf||(a.allOf=[]),a.pattern&&(a.allOf.push({pattern:a.pattern}),delete a.pattern),a.allOf.push({pattern:hL(b,d),...c&&d.errorMessages&&{errorMessage:{pattern:c}}})):a.pattern=hL(b,d)}function hL(a,b){var c;if(!b.applyRegexFlags||!a.flags)return a.source;let d={i:a.flags.includes("i"),m:a.flags.includes("m"),s:a.flags.includes("s")},e=d.i?a.source.toLowerCase():a.source,f="",g=!1,h=!1,i=!1;for(let a=0;a<e.length;a++){if(g){f+=e[a],g=!1;continue}if(d.i){if(h){if(e[a].match(/[a-z]/)){i?(f+=e[a],f+=`${e[a-2]}-${e[a]}`.toUpperCase(),i=!1):"-"===e[a+1]&&(null==(c=e[a+2])?void 0:c.match(/[a-z]/))?(f+=e[a],i=!0):f+=`${e[a]}${e[a].toUpperCase()}`;continue}}else if(e[a].match(/[a-z]/)){f+=`[${e[a]}${e[a].toUpperCase()}]`;continue}}if(d.m){if("^"===e[a]){f+=`(^|(?<=[\r
]))`;continue}else if("$"===e[a]){f+=`($|(?=[\r
]))`;continue}}if(d.s&&"."===e[a]){f+=h?`${e[a]}\r
`:`[${e[a]}\r
]`;continue}f+=e[a],"\\"===e[a]?g=!0:h&&"]"===e[a]?h=!1:h||"["!==e[a]||(h=!0)}try{new RegExp(f)}catch(c){return console.warn(`Could not convert regex pattern at ${b.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),a.source}return f}function hM(a,b){var c,d,e,f,g,h;let i={type:"object",additionalProperties:null!=(c=hO(a.valueType._def,{...b,currentPath:[...b.currentPath,"additionalProperties"]}))?c:b.allowedAdditionalProperties};if((null==(d=a.keyType)?void 0:d._def.typeName)===m.ZodString&&(null==(e=a.keyType._def.checks)?void 0:e.length)){let{type:c,...d}=hG(a.keyType._def,b);return{...i,propertyNames:d}}if((null==(f=a.keyType)?void 0:f._def.typeName)===m.ZodEnum)return{...i,propertyNames:{enum:a.keyType._def.values}};if((null==(g=a.keyType)?void 0:g._def.typeName)===m.ZodBranded&&a.keyType._def.type._def.typeName===m.ZodString&&(null==(h=a.keyType._def.type._def.checks)?void 0:h.length)){let{type:c,...d}=hD(a.keyType._def,b);return{...i,propertyNames:d}}return i}var hN={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function hO(a,b,c=!1){var d;let e=b.seen.get(a);if(b.override){let f=null==(d=b.override)?void 0:d.call(b,a,b,e,c);if(f!==hB)return f}if(e&&!c){let a=hP(e,b);if(void 0!==a)return a}let f={def:a,path:b.currentPath,jsonSchema:void 0};b.seen.set(a,f);let g=((a,b,c)=>{switch(b){case m.ZodString:return hG(a,c);case m.ZodNumber:var d,e,f,g,h,i,j=a;let k={type:"number"};if(!j.checks)return k;for(let a of j.checks)switch(a.kind){case"int":k.type="integer";break;case"min":a.inclusive?k.minimum=a.value:k.exclusiveMinimum=a.value;break;case"max":a.inclusive?k.maximum=a.value:k.exclusiveMaximum=a.value;break;case"multipleOf":k.multipleOf=a.value}return k;case m.ZodObject:return function(a,b){let c={type:"object",properties:{}},d=[],e=a.shape();for(let a in e){let f=e[a];if(void 0===f||void 0===f._def)continue;let g=function(a){try{return a.isOptional()}catch(a){return!0}}(f),h=hO(f._def,{...b,currentPath:[...b.currentPath,"properties",a],propertyPath:[...b.currentPath,"properties",a]});void 0!==h&&(c.properties[a]=h,g||d.push(a))}d.length&&(c.required=d);let f=function(a,b){if("ZodNever"!==a.catchall._def.typeName)return hO(a.catchall._def,{...b,currentPath:[...b.currentPath,"additionalProperties"]});switch(a.unknownKeys){case"passthrough":return b.allowedAdditionalProperties;case"strict":return b.rejectedAdditionalProperties;case"strip":return"strict"===b.removeAdditionalStrategy?b.allowedAdditionalProperties:b.rejectedAdditionalProperties}}(a,b);return void 0!==f&&(c.additionalProperties=f),c}(a,c);case m.ZodBigInt:var l=a;let n={type:"integer",format:"int64"};if(!l.checks)return n;for(let a of l.checks)switch(a.kind){case"min":a.inclusive?n.minimum=a.value:n.exclusiveMinimum=a.value;break;case"max":a.inclusive?n.maximum=a.value:n.exclusiveMaximum=a.value;break;case"multipleOf":n.multipleOf=a.value}return n;case m.ZodBoolean:return{type:"boolean"};case m.ZodDate:return function a(b,c,d){let e=null!=d?d:c.dateStrategy;if(Array.isArray(e))return{anyOf:e.map((d,e)=>a(b,c,d))};switch(e){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":var f=b;let g={type:"integer",format:"unix-time"};for(let a of f.checks)switch(a.kind){case"min":g.minimum=a.value;break;case"max":g.maximum=a.value}return g}}(a,c);case m.ZodUndefined:return{not:{}};case m.ZodNull:return{type:"null"};case m.ZodArray:var o,p,q,r=a,s=c;let t={type:"array"};return(null==(o=r.type)?void 0:o._def)&&(null==(q=null==(p=r.type)?void 0:p._def)?void 0:q.typeName)!==m.ZodAny&&(t.items=hO(r.type._def,{...s,currentPath:[...s.currentPath,"items"]})),r.minLength&&(t.minItems=r.minLength.value),r.maxLength&&(t.maxItems=r.maxLength.value),r.exactLength&&(t.minItems=r.exactLength.value,t.maxItems=r.exactLength.value),t;case m.ZodUnion:case m.ZodDiscriminatedUnion:return function(a,b){let c=a.options instanceof Map?Array.from(a.options.values()):a.options;if(c.every(a=>a._def.typeName in hN&&(!a._def.checks||!a._def.checks.length))){let a=c.reduce((a,b)=>{let c=hN[b._def.typeName];return c&&!a.includes(c)?[...a,c]:a},[]);return{type:a.length>1?a:a[0]}}if(c.every(a=>"ZodLiteral"===a._def.typeName&&!a.description)){let a=c.reduce((a,b)=>{let c=typeof b._def.value;switch(c){case"string":case"number":case"boolean":return[...a,c];case"bigint":return[...a,"integer"];case"object":if(null===b._def.value)return[...a,"null"];default:return a}},[]);if(a.length===c.length){let b=a.filter((a,b,c)=>c.indexOf(a)===b);return{type:b.length>1?b:b[0],enum:c.reduce((a,b)=>a.includes(b._def.value)?a:[...a,b._def.value],[])}}}else if(c.every(a=>"ZodEnum"===a._def.typeName))return{type:"string",enum:c.reduce((a,b)=>[...a,...b._def.values.filter(b=>!a.includes(b))],[])};var d=a,e=b;let f=(d.options instanceof Map?Array.from(d.options.values()):d.options).map((a,b)=>hO(a._def,{...e,currentPath:[...e.currentPath,"anyOf",`${b}`]})).filter(a=>!!a&&(!e.strictUnions||"object"==typeof a&&Object.keys(a).length>0));return f.length?{anyOf:f}:void 0}(a,c);case m.ZodIntersection:var u=a,v=c;let w=[hO(u.left._def,{...v,currentPath:[...v.currentPath,"allOf","0"]}),hO(u.right._def,{...v,currentPath:[...v.currentPath,"allOf","1"]})].filter(a=>!!a),x=[];return w.forEach(a=>{if((!("type"in a)||"string"!==a.type)&&"allOf"in a)x.push(...a.allOf);else{let b=a;if("additionalProperties"in a&&!1===a.additionalProperties){let{additionalProperties:c,...d}=a;b=d}x.push(b)}}),x.length?{allOf:x}:void 0;case m.ZodTuple:return H=a,I=c,H.rest?{type:"array",minItems:H.items.length,items:H.items.map((a,b)=>hO(a._def,{...I,currentPath:[...I.currentPath,"items",`${b}`]})).reduce((a,b)=>void 0===b?a:[...a,b],[]),additionalItems:hO(H.rest._def,{...I,currentPath:[...I.currentPath,"additionalItems"]})}:{type:"array",minItems:H.items.length,maxItems:H.items.length,items:H.items.map((a,b)=>hO(a._def,{...I,currentPath:[...I.currentPath,"items",`${b}`]})).reduce((a,b)=>void 0===b?a:[...a,b],[])};case m.ZodRecord:return hM(a,c);case m.ZodLiteral:var y=a;let z=typeof y.value;return"bigint"!==z&&"number"!==z&&"boolean"!==z&&"string"!==z?{type:Array.isArray(y.value)?"array":"object"}:{type:"bigint"===z?"integer":z,const:y.value};case m.ZodEnum:return{type:"string",enum:Array.from(a.values)};case m.ZodNativeEnum:var A=a;let B=A.values,C=Object.keys(A.values).filter(a=>"number"!=typeof B[B[a]]).map(a=>B[a]),D=Array.from(new Set(C.map(a=>typeof a)));return{type:1===D.length?"string"===D[0]?"string":"number":["string","number"],enum:C};case m.ZodNullable:var E=a,F=c;if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(E.innerType._def.typeName)&&(!E.innerType._def.checks||!E.innerType._def.checks.length))return{type:[hN[E.innerType._def.typeName],"null"]};let G=hO(E.innerType._def,{...F,currentPath:[...F.currentPath,"anyOf","0"]});return G&&{anyOf:[G,{type:"null"}]};case m.ZodOptional:var H,I,J,K=a,L=c;if(L.currentPath.toString()===(null==(J=L.propertyPath)?void 0:J.toString()))return hO(K.innerType._def,L);let M=hO(K.innerType._def,{...L,currentPath:[...L.currentPath,"anyOf","1"]});return M?{anyOf:[{not:{}},M]}:{};case m.ZodMap:return d=a,"record"===(e=c).mapStrategy?hM(d,e):{type:"array",maxItems:125,items:{type:"array",items:[hO(d.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||{},hO(d.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||{}],minItems:2,maxItems:2}};case m.ZodSet:var N=a,O=c;let P={type:"array",uniqueItems:!0,items:hO(N.valueType._def,{...O,currentPath:[...O.currentPath,"items"]})};return N.minSize&&(P.minItems=N.minSize.value),N.maxSize&&(P.maxItems=N.maxSize.value),P;case m.ZodLazy:return()=>a.getter()._def;case m.ZodPromise:return hO(a.type._def,c);case m.ZodNaN:case m.ZodNever:return{not:{}};case m.ZodEffects:return f=a,"input"===(g=c).effectStrategy?hO(f.schema._def,g):{};case m.ZodAny:case m.ZodUnknown:return{};case m.ZodDefault:return h=a,i=c,{...hO(h.innerType._def,i),default:h.defaultValue()};case m.ZodBranded:return hD(a,c);case m.ZodReadonly:case m.ZodCatch:return hO(a.innerType._def,c);case m.ZodPipeline:var Q=a,R=c;if("input"===R.pipeStrategy)return hO(Q.in._def,R);if("output"===R.pipeStrategy)return hO(Q.out._def,R);let S=hO(Q.in._def,{...R,currentPath:[...R.currentPath,"allOf","0"]}),T=hO(Q.out._def,{...R,currentPath:[...R.currentPath,"allOf",S?"1":"0"]});return{allOf:[S,T].filter(a=>void 0!==a)};case m.ZodFunction:case m.ZodVoid:case m.ZodSymbol:default:return}})(a,a.typeName,b),h="function"==typeof g?hO(g(),b):g;if(h&&hQ(a,b,h),b.postProcess){let c=b.postProcess(h,a,b);return f.jsonSchema=h,c}return f.jsonSchema=h,h}var hP=(a,b)=>{switch(b.$refStrategy){case"root":return{$ref:a.path.join("/")};case"relative":return{$ref:((a,b)=>{let c=0;for(;c<a.length&&c<b.length&&a[c]===b[c];c++);return[(a.length-c).toString(),...b.slice(c)].join("/")})(b.currentPath,a.path)};case"none":case"seen":if(a.path.length<b.currentPath.length&&a.path.every((a,c)=>b.currentPath[c]===a))return console.warn(`Recursive reference detected at ${b.currentPath.join("/")}! Defaulting to any`),{};return"seen"===b.$refStrategy?{}:void 0}},hQ=(a,b,c)=>(a.description&&(c.description=a.description),c);function hR(a,b){var c,d;if("_zod"in a){let d=null!=(c=null==b?void 0:b.useReferences)&&c;return hT(()=>dt(a,{target:"draft-7",io:"output",reused:d?"ref":"inline"}),{validate:async b=>{let c=await dD(a,b);return c.success?{success:!0,value:c.data}:{success:!1,error:c.error}}})}let e=null!=(d=null==b?void 0:b.useReferences)&&d;return hT(()=>((a,b)=>{var c;let d=(a=>{let b,c="string"==typeof(b=a)?{...hC,name:b}:{...hC,...b},d=void 0!==c.name?[...c.basePath,c.definitionPath,c.name]:c.basePath;return{...c,currentPath:d,propertyPath:void 0,seen:new Map(Object.entries(c.definitions).map(([a,b])=>[b._def,{def:b._def,path:[...c.basePath,c.definitionPath,a],jsonSchema:void 0}]))}})(b),e="object"==typeof b&&b.definitions?Object.entries(b.definitions).reduce((a,[b,c])=>{var e;return{...a,[b]:null!=(e=hO(c._def,{...d,currentPath:[...d.basePath,d.definitionPath,b]},!0))?e:{}}},{}):void 0,f="string"==typeof b?b:(null==b?void 0:b.nameStrategy)==="title"||null==b?void 0:b.name,g=null!=(c=hO(a._def,void 0===f?d:{...d,currentPath:[...d.basePath,d.definitionPath,f]},!1))?c:{},h="object"==typeof b&&void 0!==b.name&&"title"===b.nameStrategy?b.name:void 0;void 0!==h&&(g.title=h);let i=void 0===f?e?{...g,[d.definitionPath]:e}:g:{$ref:[..."relative"===d.$refStrategy?[]:d.basePath,d.definitionPath,f].join("/"),[d.definitionPath]:{...e,[f]:g}};return i.$schema="http://json-schema.org/draft-07/schema#",i})(a,{$refStrategy:e?"root":"none"}),{validate:async b=>{let c=await a.safeParseAsync(b);return c.success?{success:!0,value:c.data}:{success:!1,error:c.error}}})}var hS=Symbol.for("vercel.ai.schema");function hT(a,{validate:b}={}){return{[hS]:!0,_type:void 0,[hw]:!0,get jsonSchema(){return"function"==typeof a&&(a=a()),a},validate:b}}var{btoa:hU,atob:hV}=globalThis,hW=Object.defineProperty,hX=(Symbol.for("vercel.ai.error.AI_NoOutputSpecifiedError"),Symbol.for("vercel.ai.error.AI_InvalidArgumentError"),Symbol.for("vercel.ai.error.AI_InvalidStreamPartError"),Symbol.for("vercel.ai.error.AI_InvalidToolInputError"),Symbol.for("vercel.ai.error.AI_MCPClientError"),Symbol.for("vercel.ai.error.AI_NoImageGeneratedError"),"AI_NoObjectGeneratedError"),hY=`vercel.ai.error.${hX}`,hZ=Symbol.for(hY),h$=class extends F{constructor({message:a="No object generated.",cause:b,text:c,response:d,usage:e,finishReason:f}){super({name:hX,message:a,cause:b}),this[y]=!0,this.text=c,this.response=d,this.usage=e,this.finishReason=f}static isInstance(a){return F.hasMarker(a,hY)}};y=hZ,Symbol.for("vercel.ai.error.AI_NoOutputGeneratedError"),Symbol.for("vercel.ai.error.AI_NoSuchToolError"),Symbol.for("vercel.ai.error.AI_ToolCallRepairError"),Symbol.for("vercel.ai.error.AI_InvalidDataContentError"),Symbol.for("vercel.ai.error.AI_InvalidMessageRoleError"),Symbol.for("vercel.ai.error.AI_MessageConversionError"),Symbol.for("vercel.ai.error.AI_DownloadError"),Symbol.for("vercel.ai.error.AI_RetryError");var h_="5.0.72",h0=er([dP(),eR(Uint8Array),eR(ArrayBuffer),eQ(a=>{var b,c;return null!=(c=null==(b=globalThis.Buffer)?void 0:b.isBuffer(a))&&c},{message:"Must be a Buffer"})]),h1=eO(()=>er([ef(),dP(),d9(),ed(),ew(dP(),h1),el(h1)])),h2=ew(dP(),ew(dP(),h1)),h3=en({type:eA("text"),text:dP(),providerOptions:h2.optional()}),h4=en({type:eA("image"),image:er([h0,eR(URL)]),mediaType:dP().optional(),providerOptions:h2.optional()}),h5=en({type:eA("file"),data:er([h0,eR(URL)]),filename:dP().optional(),mediaType:dP(),providerOptions:h2.optional()}),h6=en({type:eA("reasoning"),text:dP(),providerOptions:h2.optional()}),h7=en({type:eA("tool-call"),toolCallId:dP(),toolName:dP(),input:eh(),providerOptions:h2.optional(),providerExecuted:ed().optional()}),h8=et("type",[en({type:eA("text"),value:dP()}),en({type:eA("json"),value:h1}),en({type:eA("error-text"),value:dP()}),en({type:eA("error-json"),value:h1}),en({type:eA("content"),value:el(er([en({type:eA("text"),text:dP()}),en({type:eA("media"),data:dP(),mediaType:dP()})]))})]),h9=en({type:eA("tool-result"),toolCallId:dP(),toolName:dP(),output:h8,providerOptions:h2.optional()}),ia=en({role:eA("system"),content:dP(),providerOptions:h2.optional()}),ib=en({role:eA("user"),content:er([dP(),el(er([h3,h4,h5]))]),providerOptions:h2.optional()}),ic=en({role:eA("assistant"),content:er([dP(),el(er([h3,h5,h6,h7,h9]))]),providerOptions:h2.optional()});er([ia,ib,ic,en({role:eA("tool"),content:el(h9),providerOptions:h2.optional()})]),hr({prefix:"aitxt",size:24}),TransformStream;var id=hx(()=>hR(er([eo({type:eA("text-start"),id:dP(),providerMetadata:h2.optional()}),eo({type:eA("text-delta"),id:dP(),delta:dP(),providerMetadata:h2.optional()}),eo({type:eA("text-end"),id:dP(),providerMetadata:h2.optional()}),eo({type:eA("error"),errorText:dP()}),eo({type:eA("tool-input-start"),toolCallId:dP(),toolName:dP(),providerExecuted:ed().optional(),dynamic:ed().optional()}),eo({type:eA("tool-input-delta"),toolCallId:dP(),inputTextDelta:dP()}),eo({type:eA("tool-input-available"),toolCallId:dP(),toolName:dP(),input:eh(),providerExecuted:ed().optional(),providerMetadata:h2.optional(),dynamic:ed().optional()}),eo({type:eA("tool-input-error"),toolCallId:dP(),toolName:dP(),input:eh(),providerExecuted:ed().optional(),providerMetadata:h2.optional(),dynamic:ed().optional(),errorText:dP()}),eo({type:eA("tool-output-available"),toolCallId:dP(),output:eh(),providerExecuted:ed().optional(),dynamic:ed().optional(),preliminary:ed().optional()}),eo({type:eA("tool-output-error"),toolCallId:dP(),errorText:dP(),providerExecuted:ed().optional(),dynamic:ed().optional()}),eo({type:eA("reasoning-start"),id:dP(),providerMetadata:h2.optional()}),eo({type:eA("reasoning-delta"),id:dP(),delta:dP(),providerMetadata:h2.optional()}),eo({type:eA("reasoning-end"),id:dP(),providerMetadata:h2.optional()}),eo({type:eA("source-url"),sourceId:dP(),url:dP(),title:dP().optional(),providerMetadata:h2.optional()}),eo({type:eA("source-document"),sourceId:dP(),mediaType:dP(),title:dP(),filename:dP().optional(),providerMetadata:h2.optional()}),eo({type:eA("file"),url:dP(),mediaType:dP(),providerMetadata:h2.optional()}),eo({type:eQ(a=>"string"==typeof a&&a.startsWith("data-"),{message:'Type must start with "data-"'}),id:dP().optional(),data:eh(),transient:ed().optional()}),eo({type:eA("start-step")}),eo({type:eA("finish-step")}),eo({type:eA("start"),messageId:dP().optional(),messageMetadata:eh().optional()}),eo({type:eA("finish"),messageMetadata:eh().optional()}),eo({type:eA("abort")}),eo({type:eA("message-metadata"),messageMetadata:eh()})])));async function ie(a){if(void 0===a)return{value:void 0,state:"undefined-input"};let b=await hz({text:a});return b.success?{value:b.value,state:"successful-parse"}:(b=await hz({text:function(a){let b=["ROOT"],c=-1,d=null;function e(a,e,f){switch(a){case'"':c=e,b.pop(),b.push(f),b.push("INSIDE_STRING");break;case"f":case"t":case"n":c=e,d=e,b.pop(),b.push(f),b.push("INSIDE_LITERAL");break;case"-":b.pop(),b.push(f),b.push("INSIDE_NUMBER");break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":c=e,b.pop(),b.push(f),b.push("INSIDE_NUMBER");break;case"{":c=e,b.pop(),b.push(f),b.push("INSIDE_OBJECT_START");break;case"[":c=e,b.pop(),b.push(f),b.push("INSIDE_ARRAY_START")}}function f(a,d){switch(a){case",":b.pop(),b.push("INSIDE_OBJECT_AFTER_COMMA");break;case"}":c=d,b.pop()}}function g(a,d){switch(a){case",":b.pop(),b.push("INSIDE_ARRAY_AFTER_COMMA");break;case"]":c=d,b.pop()}}for(let h=0;h<a.length;h++){let i=a[h];switch(b[b.length-1]){case"ROOT":e(i,h,"FINISH");break;case"INSIDE_OBJECT_START":switch(i){case'"':b.pop(),b.push("INSIDE_OBJECT_KEY");break;case"}":c=h,b.pop()}break;case"INSIDE_OBJECT_AFTER_COMMA":'"'===i&&(b.pop(),b.push("INSIDE_OBJECT_KEY"));break;case"INSIDE_OBJECT_KEY":'"'===i&&(b.pop(),b.push("INSIDE_OBJECT_AFTER_KEY"));break;case"INSIDE_OBJECT_AFTER_KEY":":"===i&&(b.pop(),b.push("INSIDE_OBJECT_BEFORE_VALUE"));break;case"INSIDE_OBJECT_BEFORE_VALUE":e(i,h,"INSIDE_OBJECT_AFTER_VALUE");break;case"INSIDE_OBJECT_AFTER_VALUE":f(i,h);break;case"INSIDE_STRING":switch(i){case'"':b.pop(),c=h;break;case"\\":b.push("INSIDE_STRING_ESCAPE");break;default:c=h}break;case"INSIDE_ARRAY_START":"]"===i?(c=h,b.pop()):(c=h,e(i,h,"INSIDE_ARRAY_AFTER_VALUE"));break;case"INSIDE_ARRAY_AFTER_VALUE":switch(i){case",":b.pop(),b.push("INSIDE_ARRAY_AFTER_COMMA");break;case"]":c=h,b.pop();break;default:c=h}break;case"INSIDE_ARRAY_AFTER_COMMA":e(i,h,"INSIDE_ARRAY_AFTER_VALUE");break;case"INSIDE_STRING_ESCAPE":b.pop(),c=h;break;case"INSIDE_NUMBER":switch(i){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":c=h;break;case"e":case"E":case"-":case".":break;case",":b.pop(),"INSIDE_ARRAY_AFTER_VALUE"===b[b.length-1]&&g(i,h),"INSIDE_OBJECT_AFTER_VALUE"===b[b.length-1]&&f(i,h);break;case"}":b.pop(),"INSIDE_OBJECT_AFTER_VALUE"===b[b.length-1]&&f(i,h);break;case"]":b.pop(),"INSIDE_ARRAY_AFTER_VALUE"===b[b.length-1]&&g(i,h);break;default:b.pop()}break;case"INSIDE_LITERAL":{let e=a.substring(d,h+1);"false".startsWith(e)||"true".startsWith(e)||"null".startsWith(e)?c=h:(b.pop(),"INSIDE_OBJECT_AFTER_VALUE"===b[b.length-1]?f(i,h):"INSIDE_ARRAY_AFTER_VALUE"===b[b.length-1]&&g(i,h))}}}let h=a.slice(0,c+1);for(let c=b.length-1;c>=0;c--)switch(b[c]){case"INSIDE_STRING":h+='"';break;case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":h+="}";break;case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":h+="]";break;case"INSIDE_LITERAL":{let b=a.substring(d,a.length);"true".startsWith(b)?h+="true".slice(b.length):"false".startsWith(b)?h+="false".slice(b.length):"null".startsWith(b)&&(h+="null".slice(b.length))}}return h}(a)})).success?{value:b.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"}}hr({prefix:"aitxt",size:24}),hr({prefix:"aiobj",size:24}),hr({prefix:"aiobj",size:24}),((a,b)=>{for(var c in b)hW(a,c,{get:b[c],enumerable:!0})})({},{object:()=>ih,text:()=>ig});var ig=()=>({type:"text",responseFormat:{type:"text"},parsePartial:async({text:a})=>({partial:a}),parseOutput:async({text:a})=>a}),ih=({schema:a})=>{let b=function(a){return null==a?hT({properties:{},additionalProperties:!1}):"object"==typeof a&&null!==a&&hS in a&&!0===a[hS]&&"jsonSchema"in a&&"validate"in a?a:"function"==typeof a?a():hR(a)}(a);return{type:"object",responseFormat:{type:"json",schema:b.jsonSchema},async parsePartial({text:a}){let b=await ie(a);switch(b.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:b.value};default:{let a=b.state;throw Error(`Unsupported parse state: ${a}`)}}},async parseOutput({text:a},c){let d=await hz({text:a});if(!d.success)throw new h$({message:"No object generated: could not parse the response.",cause:d.error,text:a,response:c.response,usage:c.usage,finishReason:c.finishReason});let e=await hy({value:d.value,schema:b});if(!e.success)throw new h$({message:"No object generated: response did not match schema.",cause:e.error,text:a,response:c.response,usage:c.usage,finishReason:c.finishReason});return e.value}}},ii=(Symbol.for("vercel.ai.error.AI_NoSuchProviderError"),ep({name:dP(),version:dP()})),ij=ep({_meta:eD(en({}).loose())}),ik=en({method:dP(),params:eD(ij)}),il=ep({experimental:eD(en({}).loose()),logging:eD(en({}).loose()),prompts:eD(ep({listChanged:eD(ed())})),resources:eD(ep({subscribe:eD(ed()),listChanged:eD(ed())})),tools:eD(ep({listChanged:eD(ed())}))});ij.extend({protocolVersion:dP(),capabilities:il,serverInfo:ii,instructions:eD(dP())});var im=ij.extend({nextCursor:eD(dP())}),io=en({name:dP(),description:eD(dP()),inputSchema:en({type:eA("object"),properties:eD(en({}).loose())}).loose()}).loose();im.extend({tools:el(io)});var ip=en({type:eA("text"),text:dP()}).loose(),iq=en({type:eA("image"),data:dh(d4,void 0),mimeType:dP()}).loose(),ir=en({uri:dP(),mimeType:eD(dP())}).loose(),is=ir.extend({text:dP()}),it=ir.extend({blob:dh(d4,void 0)}),iu=en({type:eA("resource"),resource:er([is,it])}).loose();ij.extend({content:el(er([ip,iq,iu])),isError:ed().default(!1).optional()}).or(ij.extend({toolResult:eh()}));var iv=en({jsonrpc:eA("2.0"),id:er([dP(),d9().int()])}).merge(ik).strict(),iw=en({jsonrpc:eA("2.0"),id:er([dP(),d9().int()]),result:ij}).strict(),ix=en({jsonrpc:eA("2.0"),id:er([dP(),d9().int()]),error:en({code:d9().int(),message:dP(),data:eD(eh())})}).strict();er([iv,en({jsonrpc:eA("2.0")}).merge(en({method:dP(),params:eD(ij)})).strict(),iw,ix]);var iy=class{constructor({api:a="/api/chat",credentials:b,headers:c,body:d,fetch:e,prepareSendMessagesRequest:f,prepareReconnectToStreamRequest:g}){this.api=a,this.credentials=b,this.headers=c,this.body=d,this.fetch=e,this.prepareSendMessagesRequest=f,this.prepareReconnectToStreamRequest=g}async sendMessages({abortSignal:a,...b}){var c,d,e,f,g;let h=await hA(this.body),i=await hA(this.headers),j=await hA(this.credentials),k=await (null==(c=this.prepareSendMessagesRequest)?void 0:c.call(this,{api:this.api,id:b.chatId,messages:b.messages,body:{...h,...b.body},headers:{...i,...b.headers},credentials:j,requestMetadata:b.metadata,trigger:b.trigger,messageId:b.messageId})),l=null!=(d=null==k?void 0:k.api)?d:this.api,m=(null==k?void 0:k.headers)!==void 0?k.headers:{...i,...b.headers},n=(null==k?void 0:k.body)!==void 0?k.body:{...h,...b.body,id:b.chatId,messages:b.messages,trigger:b.trigger,messageId:b.messageId},o=null!=(e=null==k?void 0:k.credentials)?e:j,p=null!=(f=this.fetch)?f:globalThis.fetch,q=await p(l,{method:"POST",headers:ht({"Content-Type":"application/json",...m},`ai-sdk/${h_}`,hs()),body:JSON.stringify(n),credentials:o,signal:a});if(!q.ok)throw Error(null!=(g=await q.text())?g:"Failed to fetch the chat response.");if(!q.body)throw Error("The response body is empty.");return this.processResponseStream(q.body)}async reconnectToStream(a){var b,c,d,e,f;let g=await hA(this.body),h=await hA(this.headers),i=await hA(this.credentials),j=await (null==(b=this.prepareReconnectToStreamRequest)?void 0:b.call(this,{api:this.api,id:a.chatId,body:{...g,...a.body},headers:{...h,...a.headers},credentials:i,requestMetadata:a.metadata})),k=null!=(c=null==j?void 0:j.api)?c:`${this.api}/${a.chatId}/stream`,l=(null==j?void 0:j.headers)!==void 0?j.headers:{...h,...a.headers},m=null!=(d=null==j?void 0:j.credentials)?d:i,n=null!=(e=this.fetch)?e:globalThis.fetch,o=await n(k,{method:"GET",headers:ht(l,`ai-sdk/${h_}`,hs()),credentials:m});if(204===o.status)return null;if(!o.ok)throw Error(null!=(f=await o.text())?f:"Failed to fetch the chat response.");if(!o.body)throw Error("The response body is empty.");return this.processResponseStream(o.body)}},iz=class extends iy{constructor(a={}){super(a)}processResponseStream(a){return(function({stream:a,schema:b}){return a.pipeThrough(new TextDecoderStream).pipeThrough(new V).pipeThrough(new TransformStream({async transform({data:a},c){"[DONE]"!==a&&c.enqueue(await hz({text:a,schema:b}))}}))})({stream:a,schema:id}).pipeThrough(new TransformStream({async transform(a,b){if(!a.success)throw a.error;b.enqueue(a.value)}}))}};function iA(a="msg"){return`${a}_${Math.random().toString(36).slice(2,9)}`}function iB(a){let b=new Date,c=new Date(a),d=Math.floor((b.getTime()-c.getTime())/1e3),e=Math.floor(d/60),f=Math.floor(e/60),g=Math.floor(f/24);return d<60?"just now":e<60?`${e}m ago`:f<24?`${f}h ago`:g<7?`${g}d ago`:c.toLocaleDateString()}function iC(a){return"object"==typeof a&&null!==a&&"type"in a&&"text"===a.type&&"text"in a&&"string"==typeof a.text}function iD(a){return(a.parts??[]).filter(iC).map(a=>a.text).join("")}function iE({initialSystemMessage:a,userId:b,apiEndpoint:c="/api/chat"}){let{messages:d,error:e,stop:f,setMessages:g,status:h,sendMessage:i}=function({experimental_throttle:a,resume:b=!1,...c}={}){let d=(0,B.useRef)("chat"in c?c.chat:new hq(c));("chat"in c&&c.chat!==d.current||"id"in c&&d.current.id!==c.id)&&(d.current="chat"in c?c.chat:new hq(c));let e="id"in c?c.id:null,f=(0,B.useCallback)(b=>d.current["~registerMessagesCallback"](b,a),[a,e]),g=(0,B.useSyncExternalStore)(f,()=>d.current.messages,()=>d.current.messages),h=(0,B.useSyncExternalStore)(d.current["~registerStatusCallback"],()=>d.current.status,()=>d.current.status),i=(0,B.useSyncExternalStore)(d.current["~registerErrorCallback"],()=>d.current.error,()=>d.current.error),j=(0,B.useCallback)(a=>{"function"==typeof a&&(a=a(d.current.messages)),d.current.messages=a},[d]);return(0,B.useEffect)(()=>{b&&d.current.resumeStream()},[b,d]),{id:d.current.id,messages:g,setMessages:j,sendMessage:d.current.sendMessage,regenerate:d.current.regenerate,clearError:d.current.clearError,stop:d.current.stop,error:i,resumeStream:d.current.resumeStream,status:h,addToolResult:d.current.addToolResult}}({chat:new hq({transport:new iz({api:c,headers:{"x-user-id":b??"00000000-0000-0000-0000-000000000001"},body:{options:{topK:6,includeRuns:!0,includeFilters:!0,stream:!0}}})})}),j="submitted"===h||"streaming"===h,[k,l]=(0,B.useState)(null),[m,n]=(0,B.useState)(""),[o,p]=(0,B.useState)(""),[q,r]=(0,B.useState)(iA("conv")),[s,t]=(0,B.useState)([]),[u,v]=(0,B.useState)(!1),[w,x]=(0,B.useState)(null),y=(0,B.useRef)(null);function z(){l(null),n("")}function C(){k&&(g(d.map(a=>a.id===k?{...a,parts:[{type:"text",text:m}]}:a)),l(null),n(""))}function D(a){confirm("Delete this conversation?")&&t(b=>b.filter(b=>b.id!==a))}return(0,A.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100%",border:"1px solid #e6e6e6",borderRadius:8,overflow:"hidden"},children:[(0,A.jsxs)("div",{style:{padding:12,borderBottom:"1px solid #eee",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,A.jsx)("strong",{children:"ModelLens Assistant (AI SDK)"}),(0,A.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,A.jsxs)("button",{type:"button",onClick:()=>v(!u),style:{padding:"6px 12px",borderRadius:4,background:"#f6f8fa",border:"1px solid #ddd",fontSize:12,cursor:"pointer"},title:"Saved conversations",children:["\uD83D\uDCAC ",s.length]}),(0,A.jsx)("button",{type:"button",onClick:function(){if(0===d.length)return;let a=d.find(a=>"user"===a.role),b=a?iD(a).slice(0,50):"New Conversation",c=new Date().toISOString(),e=d.map(a=>({id:a.id,role:a.role,content:iD(a),createdAt:"object"==typeof a&&"createdAt"in a&&"string"==typeof a.createdAt?a.createdAt:""}));if(s.find(a=>a.id===q))t(a=>a.map(a=>a.id===q?{...a,messages:e,updatedAt:c,title:b}:a));else{let a={id:q,title:b,messages:e,createdAt:c,updatedAt:c};t(b=>[a,...b])}},disabled:0===d.length,style:{padding:"6px 12px",borderRadius:4,background:"#0b5cff",color:"#fff",border:"none",fontSize:12,cursor:0===d.length?"not-allowed":"pointer",opacity:0===d.length?.5:1},title:"Save conversation",children:"\uD83D\uDCBE Save"}),(0,A.jsx)("button",{type:"button",onClick:function(){g(a?[{id:iA("sys"),role:"system",parts:[{type:"text",text:a}]}]:[]),r(iA("conv")),x(null),v(!1)},style:{padding:"6px 12px",borderRadius:4,background:"#f6f8fa",border:"1px solid #ddd",fontSize:12,cursor:"pointer"},title:"New conversation",children:" New"})]})]}),u&&(0,A.jsx)("div",{style:{maxHeight:200,overflowY:"auto",borderBottom:"1px solid #eee",background:"#f9f9f9"},children:0===s.length?(0,A.jsx)("div",{style:{padding:16,textAlign:"center",color:"#666",fontSize:13},children:"No saved conversations yet"}):(0,A.jsx)("div",{children:s.map(a=>(0,A.jsxs)("div",{style:{padding:"8px 12px",borderBottom:"1px solid #e6e6e6",display:"flex",justifyContent:"space-between",alignItems:"center",background:a.id===q?"#e8f0fe":"transparent",cursor:"default"},children:[(0,A.jsxs)("button",{type:"button",onClick:()=>{g(a.messages.map(a=>({id:a.id,role:a.role,parts:[{type:"text",text:a.content}]}))),r(a.id),v(!1),x(null)},style:{flex:1,overflow:"hidden",textAlign:"left",background:"transparent",border:"none",cursor:"pointer",padding:0},children:[(0,A.jsx)("div",{style:{fontSize:13,fontWeight:500,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:a.title}),(0,A.jsxs)("div",{style:{fontSize:11,color:"#666",marginTop:2},children:[a.messages.length," messages "," ",iB(a.updatedAt)]})]}),(0,A.jsx)("button",{type:"button",onClick:b=>{b.stopPropagation(),D(a.id)},onKeyDown:b=>{("Enter"===b.key||" "===b.key)&&(b.stopPropagation(),D(a.id))},style:{background:"transparent",border:"none",cursor:"pointer",fontSize:14,padding:"4px 8px"},title:"Delete conversation",children:"\uD83D\uDDD1"})]},a.id))})}),(0,A.jsxs)("div",{style:{flex:1,overflowY:"auto",padding:12,display:"flex",flexDirection:"column",gap:12},children:[d.map(function(a){let b="assistant"===a.role,c=k===a.id;return(0,A.jsx)("div",{style:{display:"flex",gap:8,alignItems:"flex-start",justifyContent:b?"flex-start":"flex-end"},children:(0,A.jsx)("div",{style:{maxWidth:"78%",background:b?"#f6f8fa":"#0b5cff",color:b?"#111":"#fff",padding:"10px 12px",borderRadius:8,whiteSpace:"pre-wrap",wordBreak:"break-word"},children:c?(0,A.jsxs)("div",{children:[(0,A.jsx)("textarea",{value:m,onChange:a=>n(a.target.value),style:{width:"100%",minHeight:60,padding:8,borderRadius:4,border:"1px solid #ddd",fontSize:14,fontFamily:"inherit"}}),(0,A.jsxs)("div",{style:{marginTop:8,display:"flex",gap:8},children:[(0,A.jsx)("button",{type:"button",onClick:C,style:{padding:"6px 12px",borderRadius:4,background:"#0b5cff",color:"#fff",border:"none",fontSize:12,cursor:"pointer"},children:"Save"}),(0,A.jsx)("button",{type:"button",onClick:z,style:{padding:"6px 12px",borderRadius:4,background:"#ddd",color:"#111",border:"none",fontSize:12,cursor:"pointer"},children:"Cancel"})]})]}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("div",{style:{fontSize:14},children:iD(a)}),(0,A.jsxs)("div",{style:{fontSize:11,color:b?"#666":"rgba(255,255,255,0.8)",marginTop:6,display:"flex",alignItems:"center",gap:8,justifyContent:"space-between"},children:[(0,A.jsx)("span",{children:(()=>{let b=a.createdAt,c="string"==typeof b?b:b instanceof Date?b.toISOString():void 0;return c?iB(c):"just now"})()}),"user"===a.role&&!j&&(0,A.jsxs)("div",{style:{display:"flex",gap:6},children:[(0,A.jsx)("button",{type:"button",onClick:()=>{"user"===a.role&&(l(a.id),n((a.parts??[]).filter(iC).map(a=>a.text).join("")))},style:{background:"transparent",border:"none",color:"inherit",cursor:"pointer",fontSize:11,padding:"2px 4px"},title:"Edit message",children:""}),(0,A.jsx)("button",{type:"button",onClick:()=>{var b;return b=a.id,void(confirm("Delete this message?")&&g(d.filter(a=>a.id!==b)))},style:{background:"transparent",border:"none",color:"inherit",cursor:"pointer",fontSize:11,padding:"2px 4px"},title:"Delete message",children:"\uD83D\uDDD1"})]})]})]})})},a.id)}),(0,A.jsx)("div",{ref:y})]}),(0,A.jsxs)("div",{className:"p-3 border-t border-gray-200",children:[(0,A.jsxs)("form",{onSubmit:function(a){a?.preventDefault();let b=o.trim();b&&!j&&(i({text:b}),p(""))},className:"flex gap-2",children:[(0,A.jsx)("input",{value:o,onChange:function(a){p(a.target.value)},placeholder:"Ask about models, filters, or runs...",className:"flex-1 px-3 py-2 rounded border border-gray-300",disabled:j}),j?(0,A.jsx)("button",{type:"button",onClick:f,style:{padding:"10px 14px",borderRadius:6,background:"#e53e3e",color:"#fff",border:"none",cursor:"pointer"},children:"Stop"}):(0,A.jsx)("button",{type:"submit",style:{padding:"10px 14px",borderRadius:6,background:"#0b5cff",color:"#fff",border:"none",cursor:"pointer"},children:"Send"})]}),e&&(0,A.jsx)("div",{style:{color:"crimson",marginTop:8},children:e.message||String(e)}),(0,A.jsxs)("div",{style:{marginTop:12},children:[(0,A.jsx)("strong",{children:"Sources"}),!w&&(0,A.jsx)("div",{style:{color:"#666",fontSize:13},children:"No sources yet"}),w&&0===w.length&&(0,A.jsx)("div",{style:{color:"#666",fontSize:13},children:"No sources returned"}),w&&w.length>0&&(0,A.jsx)("div",{style:{display:"grid",gap:8,marginTop:8},children:w.map((a,b)=>(0,A.jsxs)("div",{style:{border:"1px solid #f0f0f0",padding:8,borderRadius:6,background:"#fff"},children:[(0,A.jsxs)("div",{style:{fontSize:13,fontWeight:600},children:["[",a.type,"] ",a.title??a.id]}),a.snippet&&(0,A.jsx)("div",{style:{fontSize:12,color:"#444",marginTop:6},children:a.snippet}),(0,A.jsxs)("div",{style:{marginTop:8},children:["MODEL"===a.type&&(0,A.jsx)("a",{href:`/models/${a.id}`,target:"_blank",rel:"noreferrer",children:"View model"}),"FILTER"===a.type&&(0,A.jsx)("a",{href:`/filters/${a.id}`,target:"_blank",rel:"noreferrer",children:"View filter"}),"RUN"===a.type&&(0,A.jsx)("a",{href:`/filters/${a.filterId??""}/runs/${a.id}`,target:"_blank",rel:"noreferrer",children:"View run"}),"DOC"===a.type&&(0,A.jsx)("a",{href:`/docs/${encodeURIComponent(a.id)}`,target:"_blank",rel:"noreferrer",children:"Open doc"})]})]},`${a.type}:${a.id}:${b}`))})]})]})]})}function iF(){return(0,A.jsx)("div",{className:"container mx-auto py-8 px-4",style:{height:"calc(100vh - 4rem)"},children:(0,A.jsx)(iE,{userId:"00000000-0000-0000-0000-000000000001",initialSystemMessage:"I'm ModelLens Assistant. I can help you find AI models, understand saved filters, and analyze filter runs. Ask me anything!"})})}hx(()=>hR(el(en({id:dP(),role:ey(["system","user","assistant"]),metadata:eh().optional(),parts:el(er([en({type:eA("text"),text:dP(),state:ey(["streaming","done"]).optional(),providerMetadata:h2.optional()}),en({type:eA("reasoning"),text:dP(),state:ey(["streaming","done"]).optional(),providerMetadata:h2.optional()}),en({type:eA("source-url"),sourceId:dP(),url:dP(),title:dP().optional(),providerMetadata:h2.optional()}),en({type:eA("source-document"),sourceId:dP(),mediaType:dP(),title:dP(),filename:dP().optional(),providerMetadata:h2.optional()}),en({type:eA("file"),mediaType:dP(),filename:dP().optional(),url:dP(),providerMetadata:h2.optional()}),en({type:eA("step-start")}),en({type:dP().startsWith("data-"),id:dP().optional(),data:eh()}),en({type:eA("dynamic-tool"),toolName:dP(),toolCallId:dP(),state:eA("input-streaming"),input:eh().optional(),output:ej().optional(),errorText:ej().optional()}),en({type:eA("dynamic-tool"),toolName:dP(),toolCallId:dP(),state:eA("input-available"),input:eh(),output:ej().optional(),errorText:ej().optional(),callProviderMetadata:h2.optional()}),en({type:eA("dynamic-tool"),toolName:dP(),toolCallId:dP(),state:eA("output-available"),input:eh(),output:eh(),errorText:ej().optional(),callProviderMetadata:h2.optional(),preliminary:ed().optional()}),en({type:eA("dynamic-tool"),toolName:dP(),toolCallId:dP(),state:eA("output-error"),input:eh(),output:ej().optional(),errorText:dP(),callProviderMetadata:h2.optional()}),en({type:dP().startsWith("tool-"),toolCallId:dP(),state:eA("input-streaming"),providerExecuted:ed().optional(),input:eh().optional(),output:ej().optional(),errorText:ej().optional(),approval:ej().optional()}),en({type:dP().startsWith("tool-"),toolCallId:dP(),state:eA("input-available"),providerExecuted:ed().optional(),input:eh(),output:ej().optional(),errorText:ej().optional(),callProviderMetadata:h2.optional(),approval:ej().optional()}),en({type:dP().startsWith("tool-"),toolCallId:dP(),state:eA("approval-requested"),input:eh(),providerExecuted:ed().optional(),output:ej().optional(),errorText:ej().optional(),callProviderMetadata:h2.optional(),approval:en({id:dP(),approved:ej().optional(),reason:ej().optional()})}),en({type:dP().startsWith("tool-"),toolCallId:dP(),state:eA("approval-responded"),input:eh(),providerExecuted:ed().optional(),output:ej().optional(),errorText:ej().optional(),callProviderMetadata:h2.optional(),approval:en({id:dP(),approved:ed(),reason:dP().optional()})}),en({type:dP().startsWith("tool-"),toolCallId:dP(),state:eA("output-available"),providerExecuted:ed().optional(),input:eh(),output:eh(),errorText:ej().optional(),callProviderMetadata:h2.optional(),preliminary:ed().optional(),approval:en({id:dP(),approved:eA(!0),reason:dP().optional()}).optional()}),en({type:dP().startsWith("tool-"),toolCallId:dP(),state:eA("output-error"),providerExecuted:ed().optional(),input:eh(),output:ej().optional(),errorText:dP(),callProviderMetadata:h2.optional(),approval:en({id:dP(),approved:eA(!0),reason:dP().optional()}).optional()}),en({type:dP().startsWith("tool-"),toolCallId:dP(),state:eA("output-denied"),providerExecuted:ed().optional(),input:eh(),output:ej().optional(),errorText:ej().optional(),callProviderMetadata:h2.optional(),approval:en({id:dP(),approved:eA(!1),reason:dP().optional()})})]))}))))},3295:a=>{"use strict";a.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},16397:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>h,metadata:()=>g});var d=c(50689),e=c(94767),f=c.n(e);c(69353);let g={title:"ModelLens",description:"Explore and visualize LLM models"};function h({children:a}){return(0,d.jsx)("html",{lang:"en",className:"",children:(0,d.jsx)("body",{className:f().className,children:a})})}},19121:a=>{"use strict";a.exports=require("next/dist/server/app-render/action-async-storage.external.js")},26713:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/is-bot")},28354:a=>{"use strict";a.exports=require("util")},29294:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-async-storage.external.js")},29831:()=>{},32046:(a,b,c)=>{"use strict";c.r(b),c.d(b,{GlobalError:()=>D.a,__next_app__:()=>J,handler:()=>L,pages:()=>I,routeModule:()=>K,tree:()=>H});var d=c(26379),e=c(40196),f=c(57856),g=c(63125),h=c(64499),i=c(74547),j=c(74410),k=c(17919),l=c(43447),m=c(4877),n=c(72153),o=c(48926),p=c(8896),q=c(23945),r=c(261),s=c(31632),t=c(39829),u=c(26713),v=c(42009),w=c(73730),x=c(20294),y=c(86491),z=c(29269),A=c(38135),B=c(86439),C=c(40201),D=c.n(C),E=c(16017),F=c(32952),G={};for(let a in E)0>["default","tree","pages","GlobalError","__next_app__","routeModule","handler"].indexOf(a)&&(G[a]=()=>E[a]);c.d(b,G);let H={children:["",{children:["chat",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(c.bind(c,72431)),"/Users/paul/Projects/model-lens/packages/website/app/chat/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(c.bind(c,16397)),"/Users/paul/Projects/model-lens/packages/website/app/layout.tsx"],"global-error":[()=>Promise.resolve().then(c.t.bind(c,40201,23)),"next/dist/client/components/builtin/global-error.js"],"not-found":[()=>Promise.resolve().then(c.t.bind(c,21821,23)),"next/dist/client/components/builtin/not-found.js"],forbidden:[()=>Promise.resolve().then(c.t.bind(c,47040,23)),"next/dist/client/components/builtin/forbidden.js"],unauthorized:[()=>Promise.resolve().then(c.t.bind(c,1507,23)),"next/dist/client/components/builtin/unauthorized.js"]}]}.children,I=["/Users/paul/Projects/model-lens/packages/website/app/chat/page.tsx"],J={require:c,loadChunk:()=>Promise.resolve()},K=new d.AppPageRouteModule({definition:{kind:e.RouteKind.APP_PAGE,page:"/chat/page",pathname:"/chat",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:H},distDir:".next",relativeProjectDir:""});async function L(a,b,d){var C;let G="/chat/page";"/index"===G&&(G="/");let M=(0,h.getRequestMeta)(a,"postponed"),N=(0,h.getRequestMeta)(a,"minimalMode"),O=await K.prepare(a,b,{srcPage:G,multiZoneDraftMode:!1});if(!O)return b.statusCode=400,b.end("Bad Request"),null==d.waitUntil||d.waitUntil.call(d,Promise.resolve()),null;let{buildId:P,query:Q,params:R,parsedUrl:S,pageIsDynamic:T,buildManifest:U,nextFontManifest:V,reactLoadableManifest:W,serverActionsManifest:X,clientReferenceManifest:Y,subresourceIntegrityManifest:Z,prerenderManifest:$,isDraftMode:_,resolvedPathname:aa,revalidateOnlyGenerated:ab,routerServerContext:ac,nextConfig:ad,interceptionRoutePatterns:ae}=O,af=S.pathname||"/",ag=(0,r.normalizeAppPath)(G),{isOnDemandRevalidate:ah}=O,ai=K.match(af,$),aj=!!$.routes[aa],ak=!!(ai||aj||$.routes[ag]),al=a.headers["user-agent"]||"",am=(0,u.getBotType)(al),an=(0,p.isHtmlBotRequest)(a),ao=(0,h.getRequestMeta)(a,"isPrefetchRSCRequest")??"1"===a.headers[t.NEXT_ROUTER_PREFETCH_HEADER],ap=(0,h.getRequestMeta)(a,"isRSCRequest")??!!a.headers[t.RSC_HEADER],aq=(0,s.getIsPossibleServerAction)(a),ar=(0,m.checkIsAppPPREnabled)(ad.experimental.ppr)&&(null==(C=$.routes[ag]??$.dynamicRoutes[ag])?void 0:C.renderingMode)==="PARTIALLY_STATIC",as=!1,at=!1,au=ar?M:void 0,av=ar&&ap&&!ao,aw=(0,h.getRequestMeta)(a,"segmentPrefetchRSCRequest"),ax=!al||(0,p.shouldServeStreamingMetadata)(al,ad.htmlLimitedBots);an&&ar&&(ak=!1,ax=!1);let ay=!0===K.isDev||!ak||"string"==typeof M||av,az=an&&ar,aA=null;_||!ak||ay||aq||au||av||(aA=aa);let aB=aA;!aB&&K.isDev&&(aB=aa),K.isDev||_||!ak||!ap||av||(0,k.d)(a.headers);let aC={...E,tree:H,pages:I,GlobalError:D(),handler:L,routeModule:K,__next_app__:J};X&&Y&&(0,o.setReferenceManifestsSingleton)({page:G,clientReferenceManifest:Y,serverActionsManifest:X,serverModuleMap:(0,q.createServerModuleMap)({serverActionsManifest:X})});let aD=a.method||"GET",aE=(0,g.getTracer)(),aF=aE.getActiveScopeSpan();try{let f=K.getVaryHeader(aa,ae);b.setHeader("Vary",f);let k=async(c,d)=>{let e=new l.NodeNextRequest(a),f=new l.NodeNextResponse(b);return K.render(e,f,d).finally(()=>{if(!c)return;c.setAttributes({"http.status_code":b.statusCode,"next.rsc":!1});let d=aE.getRootSpanAttributes();if(!d)return;if(d.get("next.span_type")!==i.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${d.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let e=d.get("next.route");if(e){let a=`${aD} ${e}`;c.setAttributes({"next.route":e,"http.route":e,"next.span_name":a}),c.updateName(a)}else c.updateName(`${aD} ${a.url}`)})},m=async({span:e,postponed:f,fallbackRouteParams:g})=>{let i={query:Q,params:R,page:ag,sharedContext:{buildId:P},serverComponentsHmrCache:(0,h.getRequestMeta)(a,"serverComponentsHmrCache"),fallbackRouteParams:g,renderOpts:{App:()=>null,Document:()=>null,pageConfig:{},ComponentMod:aC,Component:(0,j.T)(aC),params:R,routeModule:K,page:G,postponed:f,shouldWaitOnAllReady:az,serveStreamingMetadata:ax,supportsDynamicResponse:"string"==typeof f||ay,buildManifest:U,nextFontManifest:V,reactLoadableManifest:W,subresourceIntegrityManifest:Z,serverActionsManifest:X,clientReferenceManifest:Y,setIsrStatus:null==ac?void 0:ac.setIsrStatus,dir:c(33873).join(process.cwd(),K.relativeProjectDir),isDraftMode:_,isRevalidate:ak&&!f&&!av,botType:am,isOnDemandRevalidate:ah,isPossibleServerAction:aq,assetPrefix:ad.assetPrefix,nextConfigOutput:ad.output,crossOrigin:ad.crossOrigin,trailingSlash:ad.trailingSlash,previewProps:$.preview,deploymentId:ad.deploymentId,enableTainting:ad.experimental.taint,htmlLimitedBots:ad.htmlLimitedBots,devtoolSegmentExplorer:ad.experimental.devtoolSegmentExplorer,reactMaxHeadersLength:ad.reactMaxHeadersLength,multiZoneDraftMode:!1,incrementalCache:(0,h.getRequestMeta)(a,"incrementalCache"),cacheLifeProfiles:ad.experimental.cacheLife,basePath:ad.basePath,serverActions:ad.experimental.serverActions,...as?{nextExport:!0,supportsDynamicResponse:!1,isStaticGeneration:!0,isRevalidate:!0,isDebugDynamicAccesses:as}:{},experimental:{isRoutePPREnabled:ar,expireTime:ad.expireTime,staleTimes:ad.experimental.staleTimes,cacheComponents:!!ad.experimental.cacheComponents,clientSegmentCache:!!ad.experimental.clientSegmentCache,clientParamParsing:!!ad.experimental.clientParamParsing,dynamicOnHover:!!ad.experimental.dynamicOnHover,inlineCss:!!ad.experimental.inlineCss,authInterrupts:!!ad.experimental.authInterrupts,clientTraceMetadata:ad.experimental.clientTraceMetadata||[]},waitUntil:d.waitUntil,onClose:a=>{b.on("close",a)},onAfterTaskError:()=>{},onInstrumentationRequestError:(b,c,d)=>K.onRequestError(a,b,d,ac),err:(0,h.getRequestMeta)(a,"invokeError"),dev:K.isDev}},l=await k(e,i),{metadata:m}=l,{cacheControl:n,headers:o={},fetchTags:p}=m;if(p&&(o[y.NEXT_CACHE_TAGS_HEADER]=p),a.fetchMetrics=m.fetchMetrics,ak&&(null==n?void 0:n.revalidate)===0&&!K.isDev&&!ar){let a=m.staticBailoutInfo,b=Object.defineProperty(Error(`Page changed from static to dynamic at runtime ${aa}${(null==a?void 0:a.description)?`, reason: ${a.description}`:""}
see more here https://nextjs.org/docs/messages/app-static-to-dynamic-error`),"__NEXT_ERROR_CODE",{value:"E132",enumerable:!1,configurable:!0});if(null==a?void 0:a.stack){let c=a.stack;b.stack=b.message+c.substring(c.indexOf("\n"))}throw b}return{value:{kind:v.CachedRouteKind.APP_PAGE,html:l,headers:o,rscData:m.flightData,postponed:m.postponed,status:m.statusCode,segmentData:m.segmentData},cacheControl:n}},o=async({hasResolved:c,previousCacheEntry:f,isRevalidating:g,span:i})=>{let j,k=!1===K.isDev,l=c||b.writableEnded;if(ah&&ab&&!f&&!N)return(null==ac?void 0:ac.render404)?await ac.render404(a,b):(b.statusCode=404,b.end("This page could not be found")),null;if(ai&&(j=(0,w.parseFallbackField)(ai.fallback)),j===w.FallbackMode.PRERENDER&&(0,u.isBot)(al)&&(!ar||an)&&(j=w.FallbackMode.BLOCKING_STATIC_RENDER),(null==f?void 0:f.isStale)===-1&&(ah=!0),ah&&(j!==w.FallbackMode.NOT_FOUND||f)&&(j=w.FallbackMode.BLOCKING_STATIC_RENDER),!N&&j!==w.FallbackMode.BLOCKING_STATIC_RENDER&&aB&&!l&&!_&&T&&(k||!aj)){let b;if((k||ai)&&j===w.FallbackMode.NOT_FOUND)throw new B.NoFallbackError;if(ar&&!ap){let c="string"==typeof(null==ai?void 0:ai.fallback)?ai.fallback:k?ag:null;if(b=await K.handleResponse({cacheKey:c,req:a,nextConfig:ad,routeKind:e.RouteKind.APP_PAGE,isFallback:!0,prerenderManifest:$,isRoutePPREnabled:ar,responseGenerator:async()=>m({span:i,postponed:void 0,fallbackRouteParams:k||at?(0,n.u)(ag):null}),waitUntil:d.waitUntil}),null===b)return null;if(b)return delete b.cacheControl,b}}let o=ah||g||!au?void 0:au;if(as&&void 0!==o)return{cacheControl:{revalidate:1,expire:void 0},value:{kind:v.CachedRouteKind.PAGES,html:x.default.EMPTY,pageData:{},headers:void 0,status:void 0}};let p=T&&ar&&((0,h.getRequestMeta)(a,"renderFallbackShell")||at)?(0,n.u)(af):null;return m({span:i,postponed:o,fallbackRouteParams:p})},p=async c=>{var f,g,i,j,k;let l,n=await K.handleResponse({cacheKey:aA,responseGenerator:a=>o({span:c,...a}),routeKind:e.RouteKind.APP_PAGE,isOnDemandRevalidate:ah,isRoutePPREnabled:ar,req:a,nextConfig:ad,prerenderManifest:$,waitUntil:d.waitUntil});if(_&&b.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate"),K.isDev&&b.setHeader("Cache-Control","no-store, must-revalidate"),!n){if(aA)throw Object.defineProperty(Error("invariant: cache entry required but not generated"),"__NEXT_ERROR_CODE",{value:"E62",enumerable:!1,configurable:!0});return null}if((null==(f=n.value)?void 0:f.kind)!==v.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant app-page handler received invalid cache entry ${null==(i=n.value)?void 0:i.kind}`),"__NEXT_ERROR_CODE",{value:"E707",enumerable:!1,configurable:!0});let p="string"==typeof n.value.postponed;ak&&!av&&(!p||ao)&&(N||b.setHeader("x-nextjs-cache",ah?"REVALIDATED":n.isMiss?"MISS":n.isStale?"STALE":"HIT"),b.setHeader(t.NEXT_IS_PRERENDER_HEADER,"1"));let{value:q}=n;if(au)l={revalidate:0,expire:void 0};else if(N&&ap&&!ao&&ar)l={revalidate:0,expire:void 0};else if(!K.isDev)if(_)l={revalidate:0,expire:void 0};else if(ak){if(n.cacheControl)if("number"==typeof n.cacheControl.revalidate){if(n.cacheControl.revalidate<1)throw Object.defineProperty(Error(`Invalid revalidate configuration provided: ${n.cacheControl.revalidate} < 1`),"__NEXT_ERROR_CODE",{value:"E22",enumerable:!1,configurable:!0});l={revalidate:n.cacheControl.revalidate,expire:(null==(j=n.cacheControl)?void 0:j.expire)??ad.expireTime}}else l={revalidate:y.CACHE_ONE_YEAR,expire:void 0}}else b.getHeader("Cache-Control")||(l={revalidate:0,expire:void 0});if(n.cacheControl=l,"string"==typeof aw&&(null==q?void 0:q.kind)===v.CachedRouteKind.APP_PAGE&&q.segmentData){b.setHeader(t.NEXT_DID_POSTPONE_HEADER,"2");let c=null==(k=q.headers)?void 0:k[y.NEXT_CACHE_TAGS_HEADER];N&&ak&&c&&"string"==typeof c&&b.setHeader(y.NEXT_CACHE_TAGS_HEADER,c);let d=q.segmentData.get(aw);return void 0!==d?(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.fromStatic(d,t.RSC_CONTENT_TYPE_HEADER),cacheControl:n.cacheControl}):(b.statusCode=204,(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.EMPTY,cacheControl:n.cacheControl}))}let r=(0,h.getRequestMeta)(a,"onCacheEntry");if(r&&await r({...n,value:{...n.value,kind:"PAGE"}},{url:(0,h.getRequestMeta)(a,"initURL")}))return null;if(p&&au)throw Object.defineProperty(Error("Invariant: postponed state should not be present on a resume request"),"__NEXT_ERROR_CODE",{value:"E396",enumerable:!1,configurable:!0});if(q.headers){let a={...q.headers};for(let[c,d]of(N&&ak||delete a[y.NEXT_CACHE_TAGS_HEADER],Object.entries(a)))if(void 0!==d)if(Array.isArray(d))for(let a of d)b.appendHeader(c,a);else"number"==typeof d&&(d=d.toString()),b.appendHeader(c,d)}let s=null==(g=q.headers)?void 0:g[y.NEXT_CACHE_TAGS_HEADER];if(N&&ak&&s&&"string"==typeof s&&b.setHeader(y.NEXT_CACHE_TAGS_HEADER,s),!q.status||ap&&ar||(b.statusCode=q.status),!N&&q.status&&F.RedirectStatusCode[q.status]&&ap&&(b.statusCode=200),p&&b.setHeader(t.NEXT_DID_POSTPONE_HEADER,"1"),ap&&!_){if(void 0===q.rscData){if(q.postponed)throw Object.defineProperty(Error("Invariant: Expected postponed to be undefined"),"__NEXT_ERROR_CODE",{value:"E372",enumerable:!1,configurable:!0});return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:q.html,cacheControl:av?{revalidate:0,expire:void 0}:n.cacheControl})}return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.fromStatic(q.rscData,t.RSC_CONTENT_TYPE_HEADER),cacheControl:n.cacheControl})}let u=q.html;if(!p||N||ap)return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:n.cacheControl});if(as)return u.push(new ReadableStream({start(a){a.enqueue(z.ENCODED_TAGS.CLOSED.BODY_AND_HTML),a.close()}})),(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:{revalidate:0,expire:void 0}});let w=new TransformStream;return u.push(w.readable),m({span:c,postponed:q.postponed,fallbackRouteParams:null}).then(async a=>{var b,c;if(!a)throw Object.defineProperty(Error("Invariant: expected a result to be returned"),"__NEXT_ERROR_CODE",{value:"E463",enumerable:!1,configurable:!0});if((null==(b=a.value)?void 0:b.kind)!==v.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant: expected a page response, got ${null==(c=a.value)?void 0:c.kind}`),"__NEXT_ERROR_CODE",{value:"E305",enumerable:!1,configurable:!0});await a.value.html.pipeTo(w.writable)}).catch(a=>{w.writable.abort(a).catch(a=>{console.error("couldn't abort transformer",a)})}),(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:{revalidate:0,expire:void 0}})};if(!aF)return await aE.withPropagatedContext(a.headers,()=>aE.trace(i.BaseServerSpan.handleRequest,{spanName:`${aD} ${a.url}`,kind:g.SpanKind.SERVER,attributes:{"http.method":aD,"http.target":a.url}},p));await p(aF)}catch(b){throw b instanceof B.NoFallbackError||await K.onRequestError(a,b,{routerKind:"App Router",routePath:G,routeType:"render",revalidateReason:(0,f.c)({isRevalidate:ak,isOnDemandRevalidate:ah})},ac),b}}},33873:a=>{"use strict";a.exports=require("path")},41025:a=>{"use strict";a.exports=require("next/dist/server/app-render/dynamic-access-async-storage.external.js")},60095:()=>{},60199:(a,b,c)=>{Promise.resolve().then(c.bind(c,72431))},63033:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63566:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,1535,23)),Promise.resolve().then(c.t.bind(c,33870,23)),Promise.resolve().then(c.t.bind(c,18608,23)),Promise.resolve().then(c.t.bind(c,54191,23)),Promise.resolve().then(c.t.bind(c,22647,23)),Promise.resolve().then(c.t.bind(c,71855,23)),Promise.resolve().then(c.t.bind(c,46961,23)),Promise.resolve().then(c.t.bind(c,68358,23)),Promise.resolve().then(c.bind(c,92655))},69353:()=>{},72431:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>d});let d=(0,c(19669).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/paul/Projects/model-lens/packages/website/app/chat/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/paul/Projects/model-lens/packages/website/app/chat/page.tsx","default")},78547:a=>{a.exports=function(a,b){let c;if("function"!=typeof a)throw TypeError(`Expected the first argument to be a \`function\`, got \`${typeof a}\`.`);let d=0;return function(...e){clearTimeout(c);let f=Date.now(),g=b-(f-d);g<=0?(d=f,a.apply(this,e)):c=setTimeout(()=>{d=Date.now(),a.apply(this,e)},g)}}},86439:a=>{"use strict";a.exports=require("next/dist/shared/lib/no-fallback-error.external")},90463:(a,b,c)=>{Promise.resolve().then(c.bind(c,441))},93830:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,40201,23)),Promise.resolve().then(c.t.bind(c,7824,23)),Promise.resolve().then(c.t.bind(c,87894,23)),Promise.resolve().then(c.t.bind(c,63665,23)),Promise.resolve().then(c.t.bind(c,12005,23)),Promise.resolve().then(c.t.bind(c,52861,23)),Promise.resolve().then(c.t.bind(c,14391,23)),Promise.resolve().then(c.t.bind(c,69248,23)),Promise.resolve().then(c.t.bind(c,57357,23))}};var b=require("../../webpack-runtime.js");b.C(a);var c=b.X(0,[179,488],()=>b(b.s=32046));module.exports=c})();